module.exports=[56704,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-async-storage.external.js",()=>require("next/dist/server/app-render/work-async-storage.external.js"))},32319,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-unit-async-storage.external.js",()=>require("next/dist/server/app-render/work-unit-async-storage.external.js"))},20635,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/action-async-storage.external.js",()=>require("next/dist/server/app-render/action-async-storage.external.js"))},36313,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.HooksClientContext},18341,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.ServerInsertedHtml},64600,a=>{"use strict";let b={progress:"progress",maintenance:"maintenance",light:"light"},c={[b.progress]:"Progress",[b.maintenance]:"Maintenance",[b.light]:"Light"},d={[b.progress]:"Push for small, steady improvements.",[b.maintenance]:"Hold steady and focus on form.",[b.light]:"Easy effort today."};a.s(["EXERCISE_HISTORY_AGGREGATION_MODES",0,{max:"max",avg:"avg"},"EXERCISE_HISTORY_DISPLAY_MODES",0,{weight:"weight",reps:"reps"},"EXERCISE_PRIMARY_METRICS",0,{weight:"weight",height:"height",time:"time",distance:"distance",repsOnly:"reps_only"},"EXERCISE_TYPES",0,{single:"single",b2b:"b2b",circuit:"circuit"},"SESSION_MODES",0,b,"SESSION_MODE_DESCRIPTIONS",0,d,"SESSION_MODE_LABELS",0,c])},13210,a=>{"use strict";var b=a.i(64600);function c(a){return a===b.SESSION_MODES.progress||a===b.SESSION_MODES.maintenance||a===b.SESSION_MODES.light}function d(a,e=b.SESSION_MODES.progress){return c(a)?a:e}function e(a,b){new Date().toISOString()}function f(a,b){let c=g(),d=b??null;c?(c.workoutName!==a||(c.routineId??null)!==d)&&e(a,d):e(a,d)}function g(){return null}function h(a){let b=g();b&&b.exercises.push(a)}function i(a){let b=g();b&&(b.cardio=a)}function j(){}a.s(["addCardioToSession",()=>i,"addExerciseToSession",()=>h,"clearWorkoutSession",()=>j,"ensureWorkoutSession",()=>f,"getWorkoutSession",()=>g,"initWorkoutSession",()=>e,"isSessionMode",()=>c,"resolveSessionMode",()=>d])},63586,a=>{"use strict";function b(a,b){return null}function c(a,b){}function d(a,b){return null}function e(a,b,c){}function f(a,b){return!1}function g(a,b){}a.s(["acknowledgeChangeWarning",()=>g,"hasChangeWarningAck",()=>f,"loadSessionTargetsMeta",()=>d,"loadSessionWorkout",()=>b,"saveSessionTargetsMeta",()=>e,"saveSessionWorkout",()=>c])},11827,a=>{"use strict";function b(a){return"lbs"===a||"kg"===a?a:"lbs"}function c(a){return"in"===a||"cm"===a?a:"in"}function d(a,b){return Number.isFinite(a)?"kg"===b?.45359237*a:a:0}function e(a,b){return Number.isFinite(a)?"kg"===b?a/.45359237:a:0}function f(a,b){return Number.isFinite(a)?"cm"===b?2.54*a:a:0}function g(a,b){return Number.isFinite(a)?"cm"===b?a/2.54:a:0}function h(a){if(!Number.isFinite(a))return"0";let b=Math.round(10*a)/10;return Number.isInteger(b)?b.toString():b.toFixed(1)}function i(a,b,c){if(c)return a<=0?"Machine":`+${h(d(a,b))} ${b}`;return`${h(d(a,b))} ${b}`}a.s(["DEFAULT_HEIGHT_UNIT",0,"in","DEFAULT_WEIGHT_UNIT",0,"lbs","convertHeightFromStorage",()=>f,"convertHeightToStorage",()=>g,"convertWeightFromStorage",()=>d,"convertWeightToStorage",()=>e,"formatDisplayNumber",()=>h,"formatWeightDisplay",()=>i,"normalizeHeightUnit",()=>c,"normalizeWeightUnit",()=>b])},62731,a=>{"use strict";var b=a.i(64600),c=a.i(11827);function d(a,c){return Object.values(b.EXERCISE_PRIMARY_METRICS).includes(a)?a:c?b.EXERCISE_PRIMARY_METRICS.repsOnly:b.EXERCISE_PRIMARY_METRICS.weight}function e(a,c,d,e){switch(a){case b.EXERCISE_PRIMARY_METRICS.weight:return d;case b.EXERCISE_PRIMARY_METRICS.height:return e;case b.EXERCISE_PRIMARY_METRICS.time:return c||"sec";case b.EXERCISE_PRIMARY_METRICS.distance:return c||"m";default:return null}}function f(a,c,d,f,g){let h=e(a,c,d,f);switch(a){case b.EXERCISE_PRIMARY_METRICS.weight:return g?`Added Weight (${h})`:`Weight (${h})`;case b.EXERCISE_PRIMARY_METRICS.height:return`Height (${h})`;case b.EXERCISE_PRIMARY_METRICS.time:return`Time (${h})`;case b.EXERCISE_PRIMARY_METRICS.distance:return`Distance (${h})`;case b.EXERCISE_PRIMARY_METRICS.repsOnly:return"Reps";default:return"Value"}}function g(a,d,e,f){return Number.isFinite(a)?d===b.EXERCISE_PRIMARY_METRICS.weight?(0,c.convertWeightFromStorage)(a,e):d===b.EXERCISE_PRIMARY_METRICS.height?(0,c.convertHeightFromStorage)(a,f):a:0}function h(a,d,f,h,i,j){if(d===b.EXERCISE_PRIMARY_METRICS.weight)return(0,c.formatWeightDisplay)(a,h,j);let k=e(d,f,h,i),l=g(a,d,h,i);return k?`${(0,c.formatDisplayNumber)(l)} ${k}`:(0,c.formatDisplayNumber)(l)}function i(a,b,d,e,f=!1){if(f&&0===a)return"";let h=g(a,b,d,e);return(0,c.formatDisplayNumber)(h)}function j(a,d,e,f){if(""===a)return 0;let g=parseFloat(a);return Number.isFinite(g)?Number.isFinite(g)?d===b.EXERCISE_PRIMARY_METRICS.weight?(0,c.convertWeightToStorage)(g,e):d===b.EXERCISE_PRIMARY_METRICS.height?(0,c.convertHeightToStorage)(g,f):g:0:null}function k(a){return a===b.EXERCISE_PRIMARY_METRICS.repsOnly}function l(a){return a===b.EXERCISE_PRIMARY_METRICS.weight}a.s(["convertMetricFromStorage",()=>g,"formatMetricDisplay",()=>h,"formatMetricInputValue",()=>i,"getMetricLabel",()=>f,"isRepsOnlyMetric",()=>k,"isWeightMetric",()=>l,"parseMetricInput",()=>j,"resolveMetricUnit",()=>e,"resolvePrimaryMetric",()=>d])},57254,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944),e=a.i(38246),f=a.i(63586),g=a.i(13210),h=a.i(64600),i=a.i(11827),j=a.i(62731);function k(a){if(!a)return[];let b=[];for(let c of a.exercises)if(c.type===h.EXERCISE_TYPES.single)b.push({name:c.name,targetWeight:Number.isFinite(c.targetWeight)?c.targetWeight:null,targetReps:Number.isFinite(c.targetReps)?c.targetReps:null,isBodyweight:c.isBodyweight??!1,isMachine:c.isMachine??!1,primaryMetric:c.primaryMetric,metricUnit:c.metricUnit??null});else{let[a,d]=c.exercises;b.push({name:a.name,targetWeight:Number.isFinite(a.targetWeight)?a.targetWeight:null,targetReps:Number.isFinite(a.targetReps)?a.targetReps:null,isBodyweight:a.isBodyweight??!1,isMachine:a.isMachine??!1,primaryMetric:a.primaryMetric,metricUnit:a.metricUnit??null}),b.push({name:d.name,targetWeight:Number.isFinite(d.targetWeight)?d.targetWeight:null,targetReps:Number.isFinite(d.targetReps)?d.targetReps:null,isBodyweight:d.isBodyweight??!1,isMachine:d.isMachine??!1,primaryMetric:d.primaryMetric,metricUnit:d.metricUnit??null})}return b}function l(){let a=(0,d.useParams)(),l=(0,d.useRouter)(),m=(0,d.useSearchParams)(),[n,o]=(0,c.useState)(null),[p,q]=(0,c.useState)(!0),[r,s]=(0,c.useState)(null),[t,u]=(0,c.useState)(!1),[v,w]=(0,c.useState)(!1),[x,y]=(0,c.useState)(0),[z,A]=(0,c.useState)(0),[B,C]=(0,c.useState)(null),[D,E]=(0,c.useState)(!1),[F,G]=(0,c.useState)(i.DEFAULT_WEIGHT_UNIT),[H,I]=(0,c.useState)(i.DEFAULT_HEIGHT_UNIT),J=a=>({primaryMetric:(0,j.resolvePrimaryMetric)(a.primaryMetric,a.isBodyweight),metricUnit:a.metricUnit??null}),K=(a,b,c)=>{let d=J(b);return(0,j.formatMetricDisplay)(a,d.primaryMetric,d.metricUnit,F,H,c)},L=a=>Math.round((0,i.convertWeightFromStorage)(a,F)).toLocaleString(),M=(0,c.useMemo)(()=>k(n),[n]),N=(0,c.useMemo)(()=>{let a=new Map;for(let b of M)a.set(b.name,b);return a},[M]),O=(0,c.useRef)(!1),P=(0,c.useRef)(!1);(0,c.useEffect)(()=>{let a=!0;return async function(){try{let b=await fetch("/api/user/settings");if(!b.ok)return;let c=await b.json();if(!a)return;G((0,i.normalizeWeightUnit)(c?.weightUnit)),I((0,i.normalizeHeightUnit)(c?.heightUnit))}catch(a){console.error("Error fetching user settings:",a)}}(),()=>{a=!1}},[]);let Q=m.get("routineId");return((0,c.useEffect)(()=>{!async function(){try{let b=`/api/workout/${a.name}`;Q&&(b+=`?routineId=${Q}`);let c=await fetch(b);if(!c.ok)throw Error("Workout not found");let d=await c.json();o(d.workout)}catch(a){console.error("Error fetching workout:",a)}finally{q(!1)}}()},[a.name,Q]),(0,c.useEffect)(()=>{let a=(0,g.getWorkoutSession)();if(!a)return void console.error("No session data found");s(a);let b=0;for(let c of a.exercises){let a=N.get(c.name),d=J({primaryMetric:c.primaryMetric??a?.primaryMetric,metricUnit:c.metricUnit??a?.metricUnit,isBodyweight:a?.isBodyweight});if((0,j.isWeightMetric)(d.primaryMetric))for(let a of(c.warmup&&(b+=c.warmup.weight*c.warmup.reps),c.sets))b+=a.weight*a.reps;if(c.b2bPartner){let a=N.get(c.b2bPartner.name),d=J({primaryMetric:c.b2bPartner.primaryMetric??a?.primaryMetric,metricUnit:c.b2bPartner.metricUnit??a?.metricUnit,isBodyweight:a?.isBodyweight});if((0,j.isWeightMetric)(d.primaryMetric))for(let a of(c.b2bPartner.warmup&&(b+=c.b2bPartner.warmup.weight*c.b2bPartner.warmup.reps),c.b2bPartner.sets))b+=a.weight*a.reps}}y(Math.round(b));let c=new Date(a.startTime);A(Math.round((new Date().getTime()-c.getTime())/6e4))},[N]),(0,c.useEffect)(()=>{if(!r||O.current)return;let a=`workout-saved-${r.startTime}`;if(localStorage.getItem(a)){console.log("âš ï¸ Workout already saved, skipping"),O.current=!0,w(!0);return}(async()=>{u(!0),O.current=!0;try{if(!(await fetch("/api/save-workout",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)})).ok)throw Error("Failed to save workout");localStorage.setItem(a,"true"),w(!0),console.log("âœ… Workout auto-saved")}catch(a){console.error("âŒ Error saving workout:",a),O.current=!1}finally{u(!1)}})()},[r]),(0,c.useEffect)(()=>{!r||P.current||(async()=>{E(!0),P.current=!0;try{let a=Q??("number"==typeof r.routineId?String(r.routineId):null),b=(0,f.loadSessionWorkout)(r.workoutName,a),c=k(b),d=(0,f.loadSessionTargetsMeta)(r.workoutName,a),e=d||c.length>0?{sessionMode:d?.sessionMode??null,source:d?.source??null,encouragement:d?.encouragement??null,goalSummary:d?.goalSummary??null,trendSummary:d?.trendSummary??null,targets:c}:null,g=new URLSearchParams;"number"==typeof r.sessionId&&g.set("sessionId",String(r.sessionId)),r.startTime&&g.set("sessionKey",r.startTime);let h=await fetch(`/api/workout-report?${g.toString()}`);if(h.ok){let a=await h.json();if(a?.report)return void C(a.report)}let i=await fetch("/api/workout-report",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({sessionData:r,preWorkoutTargets:e})});if(!i.ok)throw Error("Failed to generate report");let j=await i.json();C(j.report||null)}catch(a){console.error("Error generating report:",a),P.current=!1}finally{E(!1)}})()},[r,Q]),p)?(0,b.jsx)("div",{className:"min-h-screen bg-zinc-900 flex items-center justify-center p-4",children:(0,b.jsx)("div",{className:"text-white text-2xl",children:"Loading..."})}):n?(0,b.jsx)("div",{className:"min-h-screen bg-zinc-900 p-4",children:(0,b.jsxs)("div",{className:"max-w-2xl mx-auto",children:[(0,b.jsxs)("div",{className:"text-center mb-8",children:[(0,b.jsx)("div",{className:"text-8xl mb-4",children:"ðŸŽ‰"}),(0,b.jsx)("h1",{className:"text-4xl font-bold text-white mb-2",children:"Workout Complete!"}),(0,b.jsx)("div",{className:"text-zinc-400 text-xl mb-2",children:n.name}),(0,b.jsx)("div",{className:"text-zinc-500",children:new Date().toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})]}),(0,b.jsx)("div",{className:"bg-zinc-800 rounded-lg p-6 mb-8 border-2 border-green-600",children:r?(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("div",{className:"text-zinc-400 text-sm mb-2",children:"Total Volume"}),(0,b.jsxs)("div",{className:"text-white text-4xl font-bold mb-1",children:[L(x)," ",F]}),(0,b.jsxs)("div",{className:"text-zinc-500 text-sm mt-2",children:["Duration: ",z," minutes"]}),(0,b.jsxs)("div",{className:"text-xs mt-2",children:[t&&(0,b.jsx)("span",{className:"text-yellow-400",children:"Saving workout..."}),v&&(0,b.jsx)("span",{className:"text-green-400",children:"âœ“ Workout saved"})]})]}):(0,b.jsx)("div",{className:"text-center text-zinc-400",children:"Loading session data..."})}),(D||B)&&(0,b.jsxs)("div",{className:"bg-zinc-800 rounded-lg p-6 mb-8 border border-zinc-700",children:[(0,b.jsx)("div",{className:"text-zinc-300 text-sm font-semibold mb-3",children:"Workout Report"}),D&&(0,b.jsx)("div",{className:"text-zinc-400 text-sm",children:"Generating your report..."}),B&&(0,b.jsx)("div",{className:"text-zinc-200 text-sm whitespace-pre-line",children:B})]}),r&&(0,b.jsxs)("div",{className:"bg-zinc-800 rounded-lg p-6 mb-8",children:[(0,b.jsx)("h2",{className:"text-xl font-bold text-white mb-4",children:"EXERCISES COMPLETED"}),(0,b.jsx)("div",{className:"space-y-4",children:r.exercises.map((a,c)=>{let d=N.get(a.name),e=J({primaryMetric:a.primaryMetric??d?.primaryMetric,metricUnit:a.metricUnit??d?.metricUnit,isBodyweight:d?.isBodyweight}),f=a.b2bPartner?.name?N.get(a.b2bPartner.name):void 0,g=J({primaryMetric:a.b2bPartner?.primaryMetric??f?.primaryMetric,metricUnit:a.b2bPartner?.metricUnit??f?.metricUnit,isBodyweight:f?.isBodyweight}),i=!!a.isMachine&&(0,j.isWeightMetric)(e.primaryMetric),k=!!a.b2bPartner?.isMachine&&(0,j.isWeightMetric)(g.primaryMetric),l=(0,j.isWeightMetric)(e.primaryMetric)||a.b2bPartner&&(0,j.isWeightMetric)(g.primaryMetric),m=0;return(0,j.isWeightMetric)(e.primaryMetric)&&(m+=(a.warmup?a.warmup.weight*a.warmup.reps:0)+a.sets.reduce((a,b)=>a+b.weight*b.reps,0)),a.b2bPartner&&(0,j.isWeightMetric)(g.primaryMetric)&&(m+=(a.b2bPartner.warmup?a.b2bPartner.warmup.weight*a.b2bPartner.warmup.reps:0)+a.b2bPartner.sets.reduce((a,b)=>a+b.weight*b.reps,0)),(0,b.jsxs)("div",{className:"border-l-4 border-green-500 pl-3",children:[(0,b.jsx)("div",{className:"text-white font-semibold mb-1",children:a.type===h.EXERCISE_TYPES.single?a.name:`B2B: ${a.name} / ${a.b2bPartner?.name}`}),(0,b.jsxs)("div",{className:"text-zinc-400 text-sm mb-2",children:[a.sets.length," sets",l&&(0,b.jsxs)(b.Fragment,{children:[" â€¢ ",L(m)," ",F," volume"]})]}),(0,b.jsxs)("div",{className:"space-y-1 text-xs",children:[a.warmup&&(0,b.jsxs)("div",{className:"text-zinc-500",children:["Warmup: ",K(a.warmup.weight,{primaryMetric:e.primaryMetric,metricUnit:e.metricUnit,isBodyweight:d?.isBodyweight},i)," Ã—"," ",a.warmup.reps," reps"]}),a.sets.map((c,h)=>(0,b.jsxs)("div",{className:"text-zinc-300",children:["Set ",h+1,": ",K(c.weight,{primaryMetric:e.primaryMetric,metricUnit:e.metricUnit,isBodyweight:d?.isBodyweight},i)," Ã— ",c.reps," reps",a.b2bPartner&&a.b2bPartner.sets[h]&&(0,b.jsxs)("span",{className:"text-purple-400",children:[" + ",K(a.b2bPartner.sets[h].weight,{primaryMetric:g.primaryMetric,metricUnit:g.metricUnit,isBodyweight:f?.isBodyweight},k)," Ã—"," ",a.b2bPartner.sets[h].reps," reps"]})]},h))]})]},c)})}),r.cardio&&(0,b.jsxs)("div",{className:"mt-4 pt-4 border-t border-zinc-700",children:[(0,b.jsxs)("div",{className:"text-white font-semibold mb-1",children:["Cardio: ",r.cardio.type]}),(0,b.jsxs)("div",{className:"text-zinc-400 text-sm",children:[r.cardio.time," min",r.cardio.speed&&` â€¢ ${r.cardio.speed} mph`,r.cardio.incline&&` â€¢ ${r.cardio.incline}% incline`]})]})]}),(0,b.jsx)("button",{onClick:()=>{l.push("/routines")},className:"w-full bg-green-600 hover:bg-green-700 text-white py-4 rounded-lg text-xl font-bold transition-colors mb-4",children:"âœ… Finish & Go Home"})]})}):(0,b.jsx)("div",{className:"min-h-screen bg-zinc-900 flex items-center justify-center p-4",children:(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("div",{className:"text-white text-2xl mb-4",children:"Workout not found"}),(0,b.jsx)(e.default,{href:"/routines",className:"text-blue-400 hover:text-blue-300",children:"Back to routines"})]})})}a.s(["default",()=>l])}];

//# sourceMappingURL=%5Broot-of-the-server%5D__ecfd57cd._.js.map