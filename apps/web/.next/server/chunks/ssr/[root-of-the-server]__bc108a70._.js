module.exports=[56704,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-async-storage.external.js",()=>require("next/dist/server/app-render/work-async-storage.external.js"))},32319,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-unit-async-storage.external.js",()=>require("next/dist/server/app-render/work-unit-async-storage.external.js"))},20635,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/action-async-storage.external.js",()=>require("next/dist/server/app-render/action-async-storage.external.js"))},36313,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.HooksClientContext},18341,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.ServerInsertedHtml},64600,a=>{"use strict";let b={progress:"progress",maintenance:"maintenance",light:"light"},c={[b.progress]:"Progress",[b.maintenance]:"Maintenance",[b.light]:"Light"},d={[b.progress]:"Push for small, steady improvements.",[b.maintenance]:"Hold steady and focus on form.",[b.light]:"Easy effort today."};a.s(["EXERCISE_HISTORY_AGGREGATION_MODES",0,{max:"max",avg:"avg"},"EXERCISE_HISTORY_DISPLAY_MODES",0,{weight:"weight",reps:"reps"},"EXERCISE_PRIMARY_METRICS",0,{weight:"weight",height:"height",time:"time",distance:"distance",repsOnly:"reps_only"},"EXERCISE_TYPES",0,{single:"single",b2b:"b2b",circuit:"circuit"},"SESSION_MODES",0,b,"SESSION_MODE_DESCRIPTIONS",0,d,"SESSION_MODE_LABELS",0,c])},4655,a=>{"use strict";var b=a.i(87924);function c({children:a,className:c="",paddingClassName:d,borderClassName:e="border-zinc-700",borderWidthClassName:f="border-2"}){return(0,b.jsx)("div",{className:`bg-zinc-800 rounded-lg ${f} ${e} ${d||"p-4"} ${c}`.trim(),children:a})}function d({message:a,description:c,className:d=""}){return(0,b.jsxs)("div",{className:`text-zinc-500 text-center py-4 bg-zinc-800 rounded-lg ${d}`.trim(),children:[(0,b.jsx)("div",{children:a}),c&&(0,b.jsx)("div",{className:"text-zinc-600 text-sm mt-1",children:c})]})}function e({children:a,maxWidthClassName:c="max-w-2xl",className:d=""}){return(0,b.jsx)("div",{className:`fixed bottom-0 left-0 right-0 p-4 bg-zinc-900 border-t border-zinc-800 ${d}`.trim(),children:(0,b.jsx)("div",{className:`${c} mx-auto`,children:a})})}function f({icon:a,label:c,iconClassName:d="text-zinc-400",className:e=""}){return(0,b.jsxs)("h2",{className:`text-xl font-bold text-white mb-4 flex items-center gap-2 ${e}`.trim(),children:[(0,b.jsx)("span",{className:d,children:a}),c]})}a.s(["BottomActionBar",()=>e,"Card",()=>c,"EmptyState",()=>d,"SectionHeader",()=>f])},87674,a=>{"use strict";function b(a){return null}function c(a){}function d(a){var b;a.routineName&&(a.routineName,b=a.routineId&&String(a.routineId))}a.s(["invalidateWorkoutBootstrapCache",()=>d,"loadWorkoutBootstrapCache",()=>b,"saveWorkoutBootstrapCache",()=>c])},10585,a=>{"use strict";let b=["lower body compound","upper body compound","full body compound","chest","back","shoulders","biceps","triceps","forearms","core","lower back","glutes","quads","hamstrings","calves","hip flexors","adductors","abductors","unknown"],c=[...b],d=[...b],e=[...c];function f(a,b,c=2){if(!a)return[];try{let d=JSON.parse(a);return function(a,b,c=2){let d=Array.isArray(a)?a:"string"==typeof a?[a]:[];if(0===d.length)return[];let e=d.map(a=>"string"==typeof a?a.trim().toLowerCase():"").filter(Boolean),f=b?e.filter(a=>b.includes(a)):e,g=[];for(let a of f)if(g.includes(a)||g.push(a),g.length>=c)break;return g}(d,b,c)}catch{return[]}}function g(a){return a.split(" ").map(a=>a?a[0].toUpperCase()+a.slice(1):a).join(" ")}a.s(["MUSCLE_GROUP_ORDER",0,d,"MUSCLE_GROUP_TAGS",0,b,"STRETCH_MUSCLE_ORDER",0,e,"STRETCH_MUSCLE_TAGS",0,c,"formatTypeLabel",()=>g,"parseTagJson",()=>f])},84975,a=>{"use strict";function b(a){if(!a||a<=0)return"Timer not set";let b=Math.floor(a/60),c=a%60;return b>0&&0===c?`${b} min`:b>0?`${b} min ${c} sec`:`${a} sec`}a.s(["formatStretchTimer",()=>b])},93787,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(10585);function e({onSubmit:a,onCancel:e}){let[f,g]=(0,c.useState)(""),[h,i]=(0,c.useState)(""),[j,k]=(0,c.useState)(""),[l,m]=(0,c.useState)(""),[n,o]=(0,c.useState)([]),[p,q]=(0,c.useState)(!1),r=async b=>{if(b.preventDefault(),!f.trim())return;let c=h.trim(),d=c?Number(c):NaN,e=Number.isFinite(d)&&d>0?Math.round(d):void 0,g=n.map(a=>a.trim()).filter(Boolean);q(!0);try{await a({name:f.trim(),timerSeconds:e,videoUrl:j.trim()||void 0,tips:l.trim()||void 0,muscleGroups:g.length?g:void 0})}finally{q(!1)}};return(0,b.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center p-4 z-50",children:(0,b.jsxs)("div",{className:"bg-zinc-800 rounded-lg p-6 max-w-md w-full border-2 border-blue-700",children:[(0,b.jsx)("h2",{className:"text-2xl font-bold text-white mb-4",children:"Create New Stretch"}),(0,b.jsxs)("form",{onSubmit:r,className:"space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)("label",{className:"text-zinc-300 text-sm font-semibold block mb-2",children:["Stretch Name ",(0,b.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,b.jsx)("input",{type:"text",value:f,onChange:a=>g(a.target.value),placeholder:"e.g., Hamstring Stretch",className:"w-full bg-zinc-900 text-white px-4 py-3 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-600",required:!0,autoFocus:!0})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-zinc-300 text-sm font-semibold block mb-2",children:"Timer (seconds)"}),(0,b.jsx)("input",{type:"number",min:"1",step:"1",value:h,onChange:a=>i(a.target.value),placeholder:"e.g., 30",className:"w-full bg-zinc-900 text-white px-4 py-3 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-600"})]}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("label",{className:"text-zinc-300 text-sm font-semibold block mb-2",children:["Muscle Groups ",(0,b.jsx)("span",{className:"text-zinc-500",children:"(up to 2)"})]}),(0,b.jsx)("div",{className:"rounded-lg border border-zinc-700 bg-zinc-900 px-3 py-2",children:0===n.length?(0,b.jsx)("span",{className:"text-zinc-500 text-sm",children:"Select muscle groups below"}):(0,b.jsx)("div",{className:"flex flex-wrap gap-2",children:n.map(a=>(0,b.jsxs)("button",{type:"button",onClick:()=>o(b=>b.filter(b=>b!==a)),className:"inline-flex items-center gap-1 rounded-full border border-blue-600/40 bg-blue-700/30 px-3 py-1 text-xs font-semibold text-blue-100 transition hover:border-blue-400 hover:bg-blue-600/60",children:[(0,d.formatTypeLabel)(a),(0,b.jsx)("span",{"aria-hidden":!0,children:"Ã—"})]},a))})}),(0,b.jsxs)("div",{className:"mt-3",children:[(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsxs)("select",{value:"",onChange:a=>{let b=a.target.value;b&&(o(a=>a.includes(b)||a.length>=2?a:[...a,b]),a.currentTarget.value="")},className:"w-full appearance-none bg-zinc-900 text-white px-4 py-2 pr-10 rounded-lg border border-zinc-700 focus:outline-none focus:ring-2 focus:ring-blue-600",children:[(0,b.jsx)("option",{value:"",disabled:!0,children:"Add a muscle group..."}),d.STRETCH_MUSCLE_TAGS.filter(a=>"unknown"!==a).map(a=>(0,b.jsx)("option",{value:a,children:(0,d.formatTypeLabel)(a)},a))]}),(0,b.jsx)("span",{className:"pointer-events-none absolute right-3 top-1/2 -translate-y-1/2 text-zinc-400",children:"â–¾"})]}),(0,b.jsx)("p",{className:"mt-2 text-xs text-zinc-500",children:"Choose up to two muscle groups."})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-zinc-300 text-sm font-semibold block mb-2",children:"Video URL"}),(0,b.jsx)("input",{type:"url",value:j,onChange:a=>k(a.target.value),placeholder:"https://youtube.com/...",className:"w-full bg-zinc-900 text-white px-4 py-3 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-600"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-zinc-300 text-sm font-semibold block mb-2",children:"Tips"}),(0,b.jsx)("textarea",{value:l,onChange:a=>m(a.target.value),placeholder:"Form tips, cues, etc.",rows:3,className:"w-full bg-zinc-900 text-white px-4 py-3 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-600 resize-none"})]}),(0,b.jsx)("p",{className:"text-xs text-zinc-400",children:"Duration, video URL, tips, and muscle groups will be auto-filled with AI if empty."}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-3 pt-2",children:[(0,b.jsx)("button",{type:"button",onClick:e,className:"bg-zinc-700 hover:bg-zinc-600 text-white py-3 rounded-lg font-semibold transition-colors",children:"Cancel"}),(0,b.jsx)("button",{type:"submit",disabled:!f.trim()||p,className:"bg-blue-700 hover:bg-blue-800 disabled:bg-blue-900 disabled:cursor-not-allowed text-white py-3 rounded-lg font-bold transition-colors",children:p?"Creating...":"Create & Select"})]})]})]})})}var f=a.i(84975);let g="other";function h(a){return(0,d.parseTagJson)(a.muscle_groups,d.STRETCH_MUSCLE_TAGS)}function i({onSelect:a,onCancel:i,filterType:j,title:k}){let[l,m]=(0,c.useState)([]),[n,o]=(0,c.useState)(""),[p,q]=(0,c.useState)(!0),[r,s]=(0,c.useState)(!1);(0,c.useEffect)(()=>{t()},[]);let t=async()=>{try{let a=await fetch("/api/stretches"),b=await a.json();m(b.stretches)}catch(a){console.error("Error fetching stretches:",a)}finally{q(!1)}},u=async b=>{try{let c=await fetch("/api/stretches",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(b)});if(!c.ok)throw Error("Failed to create stretch");let d=await c.json();await t();let e=b.muscleGroups?.length?JSON.stringify(b.muscleGroups):null,f={id:d.id,name:b.name,timer_seconds:"number"==typeof d.timer_seconds?d.timer_seconds:null,muscle_groups:e,video_url:b.videoUrl||null,tips:"string"==typeof d.tips?d.tips:b.tips||null};s(!1),a(f)}catch(a){console.error("Error creating stretch:",a),alert("Failed to create stretch. Please try again.")}},v=function(a){let b=new Map;for(let c of[...a].sort((a,b)=>a.name.localeCompare(b.name))){let a=h(c);for(let d of a.length>0?a:[g]){let a=b.get(d);a?a.push(c):b.set(d,[c])}}let c=[...d.STRETCH_MUSCLE_ORDER,g];return Array.from(b.keys()).sort((a,b)=>{let d=c.indexOf(a),e=c.indexOf(b);return -1===d&&-1===e?a.localeCompare(b):-1===d?1:-1===e?-1:d-e}).map(a=>({type:a,stretches:b.get(a)||[]}))}(l.filter(a=>{if(!n)return!0;let b=n.toLowerCase(),c=a.name.toLowerCase(),d=h(a).join(" ").toLowerCase();return c.includes(b)||d.includes(b)}));return r?(0,b.jsx)(e,{onSubmit:u,onCancel:()=>s(!1)}):(0,b.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center p-4 z-50",children:(0,b.jsxs)("div",{className:"bg-zinc-800 rounded-lg p-6 max-w-3xl w-full max-h-[90vh] flex flex-col border-2 border-blue-800",children:[(0,b.jsx)("h2",{className:"text-2xl font-bold text-white mb-4",children:k||("pre_workout"===j?"Select Pre-Workout Stretch":"post_workout"===j?"Select Post-Workout Stretch":"Select Stretch")}),(0,b.jsxs)("div",{className:"mb-4 space-y-3",children:[(0,b.jsx)("input",{type:"text",value:n,onChange:a=>o(a.target.value),placeholder:"Search by name or muscle group...",className:"w-full bg-zinc-900 text-white px-4 py-3 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-700",autoFocus:!0}),(0,b.jsx)("button",{onClick:()=>s(!0),className:"w-full bg-blue-700 hover:bg-blue-800 text-white py-3 rounded-lg font-bold transition-colors",children:"+ Create New Stretch"})]}),(0,b.jsx)("div",{className:"flex-1 overflow-y-auto mb-4 space-y-2",children:p?(0,b.jsx)("div",{className:"text-center text-zinc-400 py-8",children:"Loading stretches..."}):0===v.length?(0,b.jsx)("div",{className:"text-center text-zinc-400 py-8",children:n?"No stretches found":"No stretches available"}):(0,b.jsx)("div",{className:"space-y-4",children:v.map(({type:c,stretches:e})=>(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("div",{className:"text-xs uppercase tracking-wide text-zinc-400",children:(0,d.formatTypeLabel)(c)}),e.map(c=>{let d=h(c);return(0,b.jsx)("button",{onClick:()=>a(c),className:"w-full bg-zinc-900 hover:bg-zinc-700 text-left p-4 rounded-lg transition-colors border-2 border-zinc-700 hover:border-blue-600",children:(0,b.jsx)("div",{className:"flex items-start justify-between",children:(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("div",{className:"text-white font-semibold",children:c.name}),(0,b.jsx)("div",{className:"text-zinc-400 text-sm mt-1",children:(0,f.formatStretchTimer)(c.timer_seconds)}),d.length>0&&(0,b.jsx)("div",{className:"flex flex-wrap gap-1 mt-2",children:d.map((a,c)=>(0,b.jsx)("span",{className:"text-xs bg-zinc-700 text-zinc-300 px-2 py-1 rounded",children:a},c))})]})})},c.id)})]},c))})}),(0,b.jsx)("button",{onClick:i,className:"w-full bg-zinc-700 hover:bg-zinc-600 text-white py-3 rounded-lg font-semibold transition-colors",children:"Cancel"})]})})}a.s(["default",()=>i],93787)},42027,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(84975);function e({onClick:a,label:c,color:d}){return(0,b.jsxs)("button",{onClick:a,className:`w-full py-2 text-sm rounded ${{green:"bg-green-900/50 hover:bg-green-800/50",blue:"bg-blue-900/50 hover:bg-blue-800/50",orange:"bg-orange-900/50 hover:bg-orange-800/50"}[d]} text-white transition-colors mb-2`,children:["+ ",c]})}function f({onAddExercise:a,onAddSuperset:c}){return(0,b.jsxs)("div",{className:"flex gap-2 mb-2",children:[(0,b.jsx)("button",{onClick:a,className:"flex-1 py-2 text-sm rounded bg-orange-900/60 text-white hover:bg-orange-800/60 transition-colors",children:"+ Exercise"}),(0,b.jsx)("button",{onClick:c,className:"flex-1 py-2 text-sm rounded bg-purple-900/60 text-white hover:bg-purple-800/60 transition-colors",children:"+ Superset"})]})}function g({stretch:a,onDelete:c}){return(0,b.jsxs)("div",{className:"bg-zinc-800 rounded-lg p-4 border-2 border-zinc-700 mb-2 flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-white font-semibold",children:a.name}),(0,b.jsx)("div",{className:"text-zinc-400 text-sm",children:(0,d.formatStretchTimer)(a.timerSeconds)})]}),(0,b.jsx)("button",{onClick:c,className:"text-red-500 hover:text-red-400 p-2",title:"Delete",children:(0,b.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})}function h({exercise:a,onDelete:c}){let d=!!a.exercise_id2;return(0,b.jsx)("div",{className:`bg-zinc-800 rounded-lg p-4 border-2 ${d?"border-purple-700":"border-zinc-700"} mb-2`,children:(0,b.jsxs)("div",{className:"flex items-start justify-between",children:[(0,b.jsxs)("div",{className:"flex-1",children:[d&&(0,b.jsx)("div",{className:"text-purple-400 text-xs font-bold mb-2",children:"SUPERSET"}),(0,b.jsx)("div",{className:"text-white font-semibold",children:a.exercise_name}),d&&a.exercise2_name&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{className:"text-purple-400 text-sm my-1",children:"+"}),(0,b.jsx)("div",{className:"text-white font-semibold",children:a.exercise2_name})]})]}),(0,b.jsx)("button",{onClick:c,className:"text-red-500 hover:text-red-400 p-2",title:"Delete",children:(0,b.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})})}function i({cardio:a,onDelete:c}){return(0,b.jsx)("div",{className:"bg-zinc-800 rounded-lg p-4 border-2 border-red-900 mb-2",children:(0,b.jsxs)("div",{className:"flex items-start justify-between",children:[(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("div",{className:"text-white font-semibold text-lg",children:a.type}),a.duration&&(0,b.jsx)("div",{className:"text-zinc-400 text-sm",children:a.duration}),a.intensity&&(0,b.jsx)("div",{className:"text-zinc-500 text-sm",children:a.intensity}),a.tips&&(0,b.jsx)("div",{className:"text-zinc-500 text-xs mt-1",children:a.tips})]}),c&&(0,b.jsx)("button",{onClick:c,className:"text-red-500 hover:text-red-400 p-2",title:"Delete",children:(0,b.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})})}function j({onSave:a,onCancel:d}){let[e,f]=(0,c.useState)(""),[g,h]=(0,c.useState)(""),[i,j]=(0,c.useState)(""),[k,l]=(0,c.useState)("");return(0,b.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center p-4 z-50",children:(0,b.jsxs)("div",{className:"bg-zinc-800 rounded-lg p-6 max-w-md w-full border-2 border-red-600",children:[(0,b.jsx)("h2",{className:"text-2xl font-bold text-white mb-4",children:"Add Cardio"}),(0,b.jsxs)("div",{className:"space-y-4 mb-6",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-zinc-400 text-sm block mb-1",children:"Type *"}),(0,b.jsx)("input",{type:"text",value:e,onChange:a=>f(a.target.value),placeholder:"e.g., Incline Walk, Bike, Stairmaster",className:"w-full bg-zinc-900 text-white px-3 py-2 rounded focus:outline-none focus:ring-2 focus:ring-red-500",autoFocus:!0})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-zinc-400 text-sm block mb-1",children:"Duration *"}),(0,b.jsx)("input",{type:"text",value:g,onChange:a=>h(a.target.value),placeholder:"e.g., 15 min, 20 min",className:"w-full bg-zinc-900 text-white px-3 py-2 rounded focus:outline-none focus:ring-2 focus:ring-red-500"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-zinc-400 text-sm block mb-1",children:"Intensity"}),(0,b.jsx)("input",{type:"text",value:i,onChange:a=>j(a.target.value),placeholder:"e.g., 12% incline, 3.0 mph",className:"w-full bg-zinc-900 text-white px-3 py-2 rounded focus:outline-none focus:ring-2 focus:ring-red-500"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-zinc-400 text-sm block mb-1",children:"Tips"}),(0,b.jsx)("textarea",{value:k,onChange:a=>l(a.target.value),placeholder:"Optional tips...",rows:2,className:"w-full bg-zinc-900 text-white px-3 py-2 rounded focus:outline-none focus:ring-2 focus:ring-red-500 resize-none"})]})]}),(0,b.jsxs)("div",{className:"flex gap-3",children:[(0,b.jsx)("button",{onClick:d,className:"flex-1 bg-zinc-700 hover:bg-zinc-600 text-white py-3 rounded-lg font-semibold transition-colors",children:"Cancel"}),(0,b.jsx)("button",{onClick:()=>{e.trim()&&g.trim()&&a({type:e.trim(),duration:g.trim(),intensity:i.trim(),tips:k.trim()})},disabled:!e.trim()||!g.trim(),className:"flex-1 bg-red-600 hover:bg-red-700 disabled:bg-red-900 disabled:cursor-not-allowed text-white py-3 rounded-lg font-bold transition-colors",children:"Add Cardio"})]})]})})}a.s(["AddButton",()=>e,"CardioForm",()=>j,"CardioItem",()=>i,"ExerciseAddRow",()=>f,"ExerciseItem",()=>h,"StretchItem",()=>g])},25202,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944),e=a.i(67169),f=a.i(78035),g=a.i(93787),h=a.i(42027),i=a.i(4655),j=a.i(87674);function k(){let a=(0,d.useParams)(),k=(0,d.useRouter)(),l=a.id,[m,n]=(0,c.useState)(""),[o,p]=(0,c.useState)(""),[q,r]=(0,c.useState)(!1),[s,t]=(0,c.useState)(null),[u,v]=(0,c.useState)([]),[w,x]=(0,c.useState)([]),[y,z]=(0,c.useState)([]),[A,B]=(0,c.useState)(null),[C,D]=(0,c.useState)(!0),[E,F]=(0,c.useState)(!0),[G,H]=(0,c.useState)(!1),[I,J]=(0,c.useState)(!1),[K,L]=(0,c.useState)(!1),[M,N]=(0,c.useState)(!1),[O,P]=(0,c.useState)(!1),[Q,R]=(0,c.useState)(null),[S,T]=(0,c.useState)(null),[U,V]=(0,c.useState)(null),W=a=>{(0,j.invalidateWorkoutBootstrapCache)({routineId:l,routineName:a??m})};(0,c.useEffect)(()=>{X()},[l]);let X=async()=>{try{let a=await fetch(`/api/routines/${l}`),b=await a.json();n(b.routine.name),p(b.routine.name),x(b.exercises),F(1===b.routine.is_public);let c=await fetch(`/api/workout/${encodeURIComponent(b.routine.name)}`),d=await c.json(),e=await fetch("/api/stretches"),f=await e.json(),g=d.workout.preWorkoutStretches.map((a,b)=>{let c=f.stretches.find(b=>b.name===a.name);return{id:b,stretch_id:c?.id||0,name:a.name,timerSeconds:a.timerSeconds??0,muscle_groups:c?.muscle_groups||null}}),h=d.workout.postWorkoutStretches.map((a,b)=>{let c=f.stretches.find(b=>b.name===a.name);return{id:b,stretch_id:c?.id||0,name:a.name,timerSeconds:a.timerSeconds??0,muscle_groups:c?.muscle_groups||null}});v(g),z(h),d.workout.cardio&&B(d.workout.cardio)}catch(a){console.error("Error loading routine:",a)}finally{D(!1)}},Y=async a=>{let b=u[a];try{await fetch(`/api/routines/${l}/stretches?stretchId=${b.stretch_id}&type=pre`,{method:"DELETE"});let c=u.filter((b,c)=>c!==a);v(c);let d=c.map(a=>a.stretch_id);await fetch(`/api/routines/${l}/stretches`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:"pre",order:d})}),W()}catch(a){console.error("Error deleting stretch:",a)}},Z=async a=>{let b=y[a];try{await fetch(`/api/routines/${l}/stretches?stretchId=${b.stretch_id}&type=post`,{method:"DELETE"});let c=y.filter((b,c)=>c!==a);z(c);let d=c.map(a=>a.stretch_id);await fetch(`/api/routines/${l}/stretches`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:"post",order:d})}),W()}catch(a){console.error("Error deleting stretch:",a)}},$=async a=>{let b=w[a];try{await fetch(`/api/routines/${l}/exercises?exerciseConfigId=${b.id}`,{method:"DELETE"});let c=w.filter((b,c)=>c!==a);x(c);let d=c.map(a=>a.id);await fetch(`/api/routines/${l}/exercises`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({order:d})}),W()}catch(a){console.error("Error deleting exercise:",a)}},_=async()=>{try{await fetch(`/api/routines/${l}/cardio`,{method:"DELETE"}),B(null),W()}catch(a){console.error("Error deleting cardio:",a)}},aa=a=>{T(a),L(!0)},ab=a=>{V(a),N(!0)},ac=a=>{R(a),H(!0)},ad=a=>{R(a),J(!0)},ae=async a=>{L(!1);let b=S??u.length,c=u.map(a=>a.stretch_id);c.splice(b,0,a.id),await fetch(`/api/routines/${l}/stretches`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:"pre",order:c})});let d={id:Date.now(),stretch_id:a.id,name:a.name,timerSeconds:a.timer_seconds??0,muscle_groups:a.muscle_groups},e=[...u];e.splice(b,0,d),v(e),T(null),W()},af=async a=>{N(!1);let b=U??y.length,c=y.map(a=>a.stretch_id);c.splice(b,0,a.id),await fetch(`/api/routines/${l}/stretches`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:"post",order:c})});let d={id:Date.now(),stretch_id:a.id,name:a.name,timerSeconds:a.timer_seconds??0,muscle_groups:a.muscle_groups},e=[...y];e.splice(b,0,d),z(e),V(null),W()},ag=async a=>{H(!1);let b=Q??w.length;try{let c=await fetch(`/api/routines/${l}/exercises`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({exerciseId1:a.id})}),d={id:(await c.json()).id,exercise_id1:a.id,exercise_name:a.name,exercise_id2:null,exercise2_name:null},e=[...w];e.splice(b,0,d),x(e);let f=e.map(a=>a.id);await fetch(`/api/routines/${l}/exercises`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({order:f})}),W()}catch(a){console.error("Error adding exercise:",a)}R(null)},ah=async(a,b)=>{J(!1);let c=Q??w.length;try{let d=await fetch(`/api/routines/${l}/exercises`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({exerciseId1:a.id,exerciseId2:b.id})}),e={id:(await d.json()).id,exercise_id1:a.id,exercise_name:a.name,exercise_id2:b.id,exercise2_name:b.name},f=[...w];f.splice(c,0,e),x(f);let g=f.map(a=>a.id);await fetch(`/api/routines/${l}/exercises`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({order:g})}),W()}catch(a){console.error("Error adding superset:",a)}R(null)},ai=async a=>{try{await fetch(`/api/routines/${l}/cardio`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}),B(a),P(!1),W()}catch(a){console.error("Error saving cardio:",a)}},aj=async a=>{try{await fetch(`/api/routines/${l}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({isPublic:a})}),F(a)}catch(a){console.error("Error updating privacy:",a)}},ak=async()=>{let a=o.trim();if(a&&a!==m){r(!0),t(null);try{let b=await fetch(`/api/routines/${l}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:a})});if(!b.ok){let a=await b.json().catch(()=>({}));throw Error(a.error||"Failed to update routine name")}W(m),W(a),n(a),p(a)}catch(a){console.error("Error updating routine name:",a),t(a instanceof Error?a.message:"Failed to update routine name")}finally{r(!1)}}};return C?(0,b.jsx)("div",{className:"min-h-screen bg-zinc-900 flex items-center justify-center",children:(0,b.jsx)("div",{className:"text-white text-xl",children:"Loading routine..."})}):(0,b.jsxs)("div",{className:"min-h-screen bg-zinc-900 p-4 pb-24",children:[(0,b.jsxs)("div",{className:"max-w-2xl mx-auto",children:[(0,b.jsxs)("div",{className:"mb-6",children:[(0,b.jsx)("button",{onClick:()=>k.back(),className:"text-blue-400 hover:text-blue-300 mb-4 block",children:"â† Back"}),(0,b.jsxs)("h1",{className:"text-3xl font-bold text-white",children:["Edit: ",m]})]}),(0,b.jsxs)(i.Card,{paddingClassName:"p-4 mb-6",children:[(0,b.jsx)("label",{className:"block text-zinc-400 text-sm mb-2",children:"Routine name"}),(0,b.jsxs)("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center",children:[(0,b.jsx)("input",{type:"text",value:o,onChange:a=>p(a.target.value),onKeyDown:a=>{"Enter"===a.key&&ak()},className:"flex-1 bg-zinc-800 text-white px-3 py-2 rounded border border-zinc-600 focus:outline-none focus:border-green-500",placeholder:"Routine name"}),(0,b.jsx)("button",{onClick:ak,disabled:q||o.trim()===m||!o.trim(),className:"px-4 py-2 rounded-lg font-semibold bg-green-600 hover:bg-green-700 text-white disabled:opacity-50 disabled:cursor-not-allowed",children:q?"Saving...":"Save Name"})]}),s&&(0,b.jsx)("div",{className:"text-red-400 text-sm mt-2",children:s})]}),(0,b.jsxs)("section",{className:"mb-8",children:[(0,b.jsx)(i.SectionHeader,{icon:"ðŸŸ¢",iconClassName:"text-green-500",label:"Pre-Workout Stretches"}),(0,b.jsx)(h.AddButton,{onClick:()=>aa(0),label:"Add Pre-Stretch",color:"green"}),u.map((a,c)=>(0,b.jsxs)("div",{children:[(0,b.jsx)(h.StretchItem,{stretch:a,onDelete:()=>Y(c)}),(0,b.jsx)(h.AddButton,{onClick:()=>aa(c+1),label:"Add Pre-Stretch",color:"green"})]},`pre-${c}`)),0===u.length&&(0,b.jsx)(i.EmptyState,{message:"No pre-workout stretches",className:"mb-2"})]}),(0,b.jsxs)("section",{className:"mb-8",children:[(0,b.jsx)(i.SectionHeader,{icon:"ðŸ”¥",iconClassName:"text-orange-500",label:"Exercises"}),(0,b.jsx)(h.ExerciseAddRow,{onAddExercise:()=>ac(0),onAddSuperset:()=>ad(0)}),w.map((a,c)=>(0,b.jsxs)("div",{children:[(0,b.jsx)(h.ExerciseItem,{exercise:a,onDelete:()=>$(c)}),(0,b.jsx)(h.ExerciseAddRow,{onAddExercise:()=>ac(c+1),onAddSuperset:()=>ad(c+1)})]},`ex-${c}`)),0===w.length&&(0,b.jsx)(i.EmptyState,{message:"No exercises",className:"mb-2"})]}),(0,b.jsxs)("section",{className:"mb-8",children:[(0,b.jsx)(i.SectionHeader,{icon:"â¤ï¸",iconClassName:"text-red-500",label:"Cardio (Optional)"}),A?(0,b.jsx)(h.CardioItem,{cardio:A,onDelete:_}):(0,b.jsx)("button",{onClick:()=>P(!0),className:"w-full py-3 text-sm rounded bg-red-900/50 text-white hover:bg-red-800/50 transition-colors",children:"+ Add Cardio"})]}),(0,b.jsxs)("section",{className:"mb-8",children:[(0,b.jsx)(i.SectionHeader,{icon:"ðŸ”µ",iconClassName:"text-blue-500",label:"Post-Workout Stretches"}),(0,b.jsx)(h.AddButton,{onClick:()=>ab(0),label:"Add Post-Stretch",color:"blue"}),y.map((a,c)=>(0,b.jsxs)("div",{children:[(0,b.jsx)(h.StretchItem,{stretch:a,onDelete:()=>Z(c)}),(0,b.jsx)(h.AddButton,{onClick:()=>ab(c+1),label:"Add Post-Stretch",color:"blue"})]},`post-${c}`)),0===y.length&&(0,b.jsx)(i.EmptyState,{message:"No post-workout stretches",className:"mb-2"})]}),(0,b.jsx)("section",{className:"mb-8",children:(0,b.jsx)(i.Card,{paddingClassName:"p-4",children:(0,b.jsxs)("label",{className:"flex items-center gap-3 cursor-pointer",children:[(0,b.jsx)("input",{type:"checkbox",checked:!E,onChange:a=>aj(!a.target.checked),className:"w-5 h-5 rounded border-zinc-600 bg-zinc-900 text-green-600 focus:ring-green-500 focus:ring-offset-zinc-800 cursor-pointer"}),(0,b.jsxs)("span",{className:"text-zinc-300",children:["Make this routine private",(0,b.jsx)("span",{className:"block text-zinc-500 text-xs",children:"Private routines won't appear in the public browse page"})]})]})})}),(0,b.jsx)(i.BottomActionBar,{maxWidthClassName:"max-w-2xl",children:(0,b.jsx)("button",{onClick:()=>k.push(`/workout/${encodeURIComponent(m)}`),className:"w-full bg-green-600 hover:bg-green-700 text-white py-4 rounded-lg text-xl font-bold transition-colors",children:"Done Editing"})})]}),K&&(0,b.jsx)(g.default,{onSelect:ae,onCancel:()=>{L(!1),T(null)},filterType:"pre_workout"}),M&&(0,b.jsx)(g.default,{onSelect:af,onCancel:()=>{N(!1),V(null)},filterType:"post_workout"}),G&&(0,b.jsx)(e.default,{onSelect:ag,onCancel:()=>{H(!1),R(null)}}),I&&(0,b.jsx)(f.default,{onSelect:ah,onCancel:()=>{J(!1),R(null)}}),O&&(0,b.jsx)(h.CardioForm,{onSave:ai,onCancel:()=>P(!1)})]})}a.s(["default",()=>k])}];

//# sourceMappingURL=%5Broot-of-the-server%5D__bc108a70._.js.map