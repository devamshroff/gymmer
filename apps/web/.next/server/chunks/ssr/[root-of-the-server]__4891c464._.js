module.exports=[56704,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-async-storage.external.js",()=>require("next/dist/server/app-render/work-async-storage.external.js"))},32319,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-unit-async-storage.external.js",()=>require("next/dist/server/app-render/work-unit-async-storage.external.js"))},20635,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/action-async-storage.external.js",()=>require("next/dist/server/app-render/action-async-storage.external.js"))},36313,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.HooksClientContext},18341,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.ServerInsertedHtml},10585,a=>{"use strict";let b=["lower body compound","upper body compound","full body compound","chest","back","shoulders","biceps","triceps","forearms","core","lower back","glutes","quads","hamstrings","calves","hip flexors","adductors","abductors","unknown"],c=[...b],d=[...b],e=[...c];function f(a,b,c=2){if(!a)return[];try{let d=JSON.parse(a);return function(a,b,c=2){let d=Array.isArray(a)?a:"string"==typeof a?[a]:[];if(0===d.length)return[];let e=d.map(a=>"string"==typeof a?a.trim().toLowerCase():"").filter(Boolean),f=b?e.filter(a=>b.includes(a)):e,g=[];for(let a of f)if(g.includes(a)||g.push(a),g.length>=c)break;return g}(d,b,c)}catch{return[]}}function g(a){return a.split(" ").map(a=>a?a[0].toUpperCase()+a.slice(1):a).join(" ")}a.s(["MUSCLE_GROUP_ORDER",0,d,"MUSCLE_GROUP_TAGS",0,b,"STRETCH_MUSCLE_ORDER",0,e,"STRETCH_MUSCLE_TAGS",0,c,"formatTypeLabel",()=>g,"parseTagJson",()=>f])},84975,a=>{"use strict";function b(a){if(!a||a<=0)return"Timer not set";let b=Math.floor(a/60),c=a%60;return b>0&&0===c?`${b} min`:b>0?`${b} min ${c} sec`:`${a} sec`}a.s(["formatStretchTimer",()=>b])},67827,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944),e=a.i(10585),f=a.i(84975);function g(){let a,g,h=(0,d.useRouter)(),i=(0,d.useParams)().id,[j,k]=(0,c.useState)([]),[l,m]=(0,c.useState)([]),[n,o]=(0,c.useState)([]),[p,q]=(0,c.useState)("pre"),[r,s]=(0,c.useState)(!0),[t,u]=(0,c.useState)(""),[v,w]=(0,c.useState)(!1),[x,y]=(0,c.useState)([]),[z,A]=(0,c.useState)([]),[B,C]=(0,c.useState)(!1),[D,E]=(0,c.useState)(null);(0,c.useEffect)(()=>{F()},[]);let F=async()=>{try{let a=await fetch("/api/stretches"),b=await a.json();k(b.stretches),G(b.stretches)}catch(a){console.error("Error fetching stretches:",a)}finally{s(!1)}},G=async a=>{C(!0),E(null);try{let b=await fetch(`/api/routines/${i}/stretch-recommendations`,{method:"POST"});if(!b.ok){let a=await b.json().catch(()=>({}));throw Error(a.error||"Failed to generate recommendations")}let c=await b.json(),d=c.createdStretches||[];if(d.length>0){let b=new Set(a.map(a=>a.id)),c=d.filter(a=>!b.has(a.id));c.length>0&&k([...a,...c])}y(c.recommendedPreIds||[]),A(c.recommendedPostIds||[])}catch(a){console.error("Error fetching recommendations:",a),E(a.message||"Failed to load recommendations")}finally{C(!1)}},H=j.filter(a=>{if(!t)return!0;let b=t.toLowerCase(),c=a.name.toLowerCase(),d=L(a).join(" ").toLowerCase();return c.includes(b)||d.includes(b)}),I=new Set("pre"===p?x:z),J=[...H.filter(a=>I.has(a.id)),...H.filter(a=>!I.has(a.id))],K=async()=>{w(!0);try{for(let a=0;a<l.length;a++)await fetch(`/api/routines/${i}/stretches`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({stretchId:l[a],type:"pre",orderIndex:a})});for(let a=0;a<n.length;a++)await fetch(`/api/routines/${i}/stretches`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({stretchId:n[a],type:"post",orderIndex:a})});h.push("/routines")}catch(a){console.error("Error saving stretches:",a),alert("Failed to save stretches. Please try again.")}finally{w(!1)}};function L(a){return(0,e.parseTagJson)(a.muscle_groups,e.STRETCH_MUSCLE_TAGS)}let M=(a="pre"===p?l:n,g=new Set,a.forEach(a=>{let b=j.find(b=>b.id===a);b&&L(b).forEach(a=>g.add(a))}),Array.from(g).sort());return r?(0,b.jsx)("div",{className:"min-h-screen bg-zinc-900 flex items-center justify-center",children:(0,b.jsx)("div",{className:"text-white text-xl",children:"Loading stretches..."})}):(0,b.jsx)("div",{className:"min-h-screen bg-zinc-900 p-4",children:(0,b.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,b.jsx)("h1",{className:"text-3xl font-bold text-white mb-2",children:"Select Stretches"}),(0,b.jsx)("p",{className:"text-zinc-400 mb-6",children:"Choose stretches for your routine. You can select multiple."}),(0,b.jsxs)("div",{className:"flex gap-2 mb-6",children:[(0,b.jsxs)("button",{onClick:()=>q("pre"),className:`flex-1 py-3 rounded-lg font-bold transition-colors ${"pre"===p?"bg-blue-600 text-white":"bg-zinc-800 text-zinc-400 hover:bg-zinc-700"}`,children:["Pre-Workout (",l.length,")"]}),(0,b.jsxs)("button",{onClick:()=>q("post"),className:`flex-1 py-3 rounded-lg font-bold transition-colors ${"post"===p?"bg-purple-600 text-white":"bg-zinc-800 text-zinc-400 hover:bg-zinc-700"}`,children:["Post-Workout (",n.length,")"]})]}),(0,b.jsxs)("div",{className:`rounded-lg p-4 mb-6 border-2 ${"pre"===p?"bg-blue-900/20 border-blue-700":"bg-purple-900/20 border-purple-700"}`,children:[(0,b.jsxs)("div",{className:"text-sm font-semibold text-zinc-300 mb-2",children:["Muscle Groups Covered (",M.length,")"]}),0===M.length?(0,b.jsx)("div",{className:"text-zinc-500 text-sm",children:"Select stretches to see muscle coverage"}):(0,b.jsx)("div",{className:"flex flex-wrap gap-2",children:M.map((a,c)=>(0,b.jsx)("span",{className:`text-sm px-3 py-1 rounded-full ${"pre"===p?"bg-blue-600 text-white":"bg-purple-600 text-white"}`,children:a},c))})]}),(0,b.jsx)("input",{type:"text",value:t,onChange:a=>u(a.target.value),placeholder:"Search by name or muscle group...",className:"w-full bg-zinc-800 text-white px-4 py-3 rounded-lg mb-6 focus:outline-none focus:ring-2 focus:ring-blue-500"}),(B||D)&&(0,b.jsxs)("div",{className:"mb-6",children:[B&&(0,b.jsx)("div",{className:"text-sm text-zinc-400",children:"Finding recommended stretches for this workout..."}),D&&(0,b.jsx)("div",{className:"text-sm text-red-300",children:D})]}),(0,b.jsx)("div",{className:"space-y-3 mb-6",children:0===J.length?(0,b.jsx)("div",{className:"text-center text-zinc-400 py-8",children:"No stretches found"}):J.map(a=>{let c,d=L(a),e=(c=a.id,"pre"===p?l.includes(c):n.includes(c)),g=I.has(a.id);return(0,b.jsx)("button",{onClick:()=>{var b;return b=a.id,void("pre"===p?l.includes(b)?m(l.filter(a=>a!==b)):m([...l,b]):n.includes(b)?o(n.filter(a=>a!==b)):o([...n,b]))},className:`w-full text-left p-4 rounded-lg transition-all border-2 ${e?"pre"===p?"bg-blue-900/30 border-blue-500":"bg-purple-900/30 border-purple-500":"bg-zinc-800 border-zinc-700 hover:border-zinc-600"}`,children:(0,b.jsx)("div",{className:"flex items-start justify-between",children:(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,b.jsx)("h3",{className:"text-white font-semibold",children:a.name}),g&&(0,b.jsx)("span",{className:"text-xs text-emerald-200 bg-emerald-900/60 px-2 py-1 rounded",children:"* recommended for this workout"}),e&&(0,b.jsx)("span",{className:`text-xs px-2 py-1 rounded ${"pre"===p?"bg-blue-600":"bg-purple-600"} text-white`,children:"âœ“ Selected"})]}),(0,b.jsx)("div",{className:"text-zinc-400 text-sm mb-2",children:(0,f.formatStretchTimer)(a.timer_seconds)}),d.length>0&&(0,b.jsx)("div",{className:"flex flex-wrap gap-2",children:d.map((a,c)=>(0,b.jsx)("span",{className:"text-xs bg-zinc-700 text-zinc-300 px-2 py-1 rounded",children:a},c))})]})})},a.id)})}),(0,b.jsxs)("div",{className:"sticky bottom-4 bg-zinc-900 pt-4 space-y-3",children:[(0,b.jsx)("button",{onClick:K,disabled:v,className:"w-full bg-green-600 hover:bg-green-700 disabled:bg-green-800 disabled:cursor-not-allowed text-white py-4 rounded-lg text-lg font-bold transition-colors",children:v?"Saving...":"Save & Finish Routine"}),(0,b.jsx)("button",{onClick:()=>h.push(`/routines/builder?id=${i}`),className:"w-full bg-zinc-700 hover:bg-zinc-600 text-white py-3 rounded-lg font-semibold transition-colors",children:"Back to Exercises"})]})]})})}a.s(["default",()=>g])}];

//# sourceMappingURL=%5Broot-of-the-server%5D__4891c464._.js.map