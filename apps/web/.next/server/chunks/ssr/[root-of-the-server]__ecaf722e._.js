module.exports=[56704,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-async-storage.external.js",()=>require("next/dist/server/app-render/work-async-storage.external.js"))},32319,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-unit-async-storage.external.js",()=>require("next/dist/server/app-render/work-unit-async-storage.external.js"))},20635,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/action-async-storage.external.js",()=>require("next/dist/server/app-render/action-async-storage.external.js"))},36313,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.HooksClientContext},18341,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.ServerInsertedHtml},10585,a=>{"use strict";let b=["lower body compound","upper body compound","full body compound","chest","back","shoulders","biceps","triceps","forearms","core","lower back","glutes","quads","hamstrings","calves","hip flexors","adductors","abductors","unknown"],c=[...b],d=[...b],e=[...c];function f(a,b,c=2){if(!a)return[];try{let d=JSON.parse(a);return function(a,b,c=2){let d=Array.isArray(a)?a:"string"==typeof a?[a]:[];if(0===d.length)return[];let e=d.map(a=>"string"==typeof a?a.trim().toLowerCase():"").filter(Boolean),f=b?e.filter(a=>b.includes(a)):e,g=[];for(let a of f)if(g.includes(a)||g.push(a),g.length>=c)break;return g}(d,b,c)}catch{return[]}}function g(a){return a.split(" ").map(a=>a?a[0].toUpperCase()+a.slice(1):a).join(" ")}a.s(["MUSCLE_GROUP_ORDER",0,d,"MUSCLE_GROUP_TAGS",0,b,"STRETCH_MUSCLE_ORDER",0,e,"STRETCH_MUSCLE_TAGS",0,c,"formatTypeLabel",()=>g,"parseTagJson",()=>f])},64600,a=>{"use strict";let b={progress:"progress",maintenance:"maintenance",light:"light"},c={[b.progress]:"Progress",[b.maintenance]:"Maintenance",[b.light]:"Light"},d={[b.progress]:"Push for small, steady improvements.",[b.maintenance]:"Hold steady and focus on form.",[b.light]:"Easy effort today."};a.s(["EXERCISE_HISTORY_AGGREGATION_MODES",0,{max:"max",avg:"avg"},"EXERCISE_HISTORY_DISPLAY_MODES",0,{weight:"weight",reps:"reps"},"EXERCISE_PRIMARY_METRICS",0,{weight:"weight",height:"height",time:"time",distance:"distance",repsOnly:"reps_only"},"EXERCISE_TYPES",0,{single:"single",b2b:"b2b",circuit:"circuit"},"SESSION_MODES",0,b,"SESSION_MODE_DESCRIPTIONS",0,d,"SESSION_MODE_LABELS",0,c])},4655,a=>{"use strict";var b=a.i(87924);function c({children:a,className:c="",paddingClassName:d,borderClassName:e="border-zinc-700",borderWidthClassName:f="border-2"}){return(0,b.jsx)("div",{className:`bg-zinc-800 rounded-lg ${f} ${e} ${d||"p-4"} ${c}`.trim(),children:a})}function d({message:a,description:c,className:d=""}){return(0,b.jsxs)("div",{className:`text-zinc-500 text-center py-4 bg-zinc-800 rounded-lg ${d}`.trim(),children:[(0,b.jsx)("div",{children:a}),c&&(0,b.jsx)("div",{className:"text-zinc-600 text-sm mt-1",children:c})]})}function e({children:a,maxWidthClassName:c="max-w-2xl",className:d=""}){return(0,b.jsx)("div",{className:`fixed bottom-0 left-0 right-0 p-4 bg-zinc-900 border-t border-zinc-800 ${d}`.trim(),children:(0,b.jsx)("div",{className:`${c} mx-auto`,children:a})})}function f({icon:a,label:c,iconClassName:d="text-zinc-400",className:e=""}){return(0,b.jsxs)("h2",{className:`text-xl font-bold text-white mb-4 flex items-center gap-2 ${e}`.trim(),children:[(0,b.jsx)("span",{className:d,children:a}),c]})}a.s(["BottomActionBar",()=>e,"Card",()=>c,"EmptyState",()=>d,"SectionHeader",()=>f])},12170,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944),e=a.i(67169),f=a.i(78035),g=a.i(4655),h=a.i(64600);function i(){let a=(0,d.useRouter)(),i=(0,d.useSearchParams)().get("id"),[j,k]=(0,c.useState)(""),[l,m]=(0,c.useState)(null),[n,o]=(0,c.useState)([]),[p,q]=(0,c.useState)(!1),[r,s]=(0,c.useState)(!1),[t,u]=(0,c.useState)(!1),[v,w]=(0,c.useState)(null),[x,y]=(0,c.useState)(!1),[z,A]=(0,c.useState)(!1);(0,c.useEffect)(()=>{i&&B(i)},[i]),(0,c.useEffect)(()=>{if(!l||0===n.length)return;let a=new AbortController,b=setTimeout(()=>{fetch(`/api/routines/${l}/stretch-recommendations`,{method:"POST",signal:a.signal}).catch(a=>{a?.name!=="AbortError"&&console.warn("Failed to prefetch stretch recommendations:",a)})},1e3);return()=>{clearTimeout(b),a.abort()}},[l,n]);let B=async a=>{y(!0);try{let b=await fetch(`/api/routines/${a}`);if(!b.ok)throw Error("Failed to load routine");let c=await b.json();m(parseInt(a)),k(c.routine.name);let d=c.exercises.map(a=>a.exercise_id2?{type:h.EXERCISE_TYPES.b2b,exercise1:{id:a.exercise_id1,name:a.exercise_name},exercise2:{id:a.exercise_id2,name:a.exercise2_name}}:{id:a.exercise_id1,name:a.exercise_name});o(d)}catch(a){console.error("Error loading routine:",a),w("Failed to load routine")}finally{y(!1)}},C=async()=>{if(j.trim()){q(!0),w(null);try{let a=await fetch("/api/routines",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:j.trim(),isPublic:!z})});if(!a.ok){let b=await a.json();throw Error(b.error||"Failed to create routine")}let b=await a.json();m(b.id)}catch(a){console.error("Error creating routine:",a),w(a.message||"Failed to create routine. Please try again.")}finally{q(!1)}}},D=async a=>{if(console.log("Exercise selected:",a),s(!1),l)try{if(!(await fetch(`/api/routines/${l}/exercises`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({exerciseId1:a.id})})).ok)throw Error("Failed to add exercise to routine");o([...n,a])}catch(a){console.error("Error adding exercise:",a),alert("Failed to add exercise to routine. Please try again.")}},E=async(a,b)=>{if(u(!1),l)try{if(!(await fetch(`/api/routines/${l}/exercises`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({exerciseId1:a.id,exerciseId2:b.id})})).ok)throw Error("Failed to add superset to routine");o([...n,{type:h.EXERCISE_TYPES.b2b,exercise1:a,exercise2:b}])}catch(a){console.error("Error adding superset:",a),alert("Failed to add superset to routine. Please try again.")}};return x?(0,b.jsx)("div",{className:"min-h-screen bg-zinc-900 flex items-center justify-center",children:(0,b.jsx)("div",{className:"text-white text-xl",children:"Loading routine..."})}):(0,b.jsx)("div",{className:"min-h-screen bg-zinc-900 p-4",children:(0,b.jsxs)("div",{className:"max-w-2xl mx-auto",children:[(0,b.jsx)("h1",{className:"text-3xl font-bold text-white mb-6",children:l?"Edit Routine":"Create New Routine"}),l?(0,b.jsxs)("div",{children:[(0,b.jsx)(g.Card,{paddingClassName:"p-6",className:"mb-6",children:(0,b.jsx)("h2",{className:"text-xl font-bold text-white",children:j})}),(0,b.jsxs)("div",{className:"mb-6",children:[(0,b.jsx)("h3",{className:"text-lg font-semibold text-white mb-3",children:"Exercises"}),0===n.length?(0,b.jsx)("div",{className:"bg-zinc-800 rounded-lg p-8 text-center border-2 border-dashed border-zinc-700",children:(0,b.jsx)("p",{className:"text-zinc-400",children:"No exercises added yet"})}):(0,b.jsx)("div",{className:"space-y-3",children:n.map((a,c)=>a.type===h.EXERCISE_TYPES.b2b?(0,b.jsxs)("div",{className:"bg-zinc-800 rounded-lg p-4 border-2 border-purple-700",children:[(0,b.jsx)("div",{className:"text-purple-400 text-xs font-bold mb-2",children:"SUPERSET"}),(0,b.jsx)("div",{className:"text-white font-semibold",children:a.exercise1.name}),(0,b.jsx)("div",{className:"text-zinc-500 text-sm my-1",children:"+"}),(0,b.jsx)("div",{className:"text-white font-semibold",children:a.exercise2.name})]},c):(0,b.jsx)("div",{className:"bg-zinc-800 rounded-lg p-4 border-2 border-zinc-700",children:(0,b.jsx)("div",{className:"text-white font-semibold",children:a.name})},c))})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,b.jsx)("button",{onClick:()=>s(!0),className:"bg-green-600 hover:bg-green-700 text-white py-4 rounded-lg text-lg font-bold transition-colors",children:"+ Exercise"}),(0,b.jsx)("button",{onClick:()=>u(!0),className:"bg-purple-600 hover:bg-purple-700 text-white py-4 rounded-lg text-lg font-bold transition-colors",children:"+ Superset"})]}),n.length>0&&(0,b.jsx)("button",{onClick:()=>a.push(`/routines/${l}/stretches`),className:"w-full mt-4 bg-blue-600 hover:bg-blue-700 text-white py-4 rounded-lg text-lg font-bold transition-colors",children:"Continue to Stretches"}),(0,b.jsx)("button",{onClick:()=>a.push("/routines"),className:"w-full mt-4 bg-zinc-700 hover:bg-zinc-600 text-white py-3 rounded-lg font-semibold transition-colors",children:"Back to Routines"})]}):(0,b.jsxs)(g.Card,{paddingClassName:"p-6",borderClassName:"border-green-600",children:[(0,b.jsx)("label",{className:"text-zinc-300 text-sm font-semibold block mb-2",children:"Routine Name"}),(0,b.jsx)("input",{type:"text",value:j,onChange:a=>{k(a.target.value),w(null)},placeholder:"e.g., Upper Body Day A",className:"w-full bg-zinc-900 text-white px-4 py-3 rounded-lg mb-4 focus:outline-none focus:ring-2 focus:ring-green-500",autoFocus:!0}),(0,b.jsxs)("label",{className:"flex items-center gap-3 mb-4 cursor-pointer",children:[(0,b.jsx)("input",{type:"checkbox",checked:z,onChange:a=>A(a.target.checked),className:"w-5 h-5 rounded border-zinc-600 bg-zinc-900 text-green-600 focus:ring-green-500 focus:ring-offset-zinc-800 cursor-pointer"}),(0,b.jsxs)("span",{className:"text-zinc-300 text-sm",children:["Make this routine private",(0,b.jsx)("span",{className:"block text-zinc-500 text-xs",children:"Private routines won't appear in the public browse page"})]})]}),v&&(0,b.jsx)("div",{className:"bg-red-900/50 border-2 border-red-500 text-red-200 px-4 py-3 rounded-lg mb-4",children:v}),(0,b.jsx)("button",{onClick:C,disabled:!j.trim()||p,className:"w-full bg-green-600 hover:bg-green-700 disabled:bg-green-800 disabled:cursor-not-allowed text-white py-3 rounded-lg font-bold transition-colors",children:p?"Creating...":"Create Routine"})]}),r&&(0,b.jsx)(e.default,{onSelect:D,onCancel:()=>s(!1)}),t&&(0,b.jsx)(f.default,{onSelect:E,onCancel:()=>u(!1)})]})})}function j(){return(0,b.jsx)(c.Suspense,{fallback:(0,b.jsx)("div",{className:"min-h-screen bg-zinc-900 flex items-center justify-center",children:(0,b.jsx)("div",{className:"text-white text-xl",children:"Loading..."})}),children:(0,b.jsx)(i,{})})}a.s(["default",()=>j])}];

//# sourceMappingURL=%5Broot-of-the-server%5D__ecaf722e._.js.map