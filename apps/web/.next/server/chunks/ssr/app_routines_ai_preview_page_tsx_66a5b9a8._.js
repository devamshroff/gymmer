module.exports=[64861,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944),e=a.i(67169),f=a.i(78035),g=a.i(93787),h=a.i(42027),i=a.i(4655),j=a.i(64600),k=a.i(84975);let l="ai_routine_draft";function m({stretch:a}){return(0,b.jsxs)("div",{className:"bg-zinc-800 rounded-lg p-4 border-2 border-zinc-700 mb-2",children:[(0,b.jsx)("div",{className:"text-white font-semibold",children:a.name}),(0,b.jsx)("div",{className:"text-zinc-400 text-sm",children:(0,k.formatStretchTimer)(a.timerSeconds)}),a.tips&&(0,b.jsx)("div",{className:"text-zinc-500 text-xs mt-1",children:a.tips})]})}function n({exercise:a}){if(a.type===j.EXERCISE_TYPES.b2b){let[c,d]=a.exercises||[];return(0,b.jsxs)("div",{className:"bg-zinc-800 rounded-lg p-4 border-2 border-purple-700 mb-2",children:[(0,b.jsx)("div",{className:"text-purple-400 text-xs font-bold mb-2",children:"SUPERSET"}),(0,b.jsx)("div",{className:"text-white font-semibold",children:c?.name||"Exercise 1"}),c?.tips&&(0,b.jsx)("div",{className:"text-zinc-500 text-xs mt-1",children:c.tips}),(0,b.jsx)("div",{className:"text-purple-400 text-sm my-1",children:"+"}),(0,b.jsx)("div",{className:"text-white font-semibold",children:d?.name||"Exercise 2"}),d?.tips&&(0,b.jsx)("div",{className:"text-zinc-500 text-xs mt-1",children:d.tips})]})}return(0,b.jsxs)("div",{className:"bg-zinc-800 rounded-lg p-4 border-2 border-zinc-700 mb-2",children:[(0,b.jsx)("div",{className:"text-white font-semibold",children:a.name}),a.tips&&(0,b.jsx)("div",{className:"text-zinc-500 text-xs mt-1",children:a.tips})]})}function o(){let a=(0,d.useRouter)(),[k,o]=(0,c.useState)(""),[p,q]=(0,c.useState)(null),[r,s]=(0,c.useState)(!1),[t,u]=(0,c.useState)(null),[v,w]=(0,c.useState)("preview"),[x,y]=(0,c.useState)(!1),[z,A]=(0,c.useState)(!1),[B,C]=(0,c.useState)(!1),[D,E]=(0,c.useState)(!1),[F,G]=(0,c.useState)(!1),[H,I]=(0,c.useState)(null),[J,K]=(0,c.useState)(null),[L,M]=(0,c.useState)(null);(0,c.useEffect)(()=>{let a=localStorage.getItem(l);a&&o(a)},[]);let N=(0,c.useMemo)(()=>{if(!k.trim())return null;try{return JSON.parse(k)}catch{return null}},[k]),O=(0,c.useMemo)(()=>({name:N?.name||"Untitled",description:N?.description||"",exercises:Array.isArray(N?.exercises)?N.exercises.length:0,preStretches:Array.isArray(N?.preWorkoutStretches)?N.preWorkoutStretches.length:0,postStretches:Array.isArray(N?.postWorkoutStretches)?N.postWorkoutStretches.length:0,hasCardio:!!N?.cardio}),[N]),P=a=>{if(k.trim())try{let b=JSON.parse(k),c=a(b);o(JSON.stringify(c,null,2)),localStorage.setItem(l,JSON.stringify(c,null,2))}catch{q("JSON is invalid. Please fix it before editing.")}},Q=(a,b)=>{P(c=>{if("pre"===b){let b=Array.isArray(c.preWorkoutStretches)?[...c.preWorkoutStretches]:[];return b.splice(a,1),{...c,preWorkoutStretches:b}}let d=Array.isArray(c.postWorkoutStretches)?[...c.postWorkoutStretches]:[];return d.splice(a,1),{...c,postWorkoutStretches:d}})},R=async()=>{let b;if(k.trim()){try{b=JSON.parse(k)}catch{q("JSON is invalid. Please fix it before saving.");return}s(!0),q(null),u(null);try{let c=await fetch("/api/routines/import",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({workoutPlan:b})});if(!c.ok){let a=await c.json().catch(()=>({}));throw Error(a.error||"Failed to save routine")}localStorage.removeItem(l),u(`Saved "${b.name}" to your routines.`),setTimeout(()=>a.push("/routines"),1500)}catch(a){q(a.message||"Failed to save routine")}finally{s(!1)}}};if(!k.trim())return(0,b.jsx)("div",{className:"min-h-screen bg-zinc-900 p-4",children:(0,b.jsx)("div",{className:"max-w-3xl mx-auto py-12",children:(0,b.jsxs)("div",{className:"bg-zinc-800 border border-zinc-700 rounded-lg p-6",children:[(0,b.jsx)("h1",{className:"text-2xl font-bold text-white mb-2",children:"No routine to preview"}),(0,b.jsx)("p",{className:"text-zinc-400 mb-4",children:"Generate a routine first, then click â€œView Workoutâ€."}),(0,b.jsx)("button",{onClick:()=>a.push("/routines/ai"),className:"bg-emerald-600 hover:bg-emerald-700 text-white px-4 py-2 rounded-lg font-semibold",children:"Back to AI Builder"})]})})});let S=N?.exercises||[],T=N?.preWorkoutStretches||[],U=N?.postWorkoutStretches||[],V=N?.cardio;return(0,b.jsxs)("div",{className:"min-h-screen bg-zinc-900 p-4 pb-32",children:[(0,b.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-3xl font-bold text-white",children:"Routine Preview"}),(0,b.jsx)("p",{className:"text-zinc-400 text-sm",children:"Review, edit, and save your AI workout."})]}),(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("button",{onClick:()=>w("preview"),className:`text-sm font-semibold ${"preview"===v?"text-white":"text-zinc-400 hover:text-zinc-200"}`,children:"Preview"}),(0,b.jsx)("button",{onClick:()=>w("edit"),className:`text-sm font-semibold ${"edit"===v?"text-white":"text-zinc-400 hover:text-zinc-200"}`,children:"Edit"}),(0,b.jsx)("button",{onClick:()=>a.push("/routines/ai"),className:"text-zinc-400 hover:text-zinc-200 text-sm font-semibold",children:"Back to AI Builder"})]})]}),"preview"===v?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)(i.Card,{paddingClassName:"p-6",className:"mb-6",children:[(0,b.jsx)("h2",{className:"text-2xl font-bold text-white",children:O.name}),O.description&&(0,b.jsx)("div",{className:"text-zinc-400 mt-2",children:O.description})]}),(0,b.jsxs)("section",{className:"mb-8",children:[(0,b.jsx)(i.SectionHeader,{icon:"ðŸŸ¢",iconClassName:"text-green-500",label:"Pre-Workout Stretches"}),0===T.length?(0,b.jsx)(i.EmptyState,{message:"No pre-workout stretches",className:"mb-2"}):T.map((a,c)=>(0,b.jsx)(m,{stretch:a},`pre-${c}`))]}),(0,b.jsxs)("section",{className:"mb-8",children:[(0,b.jsx)(i.SectionHeader,{icon:"ðŸ”¥",iconClassName:"text-orange-500",label:"Exercises"}),0===S.length?(0,b.jsx)(i.EmptyState,{message:"No exercises",className:"mb-2"}):S.map((a,c)=>(0,b.jsx)(n,{exercise:a},`ex-${c}`))]}),(0,b.jsxs)("section",{className:"mb-8",children:[(0,b.jsx)(i.SectionHeader,{icon:"â¤ï¸",iconClassName:"text-red-500",label:"Cardio (Optional)"}),V?(0,b.jsx)(h.CardioItem,{cardio:{type:V.type||"Cardio",duration:V.duration,intensity:V.intensity,tips:V.tips}}):(0,b.jsx)(i.EmptyState,{message:"No cardio",className:"mb-2"})]}),(0,b.jsxs)("section",{className:"mb-8",children:[(0,b.jsx)(i.SectionHeader,{icon:"ðŸ”µ",iconClassName:"text-blue-500",label:"Post-Workout Stretches"}),0===U.length?(0,b.jsx)(i.EmptyState,{message:"No post-workout stretches",className:"mb-2"}):U.map((a,c)=>(0,b.jsx)(m,{stretch:a},`post-${c}`))]})]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)(i.Card,{paddingClassName:"p-6",className:"mb-6",children:[(0,b.jsx)("label",{className:"text-zinc-400 text-sm block mb-2",children:"Routine Name"}),(0,b.jsx)("input",{value:N?.name||"",onChange:a=>{let b=a.target.value;P(a=>({...a,name:b}))},className:"w-full bg-zinc-900 text-white px-4 py-3 rounded-lg mb-4 focus:outline-none focus:ring-2 focus:ring-green-500"}),(0,b.jsx)("label",{className:"text-zinc-400 text-sm block mb-2",children:"Description"}),(0,b.jsx)("textarea",{value:N?.description||"",onChange:a=>{let b=a.target.value;P(a=>({...a,description:b}))},className:"w-full bg-zinc-900 text-white px-4 py-3 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500"})]}),(0,b.jsxs)("section",{className:"mb-8",children:[(0,b.jsx)(i.SectionHeader,{icon:"ðŸŸ¢",iconClassName:"text-green-500",label:"Pre-Workout Stretches"}),(0,b.jsx)(h.AddButton,{onClick:()=>{I(0),y(!0)},label:"Add Pre-Stretch",color:"green"}),0===T.length?(0,b.jsx)(i.EmptyState,{message:"No pre-workout stretches",className:"mb-2"}):T.map((a,c)=>(0,b.jsxs)("div",{children:[(0,b.jsx)(h.StretchItem,{stretch:{name:a.name,timerSeconds:a.timerSeconds},onDelete:()=>Q(c,"pre")}),(0,b.jsx)(h.AddButton,{onClick:()=>{I(c+1),y(!0)},label:"Add Pre-Stretch",color:"green"})]},`pre-${c}`))]}),(0,b.jsxs)("section",{className:"mb-8",children:[(0,b.jsx)(i.SectionHeader,{icon:"ðŸ”¥",iconClassName:"text-orange-500",label:"Exercises"}),(0,b.jsx)(h.ExerciseAddRow,{onAddExercise:()=>{M(0),C(!0)},onAddSuperset:()=>{M(0),E(!0)}}),0===S.length?(0,b.jsx)(i.EmptyState,{message:"No exercises",className:"mb-2"}):S.map((a,c)=>(0,b.jsxs)("div",{children:[(0,b.jsx)(h.ExerciseItem,{exercise:a.type===j.EXERCISE_TYPES.b2b?{exercise_name:a.exercises?.[0]?.name||"Exercise 1",exercise_id2:1,exercise2_name:a.exercises?.[1]?.name||"Exercise 2"}:{exercise_name:a.name,exercise_id2:null,exercise2_name:null},onDelete:()=>{P(a=>{let b=Array.isArray(a.exercises)?[...a.exercises]:[];return b.splice(c,1),{...a,exercises:b}})}}),(0,b.jsx)(h.ExerciseAddRow,{onAddExercise:()=>{M(c+1),C(!0)},onAddSuperset:()=>{M(c+1),E(!0)}})]},`ex-${c}`))]}),(0,b.jsxs)("section",{className:"mb-8",children:[(0,b.jsx)(i.SectionHeader,{icon:"â¤ï¸",iconClassName:"text-red-500",label:"Cardio (Optional)"}),V?(0,b.jsx)(h.CardioItem,{cardio:{type:V.type||"Cardio",duration:V.duration,intensity:V.intensity,tips:V.tips},onDelete:()=>{P(a=>{let b={...a};return delete b.cardio,b})}}):(0,b.jsx)("button",{onClick:()=>G(!0),className:"w-full py-3 text-sm rounded bg-red-900/50 text-white hover:bg-red-800/50 transition-colors",children:"+ Add Cardio"})]}),(0,b.jsxs)("section",{className:"mb-8",children:[(0,b.jsx)(i.SectionHeader,{icon:"ðŸ”µ",iconClassName:"text-blue-500",label:"Post-Workout Stretches"}),(0,b.jsx)(h.AddButton,{onClick:()=>{K(0),A(!0)},label:"Add Post-Stretch",color:"blue"}),0===U.length?(0,b.jsx)(i.EmptyState,{message:"No post-workout stretches",className:"mb-2"}):U.map((a,c)=>(0,b.jsxs)("div",{children:[(0,b.jsx)(h.StretchItem,{stretch:{name:a.name,timerSeconds:a.timerSeconds},onDelete:()=>Q(c,"post")}),(0,b.jsx)(h.AddButton,{onClick:()=>{K(c+1),A(!0)},label:"Add Post-Stretch",color:"blue"})]},`post-${c}`))]})]}),p&&(0,b.jsx)("div",{className:"mt-6 bg-red-900/50 border border-red-600 text-red-200 px-4 py-3 rounded-lg",children:p}),t&&(0,b.jsx)("div",{className:"mt-6 bg-emerald-900/50 border border-emerald-600 text-emerald-200 px-4 py-3 rounded-lg",children:t})]}),(0,b.jsx)(i.BottomActionBar,{maxWidthClassName:"max-w-4xl",children:(0,b.jsx)("button",{onClick:R,disabled:!k.trim()||r,className:"w-full bg-green-600 hover:bg-green-700 disabled:bg-green-800 disabled:cursor-not-allowed text-white py-4 rounded-lg text-xl font-bold transition-colors",children:r?"Saving...":"Save & Exit"})}),x&&(0,b.jsx)(g.default,{onSelect:a=>{y(!1),P(b=>{let c=Array.isArray(b.preWorkoutStretches)?[...b.preWorkoutStretches]:[],d=H??c.length;return c.splice(d,0,{name:a.name,timerSeconds:a.timer_seconds??0,tips:a.tips||void 0}),{...b,preWorkoutStretches:c}}),I(null)},onCancel:()=>{y(!1),I(null)},filterType:"pre_workout"}),z&&(0,b.jsx)(g.default,{onSelect:a=>{A(!1),P(b=>{let c=Array.isArray(b.postWorkoutStretches)?[...b.postWorkoutStretches]:[],d=J??c.length;return c.splice(d,0,{name:a.name,timerSeconds:a.timer_seconds??0,tips:a.tips||void 0}),{...b,postWorkoutStretches:c}}),K(null)},onCancel:()=>{A(!1),K(null)},filterType:"post_workout"}),B&&(0,b.jsx)(e.default,{onSelect:a=>{C(!1),P(b=>{let c=Array.isArray(b.exercises)?[...b.exercises]:[],d=L??c.length;return c.splice(d,0,{type:j.EXERCISE_TYPES.single,name:a.name,tips:a.tips||void 0}),{...b,exercises:c}}),M(null)},onCancel:()=>{C(!1),M(null)}}),D&&(0,b.jsx)(f.default,{onSelect:(a,b)=>{E(!1),P(c=>{let d=Array.isArray(c.exercises)?[...c.exercises]:[],e=L??d.length;return d.splice(e,0,{type:j.EXERCISE_TYPES.b2b,exercises:[{name:a.name,tips:a.tips||void 0},{name:b.name,tips:b.tips||void 0}]}),{...c,exercises:d}}),M(null)},onCancel:()=>{E(!1),M(null)}}),F&&(0,b.jsx)(h.CardioForm,{onSave:a=>{P(b=>({...b,cardio:a})),G(!1)},onCancel:()=>G(!1)})]})}a.s(["default",()=>o])}];

//# sourceMappingURL=app_routines_ai_preview_page_tsx_66a5b9a8._.js.map