{"version":3,"sources":["../../../../app/workout/%5Bname%5D/page.tsx"],"sourcesContent":["'use client';\n\nimport { useCallback, useEffect, useMemo, useState } from 'react';\nimport { useParams, useRouter, useSearchParams } from 'next/navigation';\nimport Link from 'next/link';\nimport { WorkoutPlan, Exercise, Stretch, Cardio, SingleExercise, WorkoutExerciseLog } from '@/lib/types';\nimport { getFormTips, getVideoUrl } from '@/lib/workout-media';\nimport { formatStretchTimer } from '@/lib/stretch-utils';\nimport { initWorkoutSession, isSessionMode, resolveSessionMode } from '@/lib/workout-session';\nimport { BottomActionBar, Card, SectionHeader } from '@/app/components/SharedUi';\nimport ExerciseHistoryModal from '@/app/components/ExerciseHistoryModal';\nimport { saveSessionTargetsMeta, saveSessionWorkout } from '@/lib/session-workout';\nimport {\n  EXERCISE_TYPES,\n  type ExercisePrimaryMetric,\n  SESSION_MODE_DESCRIPTIONS,\n  SESSION_MODE_LABELS,\n  SESSION_MODES,\n} from '@/lib/constants';\nimport type { SessionMode } from '@/lib/constants';\nimport {\n  DEFAULT_HEIGHT_UNIT,\n  DEFAULT_WEIGHT_UNIT,\n  normalizeHeightUnit,\n  normalizeWeightUnit,\n} from '@/lib/units';\nimport type { HeightUnit, WeightUnit } from '@/lib/units';\nimport {\n  formatMetricDisplay,\n  getMetricLabel,\n  isRepsOnlyMetric,\n  resolvePrimaryMetric,\n} from '@/lib/metric-utils';\nimport {\n  loadWorkoutBootstrapCache,\n  saveWorkoutBootstrapCache,\n  type LastSetSummary,\n  type WorkoutBootstrapPayload,\n} from '@/lib/workout-bootstrap';\n\ntype ExerciseTarget = {\n  suggestedWeight?: number | null;\n  suggestedReps?: number | null;\n  rationale?: string | null;\n};\n\ntype LastSetSummaries = Record<string, LastSetSummary>;\n\ntype SetIndex = 1 | 2 | 3 | 4;\ntype SetField = 'weight' | 'reps';\ntype SetKey = `set${SetIndex}_${SetField}`;\n\nfunction getLogSetValue(log: WorkoutExerciseLog, setNum: SetIndex, field: SetField): number | null {\n  const key = `set${setNum}_${field}` as SetKey;\n  return log[key] as number | null;\n}\n\ntype TargetsNarrative = {\n  encouragement: string | null;\n  goalSummary: string | null;\n  trendSummary: string | null;\n};\n\ntype TargetsSource = 'ai' | 'fallback' | null;\n\ntype FallbackTargetsResult = {\n  targets: Record<string, ExerciseTarget>;\n  narrative: TargetsNarrative;\n};\n\ntype LastSessionMax = {\n  weight: number | null;\n  reps: number | null;\n};\n\ntype TrendCounts = {\n  up: number;\n  down: number;\n  flat: number;\n  newData: number;\n};\n\nconst WEIGHT_INCREMENT = 2.5;\ntype TargetExercise = Pick<SingleExercise, 'name' | 'targetWeight' | 'targetReps' | 'isBodyweight' | 'isMachine'>;\n\nfunction roundUpToIncrement(value: number, increment: number) {\n  if (!Number.isFinite(value)) return 0;\n  return Math.ceil(value / increment) * increment;\n}\n\nfunction roundUpWhole(value: number) {\n  if (!Number.isFinite(value)) return 0;\n  return Math.ceil(value);\n}\n\nfunction getMaxesFromLastLog(log: LastSetSummary): {\n  maxWeight: number | null;\n  repsAtMax: number | null;\n  maxReps: number | null;\n} {\n  if (!log) {\n    return { maxWeight: null, repsAtMax: null, maxReps: null };\n  }\n  let maxWeight: number | null = null;\n  let repsAtMax: number | null = null;\n  let maxReps: number | null = null;\n\n  for (const i of [1, 2, 3, 4] as const) {\n    const weight = getLogSetValue(log, i, 'weight');\n    const reps = getLogSetValue(log, i, 'reps');\n    if (typeof reps === 'number' && Number.isFinite(reps)) {\n      maxReps = maxReps === null ? reps : Math.max(maxReps, reps);\n    }\n    if (typeof weight !== 'number' || !Number.isFinite(weight)) continue;\n    if (maxWeight === null || weight > maxWeight) {\n      maxWeight = weight;\n      repsAtMax = typeof reps === 'number' && Number.isFinite(reps) ? reps : null;\n    } else if (weight === maxWeight && typeof reps === 'number' && Number.isFinite(reps)) {\n      repsAtMax = repsAtMax === null ? reps : Math.max(repsAtMax, reps);\n    }\n  }\n\n  return { maxWeight, repsAtMax, maxReps };\n}\n\nfunction getSessionFactors(mode: SessionMode) {\n  if (mode === SESSION_MODES.maintenance) return { weight: 0.85, reps: 0.85 };\n  if (mode === SESSION_MODES.light) return { weight: 0.6, reps: 0.6 };\n  return { weight: 1.05, reps: 1.05 };\n}\n\nfunction normalizeNarrativeField(value: unknown): string | null {\n  if (typeof value !== 'string') return null;\n  const trimmed = value.trim();\n  return trimmed.length > 0 ? trimmed : null;\n}\n\nfunction computeLastSessionMaxes(summaries: LastSetSummaries) {\n  const lastMaxes: Record<string, LastSessionMax> = {};\n  for (const [name, log] of Object.entries(summaries)) {\n    const { maxWeight, maxReps } = getMaxesFromLastLog(log);\n    lastMaxes[name] = { weight: maxWeight, reps: maxReps };\n  }\n  return lastMaxes;\n}\n\nfunction buildFallbackNarrative(\n  sessionMode: SessionMode,\n  workoutName: string,\n  exerciseNames: string[],\n  trendCounts: TrendCounts\n): TargetsNarrative {\n  const encouragement = sessionMode === SESSION_MODES.progress\n    ? 'Targets are set. Push for a clean win today.'\n    : sessionMode === SESSION_MODES.maintenance\n      ? 'Targets are set. Keep it steady and controlled today.'\n      : 'Targets are set. Keep it light and focus on smooth reps today.';\n\n  const focusNames = exerciseNames.slice(0, 3);\n  const focusText = focusNames.length > 0 ? ` Focus lifts: ${focusNames.join(', ')}.` : '';\n  const sessionLabel = SESSION_MODE_LABELS[sessionMode] ?? 'Training';\n  const workoutLabel = workoutName || 'today';\n  const goalSummary = `Goal today: ${sessionLabel} session for ${workoutLabel}.${focusText}`.trim();\n\n  const trendParts: string[] = [];\n  if (trendCounts.up) trendParts.push(`${trendCounts.up} trending up`);\n  if (trendCounts.flat) trendParts.push(`${trendCounts.flat} steady`);\n  if (trendCounts.down) trendParts.push(`${trendCounts.down} trending down`);\n  if (trendCounts.newData) trendParts.push(`${trendCounts.newData} without recent data`);\n  const trendSummary = trendParts.length > 0\n    ? `Recent sessions: ${trendParts.join(', ')}.`\n    : 'Recent sessions: not enough history yet.';\n\n  return { encouragement, goalSummary, trendSummary };\n}\n\nfunction resolveTargetNumber(value: number | null | undefined, fallback: number) {\n  return typeof value === 'number' && Number.isFinite(value) ? value : fallback;\n}\n\nfunction applyTargetsToWorkout(\n  plan: WorkoutPlan,\n  targets: Record<string, ExerciseTarget>\n): WorkoutPlan {\n  return {\n    ...plan,\n    exercises: plan.exercises.map((exercise) => {\n      if (exercise.type === EXERCISE_TYPES.single) {\n        const suggestion = targets[exercise.name];\n        if (!suggestion) return exercise;\n        return {\n          ...exercise,\n          targetWeight: resolveTargetNumber(suggestion.suggestedWeight, exercise.targetWeight),\n          targetReps: resolveTargetNumber(suggestion.suggestedReps, exercise.targetReps),\n        };\n      }\n      const [ex1, ex2] = exercise.exercises;\n      const nextEx1 = (() => {\n        const suggestion = targets[ex1.name];\n        if (!suggestion) return ex1;\n        return {\n          ...ex1,\n          targetWeight: resolveTargetNumber(suggestion.suggestedWeight, ex1.targetWeight),\n          targetReps: resolveTargetNumber(suggestion.suggestedReps, ex1.targetReps),\n        };\n      })();\n      const nextEx2 = (() => {\n        const suggestion = targets[ex2.name];\n        if (!suggestion) return ex2;\n        return {\n          ...ex2,\n          targetWeight: resolveTargetNumber(suggestion.suggestedWeight, ex2.targetWeight),\n          targetReps: resolveTargetNumber(suggestion.suggestedReps, ex2.targetReps),\n        };\n      })();\n      return {\n        ...exercise,\n        exercises: [nextEx1, nextEx2],\n      };\n    }),\n  };\n}\n\nexport default function WorkoutDetailPage() {\n  const params = useParams();\n  const router = useRouter();\n  const searchParams = useSearchParams();\n  const isPreview = searchParams.get('preview') === '1';\n  const sessionModeParam = searchParams.get('mode');\n  const routineIdParam = searchParams.get('routineId');\n  const sessionMode = isSessionMode(sessionModeParam) ? sessionModeParam : null;\n  const startMode = resolveSessionMode(sessionModeParam);\n  const [workout, setWorkout] = useState<WorkoutPlan | null>(null);\n  const [loading, setLoading] = useState(true);\n  const [routineId, setRoutineId] = useState<number | null>(null);\n  const [isPublicRoutine, setIsPublicRoutine] = useState(false);\n  const [showDeleteModal, setShowDeleteModal] = useState(false);\n  const [deleting, setDeleting] = useState(false);\n  const [showHistory, setShowHistory] = useState(false);\n  const [historyExerciseNames, setHistoryExerciseNames] = useState<string[]>([]);\n  const [targets, setTargets] = useState<Record<string, ExerciseTarget>>({});\n  const [targetsLoading, setTargetsLoading] = useState(false);\n  const [targetsError, setTargetsError] = useState<string | null>(null);\n  const [targetsNarrative, setTargetsNarrative] = useState<TargetsNarrative>({\n    encouragement: null,\n    goalSummary: null,\n    trendSummary: null,\n  });\n  const [targetsSource, setTargetsSource] = useState<TargetsSource>(null);\n  const [lastSetSummaries, setLastSetSummaries] = useState<LastSetSummaries>({});\n  const [lastSessionMaxes, setLastSessionMaxes] = useState<Record<string, LastSessionMax>>({});\n  const [lastWorkoutReport, setLastWorkoutReport] = useState<string | null>(null);\n  const [showLastWorkoutReport, setShowLastWorkoutReport] = useState(false);\n  const [loadingDots, setLoadingDots] = useState('...');\n  const [weightUnit, setWeightUnit] = useState<WeightUnit>(DEFAULT_WEIGHT_UNIT);\n  const [heightUnit, setHeightUnit] = useState<HeightUnit>(DEFAULT_HEIGHT_UNIT);\n\n  useEffect(() => {\n    setLastSessionMaxes(computeLastSessionMaxes(lastSetSummaries));\n  }, [lastSetSummaries]);\n\n  const cacheTargetsForSession = useCallback(\n    (nextTargets: Record<string, ExerciseTarget>) => {\n      if (!workout) return;\n      const updatedWorkout = applyTargetsToWorkout(workout, nextTargets);\n      const sessionRoutineId = routineIdParam ?? (routineId !== null ? String(routineId) : null);\n      saveSessionWorkout(updatedWorkout, sessionRoutineId);\n    },\n    [routineId, routineIdParam, workout]\n  );\n\n  const baseHistoryTargets = useMemo(() => {\n    if (!workout) return {};\n    const next: Record<string, { weight?: number | null; reps?: number | null }> = {};\n    for (const exercise of workout.exercises) {\n      if (exercise.type === EXERCISE_TYPES.single) {\n        next[exercise.name] = {\n          weight: exercise.targetWeight,\n          reps: exercise.targetReps,\n        };\n      } else {\n        const [ex1, ex2] = exercise.exercises;\n        next[ex1.name] = {\n          weight: ex1.targetWeight,\n          reps: ex1.targetReps,\n        };\n        next[ex2.name] = {\n          weight: ex2.targetWeight,\n          reps: ex2.targetReps,\n        };\n      }\n    }\n    return next;\n  }, [workout]);\n\n  const historyTargets = useMemo(() => {\n    const next: Record<string, { weight?: number | null; reps?: number | null }> = { ...baseHistoryTargets };\n    if (isPreview) {\n      for (const [name, suggestion] of Object.entries(targets)) {\n        const current = next[name] || {};\n        next[name] = {\n          weight: suggestion.suggestedWeight ?? current.weight ?? null,\n          reps: suggestion.suggestedReps ?? current.reps ?? null,\n        };\n      }\n    }\n    return next;\n  }, [baseHistoryTargets, isPreview, targets]);\n\n  const allExerciseNames = useMemo(() => {\n    if (!workout) return [];\n    const names: string[] = [];\n    for (const exercise of workout.exercises) {\n      if (exercise.type === EXERCISE_TYPES.single) {\n        names.push(exercise.name);\n      } else {\n        const [ex1, ex2] = exercise.exercises;\n        names.push(ex1.name, ex2.name);\n      }\n    }\n    return names;\n  }, [workout]);\n\n  useEffect(() => {\n    async function fetchWorkout() {\n      try {\n        const routineIdParam = searchParams.get('routineId');\n        const decodedName = decodeURIComponent(params.name as string);\n\n        const cached = loadWorkoutBootstrapCache({\n          workoutName: decodedName,\n          routineId: routineIdParam,\n        });\n\n        if (cached) {\n          setWorkout(cached.workout);\n          setLastSetSummaries(cached.lastSetSummaries || {});\n          setLastSessionMaxes(computeLastSessionMaxes(cached.lastSetSummaries || {}));\n          setLastWorkoutReport(cached.lastWorkoutReport ?? null);\n          setWeightUnit(normalizeWeightUnit(cached.settings?.weightUnit));\n          setHeightUnit(normalizeHeightUnit(cached.settings?.heightUnit));\n          if (routineIdParam) {\n            setRoutineId(parseInt(routineIdParam));\n            setIsPublicRoutine(true);\n          } else if (cached.routineMeta?.id) {\n            setRoutineId(cached.routineMeta.id ?? null);\n          }\n          setLoading(false);\n          return;\n        }\n\n        let apiUrl = `/api/workout/${params.name}?bootstrap=1`;\n        if (routineIdParam) {\n          apiUrl += `&routineId=${routineIdParam}`;\n          setRoutineId(parseInt(routineIdParam));\n          setIsPublicRoutine(true);\n        }\n\n        const response = await fetch(apiUrl);\n        if (!response.ok) {\n          throw new Error('Workout not found');\n        }\n        const data = await response.json();\n        const payload: WorkoutBootstrapPayload = {\n          workout: data.workout,\n          settings: data.settings,\n          lastSetSummaries: data.lastSetSummaries || {},\n          lastWorkoutReport: data.lastWorkoutReport || null,\n          routineMeta: data.routineMeta,\n        };\n        setWorkout(payload.workout);\n        setLastSetSummaries(payload.lastSetSummaries);\n        setLastSessionMaxes(computeLastSessionMaxes(payload.lastSetSummaries));\n        setLastWorkoutReport(payload.lastWorkoutReport);\n        setWeightUnit(normalizeWeightUnit(payload.settings?.weightUnit));\n        setHeightUnit(normalizeHeightUnit(payload.settings?.heightUnit));\n        if (!routineIdParam && payload.routineMeta?.id) {\n          setRoutineId(payload.routineMeta.id ?? null);\n        }\n\n        saveWorkoutBootstrapCache({\n          workoutName: decodedName,\n          routineId: routineIdParam ?? (payload.routineMeta?.id ? String(payload.routineMeta.id) : null),\n          payload,\n        });\n\n        if (!routineIdParam && !payload.routineMeta?.id) {\n          const routinesResponse = await fetch('/api/routines');\n          const routinesData = await routinesResponse.json();\n          const routine = routinesData.routines.find((r: any) => r.name === decodedName);\n          if (routine) {\n            setRoutineId(routine.id);\n          }\n        }\n      } catch (error) {\n        console.error('Error fetching workout:', error);\n      } finally {\n        setLoading(false);\n      }\n    }\n\n    fetchWorkout();\n  }, [params.name, searchParams]);\n\n  const computeFallbackTargets = async (): Promise<FallbackTargetsResult> => {\n    if (!workout) {\n      return {\n        targets: {},\n        narrative: { encouragement: null, goalSummary: null, trendSummary: null }\n      };\n    }\n    const fallback: Record<string, ExerciseTarget> = {};\n    const { weight: weightFactor, reps: repsFactor } = getSessionFactors(sessionMode as SessionMode);\n    const trendCounts: TrendCounts = { up: 0, down: 0, flat: 0, newData: 0 };\n\n    const updateTrendCounts = (exercise: TargetExercise) => {\n      const log = lastSetSummaries[exercise.name];\n      if (!log) {\n        trendCounts.newData += 1;\n        return;\n      }\n      trendCounts.flat += 1;\n    };\n\n    const buildTarget = (exercise: TargetExercise) => {\n      const log = lastSetSummaries[exercise.name];\n      const { maxWeight, repsAtMax, maxReps } = getMaxesFromLastLog(log);\n      const baseWeight = exercise.targetWeight;\n      const baseReps = exercise.targetReps;\n      const isBodyweight = !!exercise.isBodyweight;\n      const isMachine = !!exercise.isMachine;\n      const usesHistory = !!log && (maxWeight !== null || maxReps !== null);\n      let suggestedWeight: number | null = null;\n      let suggestedReps: number | null = null;\n      let rationale: string | null = null;\n\n      if (isBodyweight) {\n        const sourceReps = maxReps ?? baseReps;\n        const scaledReps = roundUpWhole(sourceReps * repsFactor);\n        suggestedReps = Math.max(1, scaledReps);\n        rationale = usesHistory\n          ? `Default target uses ${Math.round(repsFactor * 100)}% of your latest session max reps.`\n          : 'Default target uses your routine baseline until more history is logged.';\n      } else {\n        const sourceWeight = maxWeight ?? baseWeight;\n        const sourceReps = repsAtMax ?? maxReps ?? baseReps;\n        const scaledWeight = roundUpToIncrement(sourceWeight * weightFactor, WEIGHT_INCREMENT);\n        const repFactorForMode = sessionMode === SESSION_MODES.progress ? 1 : repsFactor;\n        const scaledReps = roundUpWhole(sourceReps * repFactorForMode);\n        const hasAddedWeight = isMachine ? (maxWeight !== null && maxWeight > 0) : true;\n        suggestedWeight = hasAddedWeight ? Math.max(0, scaledWeight) : null;\n        suggestedReps = Math.max(1, scaledReps);\n        const repNote = sessionMode === SESSION_MODES.progress\n          ? 'max reps at your max weight'\n          : `${Math.round(repsFactor * 100)}% of your max reps`;\n        if (usesHistory) {\n          rationale = hasAddedWeight\n            ? `Default target uses ${Math.round(weightFactor * 100)}% of your latest session max weight and ${repNote}.`\n            : `Default target uses ${repNote}; add weight when you feel ready.`;\n        } else {\n          rationale = 'Default target uses your routine baseline until more history is logged.';\n        }\n      }\n\n      fallback[exercise.name] = {\n        suggestedWeight,\n        suggestedReps,\n        rationale\n      };\n    };\n\n    for (const entry of workout.exercises) {\n      if (entry.type === EXERCISE_TYPES.single) {\n        buildTarget(entry);\n        updateTrendCounts(entry);\n      } else {\n        const [ex1, ex2] = entry.exercises;\n        buildTarget(ex1);\n        buildTarget(ex2);\n        updateTrendCounts(ex1);\n        updateTrendCounts(ex2);\n      }\n    }\n\n    const narrative = buildFallbackNarrative(\n      sessionMode as SessionMode,\n      workout.name,\n      allExerciseNames,\n      trendCounts\n    );\n\n    return { targets: fallback, narrative };\n  };\n\n  useEffect(() => {\n    if (!targetsLoading) {\n      setLoadingDots('...');\n      return;\n    }\n\n    const frames = ['.', '..', '...'];\n    let index = 0;\n    setLoadingDots(frames[index]);\n    const interval = window.setInterval(() => {\n      index = (index + 1) % frames.length;\n      setLoadingDots(frames[index]);\n    }, 500);\n\n    return () => window.clearInterval(interval);\n  }, [targetsLoading]);\n\n  useEffect(() => {\n    setShowLastWorkoutReport(false);\n  }, [workout?.name]);\n\n  useEffect(() => {\n    if (!isPreview || !workout) return;\n    if (Object.keys(targets).length === 0) return;\n    cacheTargetsForSession(targets);\n  }, [cacheTargetsForSession, isPreview, targets, workout]);\n\n  useEffect(() => {\n    if (!workout || !isPreview || !sessionMode) return;\n\n    let isActive = true;\n    const controller = new AbortController();\n\n    const fetchTargets = async () => {\n      setTargetsLoading(true);\n      setTargetsError(null);\n      setTargets({});\n      setTargetsNarrative({ encouragement: null, goalSummary: null, trendSummary: null });\n      setTargetsSource(null);\n      const sessionRoutineId = routineIdParam ?? (routineId !== null ? String(routineId) : null);\n      saveSessionTargetsMeta(workout.name, sessionRoutineId, null);\n\n      const exercisePayload: Array<{\n        name: string;\n        type: typeof EXERCISE_TYPES.single | typeof EXERCISE_TYPES.b2b;\n        sets: number;\n        targetWeight: number;\n        targetReps: number;\n        warmupWeight?: number;\n        isBodyweight?: boolean;\n        isMachine?: boolean;\n      }> = [];\n\n      for (const exercise of workout.exercises) {\n        if (exercise.type === EXERCISE_TYPES.single) {\n          exercisePayload.push({\n            name: exercise.name,\n            type: EXERCISE_TYPES.single,\n            sets: exercise.sets,\n            targetWeight: exercise.targetWeight,\n            targetReps: exercise.targetReps,\n            warmupWeight: exercise.warmupWeight,\n            isBodyweight: exercise.isBodyweight,\n            isMachine: exercise.isMachine,\n          });\n        } else {\n          const [ex1, ex2] = exercise.exercises;\n          exercisePayload.push({\n            name: ex1.name,\n            type: EXERCISE_TYPES.b2b,\n            sets: ex1.sets,\n            targetWeight: ex1.targetWeight,\n            targetReps: ex1.targetReps,\n            warmupWeight: ex1.warmupWeight,\n            isBodyweight: ex1.isBodyweight,\n            isMachine: ex1.isMachine,\n          });\n          exercisePayload.push({\n            name: ex2.name,\n            type: EXERCISE_TYPES.b2b,\n            sets: ex2.sets,\n            targetWeight: ex2.targetWeight,\n            targetReps: ex2.targetReps,\n            warmupWeight: ex2.warmupWeight,\n            isBodyweight: ex2.isBodyweight,\n            isMachine: ex2.isMachine,\n          });\n        }\n      }\n\n      try {\n        const targetsResponse = await fetch('/api/workout-targets', {\n          method: 'POST',\n          headers: { 'Content-Type': 'application/json' },\n          body: JSON.stringify({\n            workoutName: workout.name,\n            sessionMode,\n            exercises: exercisePayload,\n          }),\n          signal: controller.signal,\n        });\n\n        if (!isActive) return;\n\n        if (!targetsResponse.ok) {\n          const errorText = await targetsResponse.text();\n          throw new Error(errorText || 'Failed to load targets');\n        }\n\n        const targetsData = await targetsResponse.json();\n        const nextTargets: Record<string, ExerciseTarget> = {};\n        for (const target of targetsData?.targets || []) {\n          if (target?.name) {\n            nextTargets[target.name] = {\n              suggestedWeight: target.suggestedWeight ?? null,\n              suggestedReps: target.suggestedReps ?? null,\n              rationale: target.rationale ?? null,\n            };\n          }\n        }\n        if (Object.keys(nextTargets).length === 0) {\n          throw new Error('No targets returned');\n        }\n        setTargets(nextTargets);\n        const narrative: TargetsNarrative = {\n          encouragement: normalizeNarrativeField(targetsData?.encouragement),\n          goalSummary: normalizeNarrativeField(targetsData?.goalSummary),\n          trendSummary: normalizeNarrativeField(targetsData?.trendSummary),\n        };\n        const finalNarrative = (!narrative.encouragement && !narrative.goalSummary && !narrative.trendSummary)\n          ? buildFallbackNarrative(\n            sessionMode as SessionMode,\n            workout.name,\n            allExerciseNames,\n            { up: 0, down: 0, flat: 0, newData: allExerciseNames.length }\n          )\n          : narrative;\n        setTargetsNarrative(finalNarrative);\n        setTargetsSource('ai');\n        saveSessionTargetsMeta(workout.name, sessionRoutineId, {\n          encouragement: finalNarrative.encouragement,\n          goalSummary: finalNarrative.goalSummary,\n          trendSummary: finalNarrative.trendSummary,\n          source: 'ai',\n          sessionMode\n        });\n        setTargetsLoading(false);\n      } catch (error: any) {\n        if (!isActive) return;\n        console.error('AI-trainer targets failed:', error);\n        const aiErrorMessage = error instanceof Error ? error.message : 'AI-trainer request failed.';\n        try {\n          const fallbackResult = await computeFallbackTargets();\n          if (!isActive) return;\n          setTargets(fallbackResult.targets);\n          setTargetsNarrative(fallbackResult.narrative);\n          setTargetsSource('fallback');\n          saveSessionTargetsMeta(workout.name, sessionRoutineId, {\n            encouragement: fallbackResult.narrative.encouragement,\n            goalSummary: fallbackResult.narrative.goalSummary,\n            trendSummary: fallbackResult.narrative.trendSummary,\n            source: 'fallback',\n            sessionMode\n          });\n          setTargetsError(\n            `AI-trainer error: ${aiErrorMessage}. Using default targets for now; we should root-cause this.`\n          );\n        } catch (fallbackError) {\n          if (!isActive) return;\n          setTargetsSource('fallback');\n          setTargetsError(\n            `AI-trainer error: ${aiErrorMessage}. Fallback targets also failed; we should root-cause this.`\n          );\n        } finally {\n          setTargetsLoading(false);\n        }\n      }\n    };\n\n    fetchTargets();\n\n    return () => {\n      isActive = false;\n      controller.abort();\n    };\n  }, [workout, isPreview, sessionMode]);\n\n  const handleDeleteClick = () => {\n    setShowDeleteModal(true);\n  };\n\n  const handleConfirmDelete = async () => {\n    if (!routineId) return;\n\n    setDeleting(true);\n    try {\n      const response = await fetch(`/api/routines/${routineId}`, {\n        method: 'DELETE'\n      });\n\n      if (!response.ok) {\n        throw new Error('Failed to delete routine');\n      }\n\n      // Redirect to routines\n      router.push('/routines');\n    } catch (error) {\n      console.error('Error deleting routine:', error);\n      alert('Failed to delete routine. Please try again.');\n      setDeleting(false);\n    }\n  };\n\n  const handleCancelDelete = () => {\n    setShowDeleteModal(false);\n  };\n\n  const openHistory = (names: string[]) => {\n    setHistoryExerciseNames(names);\n    setShowHistory(true);\n  };\n\n  const closeHistory = () => {\n    setShowHistory(false);\n    setHistoryExerciseNames([]);\n  };\n\n  const handleModeSelect = (mode: SessionMode) => {\n    const nextParams = new URLSearchParams(searchParams.toString());\n    nextParams.set('preview', '1');\n    nextParams.set('mode', mode);\n    router.replace(`/workout/${encodeURIComponent(params.name as string)}?${nextParams.toString()}`);\n  };\n\n  const handleModeReset = () => {\n    const nextParams = new URLSearchParams(searchParams.toString());\n    nextParams.delete('mode');\n    nextParams.set('preview', '1');\n    router.replace(`/workout/${encodeURIComponent(params.name as string)}?${nextParams.toString()}`);\n  };\n\n  if (loading) {\n    return (\n      <div className=\"min-h-screen bg-zinc-900 flex items-center justify-center p-4\">\n        <div className=\"text-white text-2xl\">Loading workout...</div>\n      </div>\n    );\n  }\n\n  if (!workout) {\n    return (\n      <div className=\"min-h-screen bg-zinc-900 flex items-center justify-center p-4\">\n        <div className=\"text-center\">\n          <div className=\"text-white text-2xl mb-4\">Workout not found</div>\n          <Link href=\"/routines\" className=\"text-blue-400 hover:text-blue-300\">\n            Back to routines\n          </Link>\n        </div>\n      </div>\n    );\n  }\n\n  if (isPreview && !sessionMode) {\n    return (\n      <div className=\"min-h-screen bg-zinc-900 p-4\">\n        <div className=\"max-w-xl mx-auto\">\n          <div className=\"mt-8 bg-zinc-800 border border-zinc-700 rounded-lg p-6\">\n            <div className=\"text-zinc-400 text-sm mb-2\">Before you preview</div>\n            <h1 className=\"text-3xl font-bold text-white mb-3\">How are you feeling today?</h1>\n            <p className=\"text-zinc-400 mb-6\">\n              Pick the vibe for this session so we can set targets for today.\n            </p>\n            <div className=\"space-y-3\">\n              <button\n                onClick={() => handleModeSelect(SESSION_MODES.progress)}\n                className=\"w-full text-left bg-emerald-700/80 hover:bg-emerald-600 text-white px-4 py-4 rounded-lg font-semibold transition-colors\"\n              >\n                Progress\n                <div className=\"text-emerald-200 text-sm font-normal\">Push for some wins today.</div>\n              </button>\n              <button\n                onClick={() => handleModeSelect(SESSION_MODES.maintenance)}\n                className=\"w-full text-left bg-blue-700/70 hover:bg-blue-600 text-white px-4 py-4 rounded-lg font-semibold transition-colors\"\n              >\n                Maintenance\n                <div className=\"text-blue-200 text-sm font-normal\">Hold steady and keep the groove.</div>\n              </button>\n              <button\n                onClick={() => handleModeSelect(SESSION_MODES.light)}\n                className=\"w-full text-left bg-zinc-700 hover:bg-zinc-600 text-white px-4 py-4 rounded-lg font-semibold transition-colors\"\n              >\n                Light\n                <div className=\"text-zinc-300 text-sm font-normal\">Deload or just move a bit.</div>\n              </button>\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen bg-zinc-900 p-4 pb-32\">\n      <div className=\"max-w-2xl mx-auto\">\n        {/* Navigation */}\n        <div className=\"mb-6\">\n          <div className=\"flex items-center justify-between mb-4\">\n            <Link href=\"/routines\" className=\"text-blue-400 hover:text-blue-300\">\n              ‚Üê Back to routines\n            </Link>\n            {routineId && !isPublicRoutine && !isPreview && (\n              <div className=\"flex gap-2\">\n                <Link\n                  href={`/routines/${routineId}/edit`}\n                  className=\"bg-blue-900/50 hover:bg-blue-900 text-blue-300 hover:text-blue-100 px-4 py-2 rounded text-sm font-semibold transition-colors\"\n                >\n                  Edit Routine\n                </Link>\n                <button\n                  onClick={handleDeleteClick}\n                  className=\"bg-red-900/50 hover:bg-red-900 text-red-300 hover:text-red-100 px-4 py-2 rounded text-sm font-semibold transition-colors\"\n                >\n                  Delete Routine\n                </button>\n              </div>\n            )}\n          </div>\n          <h1 className=\"text-4xl font-bold text-white\">{workout.name}</h1>\n        </div>\n\n        {isPreview && (\n          <section className=\"mb-8\">\n            <Card paddingClassName=\"p-5\" borderClassName=\"border-emerald-600\">\n              <div className=\"flex items-start justify-between\">\n                <div>\n                  <div className=\"text-emerald-400 text-xs mb-1\">Session Type</div>\n                  <div className=\"text-white text-lg font-semibold\">\n                    {SESSION_MODE_LABELS[startMode]}\n                  </div>\n                  <div className=\"text-zinc-400 text-sm mt-1\">\n                    {SESSION_MODE_DESCRIPTIONS[startMode]}\n                  </div>\n                </div>\n                <button\n                  onClick={handleModeReset}\n                  className=\"text-xs text-emerald-300 hover:text-emerald-200 bg-zinc-900 px-3 py-2 rounded\"\n                >\n                  Change\n                </button>\n              </div>\n            </Card>\n          </section>\n        )}\n\n        {isPreview && (\n          <section className=\"mb-8\">\n            <SectionHeader\n              icon=\"üéØ\"\n              iconClassName=\"text-amber-400\"\n              label=\"AI-Trainer Targets\"\n              className=\"text-2xl\"\n            />\n            <Card paddingClassName=\"p-5\" borderClassName=\"border-amber-600\">\n              <div className=\"flex items-center justify-between gap-4\">\n                <p className=\"text-zinc-200 font-semibold\">\n                  {targetsLoading\n                    ? `Loading AI-trainer targets${loadingDots}`\n                    : targetsSource === 'fallback'\n                      ? 'AI-trainer unavailable. Using formula-based targets for this session.'\n                      : 'AI-trainer targets ready.'}\n                </p>\n                {targetsLoading && (\n                  <div className=\"text-xs text-amber-300 bg-zinc-900 px-3 py-2 rounded\">\n                    Building your session plan\n                  </div>\n                )}\n              </div>\n              {!targetsLoading && (\n                (targetsNarrative.encouragement || targetsNarrative.goalSummary || targetsNarrative.trendSummary) && (\n                  <div className=\"mt-3 space-y-2 text-sm text-zinc-300 leading-relaxed\">\n                    {targetsNarrative.encouragement && <p>{targetsNarrative.encouragement}</p>}\n                    {targetsNarrative.goalSummary && <p>{targetsNarrative.goalSummary}</p>}\n                    {targetsNarrative.trendSummary && <p>{targetsNarrative.trendSummary}</p>}\n                  </div>\n                )\n              )}\n            </Card>\n            {!targetsLoading && lastWorkoutReport && (\n              <div className=\"mt-4\">\n                <button\n                  type=\"button\"\n                  onClick={() => setShowLastWorkoutReport((prev) => !prev)}\n                  className=\"text-xs text-amber-300 hover:text-amber-200 bg-zinc-900 px-3 py-2 rounded\"\n                >\n                  {showLastWorkoutReport ? 'Hide last session report' : 'View last session report'}\n                </button>\n                {showLastWorkoutReport && (\n                  <div className=\"mt-3 bg-zinc-900 rounded p-3 text-zinc-300 text-sm whitespace-pre-line border border-amber-700/40\">\n                    {lastWorkoutReport}\n                  </div>\n                )}\n              </div>\n            )}\n            <p className=\"text-zinc-400 text-sm mt-3\">\n              Targets are generated with your{' '}\n              <Link href=\"/profile\" className=\"text-amber-300 hover:text-amber-200 underline\">\n                background and fitness goals\n              </Link>{' '}\n              and your{' '}\n              <button\n                type=\"button\"\n                onClick={() => openHistory(allExerciseNames)}\n                className=\"text-amber-300 hover:text-amber-200 underline\"\n              >\n                exercise history\n              </button>\n              .\n            </p>\n            {targetsError && (\n              <div className=\"text-red-400 text-sm mt-3\">{targetsError}</div>\n            )}\n          </section>\n        )}\n\n        {/* Pre-Workout Stretches */}\n        <section className=\"mb-8\">\n          <SectionHeader\n            icon=\"üü¢\"\n            iconClassName=\"text-green-500\"\n            label=\"Pre-Workout Stretches\"\n            className=\"text-2xl\"\n          />\n          <div className=\"text-zinc-400 text-sm mb-4\">Dynamic stretches ¬∑ 5-8 minutes</div>\n          <div className=\"grid grid-cols-2 gap-3\">\n            {workout.preWorkoutStretches.map((stretch, index) => (\n              <StretchCard key={index} stretch={stretch} index={index} />\n            ))}\n          </div>\n        </section>\n\n        {/* Exercises */}\n        <section className=\"mb-8\">\n          <SectionHeader\n            icon=\"üî•\"\n            iconClassName=\"text-orange-500\"\n            label=\"Exercises\"\n            className=\"text-2xl\"\n          />\n          <div className=\"text-zinc-400 text-sm mb-4\">{workout.exercises.length} exercises</div>\n          <div className=\"space-y-4\">\n            {workout.exercises.map((exercise, index) => (\n              <ExerciseCard\n                key={index}\n                exercise={exercise}\n                index={index}\n                onShowHistory={openHistory}\n                targets={targets}\n                showTargets={isPreview}\n                lastSessionMaxes={lastSessionMaxes}\n                weightUnit={weightUnit}\n                heightUnit={heightUnit}\n              />\n            ))}\n          </div>\n        </section>\n\n        {/* Cardio (Optional) */}\n        {workout.cardio && (\n          <section className=\"mb-8\">\n            <SectionHeader\n              icon=\"‚ù§Ô∏è\"\n              iconClassName=\"text-red-500\"\n              label=\"Cardio (Optional)\"\n              className=\"text-2xl\"\n            />\n            <Card paddingClassName=\"p-5\" borderClassName=\"border-red-600\">\n              <div className=\"flex items-start justify-between mb-3\">\n                <div className=\"flex-1\">\n                  <h3 className=\"text-xl font-bold text-white mb-2\">{workout.cardio.type}</h3>\n                  <div className=\"text-blue-400 text-lg mb-1\">{workout.cardio.duration}</div>\n                  <div className=\"text-zinc-400 text-sm\">{workout.cardio.intensity}</div>\n                </div>\n              </div>\n              <div className=\"bg-zinc-900 rounded p-3\">\n                <div className=\"text-zinc-500 text-xs mb-1\">Tips</div>\n                <p className=\"text-zinc-300 text-sm\">{workout.cardio.tips}</p>\n              </div>\n            </Card>\n          </section>\n        )}\n\n        {/* Post-Workout Stretches */}\n        <section className=\"mb-8\">\n          <SectionHeader\n            icon=\"üîµ\"\n            iconClassName=\"text-blue-500\"\n            label=\"Post-Workout Stretches\"\n            className=\"text-2xl\"\n          />\n          <div className=\"text-zinc-400 text-sm mb-4\">Static stretches ¬∑ 8-10 minutes</div>\n          <div className=\"grid grid-cols-2 gap-3\">\n            {workout.postWorkoutStretches.map((stretch, index) => (\n              <StretchCard key={index} stretch={stretch} index={index} />\n            ))}\n          </div>\n        </section>\n\n        {/* Start Workout Button - Fixed at bottom */}\n        <BottomActionBar maxWidthClassName=\"max-w-2xl\">\n          <button\n            onClick={() => {\n              const query = new URLSearchParams();\n              if (routineId) query.set('routineId', String(routineId));\n              const queryString = query.toString();\n              initWorkoutSession(workout.name, routineId);\n              const url = `/stretches/${encodeURIComponent(workout.name)}${queryString ? `?${queryString}` : ''}`;\n              router.push(url);\n            }}\n            className=\"w-full bg-green-600 hover:bg-green-700 text-white py-4 rounded-lg text-xl font-bold transition-colors\"\n          >\n            Start Workout\n          </button>\n        </BottomActionBar>\n      </div>\n\n      {/* Delete Confirmation Modal */}\n      {showDeleteModal && (\n        <div className=\"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center p-4 z-50\">\n          <div className=\"bg-zinc-800 rounded-lg p-6 max-w-md w-full border-2 border-red-600\">\n            <h2 className=\"text-2xl font-bold text-white mb-4\">Delete Routine</h2>\n            <p className=\"text-zinc-300 mb-6\">\n              This will permanently delete this routine. Are you sure you want to proceed?\n            </p>\n\n            <div className=\"grid grid-cols-2 gap-3\">\n              <button\n                onClick={handleCancelDelete}\n                disabled={deleting}\n                className=\"bg-zinc-700 hover:bg-zinc-600 disabled:bg-zinc-800 disabled:cursor-not-allowed text-white py-3 rounded-lg font-semibold transition-colors\"\n              >\n                Cancel\n              </button>\n              <button\n                onClick={handleConfirmDelete}\n                disabled={deleting}\n                className=\"bg-red-600 hover:bg-red-700 disabled:bg-red-800 disabled:cursor-not-allowed text-white py-3 rounded-lg font-bold transition-colors\"\n              >\n                {deleting ? 'Deleting...' : 'Delete'}\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n\n      <ExerciseHistoryModal\n        open={showHistory}\n        onClose={closeHistory}\n        exerciseNames={historyExerciseNames}\n        title=\"Exercise History\"\n        targets={historyTargets}\n        weightUnit={weightUnit}\n        heightUnit={heightUnit}\n      />\n    </div>\n  );\n}\n\nfunction StretchCard({ stretch, index }: { stretch: Stretch; index: number }) {\n  const tips = getFormTips(stretch.tips);\n  const videoHref = getVideoUrl(stretch.name, stretch.videoUrl);\n\n  return (\n    <div className=\"bg-zinc-800 rounded-lg p-3 border border-zinc-700\">\n      <div className=\"text-zinc-500 text-xs mb-1\">#{index + 1}</div>\n      <h3 className=\"text-sm font-semibold text-white mb-1\">{stretch.name}</h3>\n      <div className=\"text-blue-400 text-xs mb-2\">\n        {formatStretchTimer(stretch.timerSeconds)}\n      </div>\n      <p className=\"text-zinc-400 text-xs mb-2 leading-relaxed\">{tips}</p>\n      <a\n        href={videoHref}\n        target=\"_blank\"\n        rel=\"noopener noreferrer\"\n        className=\"text-red-500 hover:text-red-400 text-xs font-medium px-2 py-1 bg-zinc-900 rounded inline-block\"\n      >\n        üì∫ Video\n      </a>\n    </div>\n  );\n}\n\nfunction TargetCard({\n  baseWeight,\n  baseReps,\n  suggestion,\n  isBodyweight,\n  isMachine,\n  primaryMetric,\n  metricUnit,\n  weightUnit,\n  heightUnit,\n  lastSession,\n}: {\n  baseWeight: number;\n  baseReps: number;\n  suggestion?: ExerciseTarget;\n  isBodyweight?: boolean;\n  isMachine?: boolean;\n  primaryMetric?: ExercisePrimaryMetric;\n  metricUnit?: string | null;\n  weightUnit: WeightUnit;\n  heightUnit: HeightUnit;\n  lastSession?: LastSessionMax;\n}) {\n  const metricInfo = {\n    primaryMetric: resolvePrimaryMetric(primaryMetric, isBodyweight),\n    metricUnit: metricUnit ?? null,\n  };\n  const targetWeight = suggestion?.suggestedWeight ?? baseWeight;\n  const targetReps = suggestion?.suggestedReps ?? baseReps;\n  const lastWeight = lastSession?.weight ?? null;\n  const lastReps = lastSession?.reps ?? null;\n  const weightDelta = lastWeight !== null ? targetWeight - lastWeight : null;\n  const repsDelta = lastReps !== null ? targetReps - lastReps : null;\n  const showMetric = !isRepsOnlyMetric(metricInfo.primaryMetric);\n  const weightLabel = getMetricLabel(\n    metricInfo.primaryMetric,\n    metricInfo.metricUnit,\n    weightUnit,\n    heightUnit,\n    isMachine\n  );\n  const lastSummaryParts: string[] = [];\n  if (showMetric) {\n    if (lastWeight !== null) {\n      lastSummaryParts.push(\n        formatMetricDisplay(\n          lastWeight,\n          metricInfo.primaryMetric,\n          metricInfo.metricUnit,\n          weightUnit,\n          heightUnit,\n          isMachine\n        )\n      );\n    }\n    if (lastReps !== null) lastSummaryParts.push(`${lastReps} reps`);\n  } else {\n    if (lastReps !== null) lastSummaryParts.push(`${lastReps} reps`);\n    else if (lastWeight !== null) {\n      lastSummaryParts.push(\n        formatMetricDisplay(\n          lastWeight,\n          metricInfo.primaryMetric,\n          metricInfo.metricUnit,\n          weightUnit,\n          heightUnit,\n          isMachine\n        )\n      );\n    }\n  }\n  const lastSummary = lastSummaryParts.join(' ¬∑ ');\n\n  const formatDelta = (delta: number) => `${delta > 0 ? '+' : ''}${delta}`;\n  const deltaClass = (delta: number) => (delta > 0 ? 'text-emerald-300' : 'text-amber-300');\n\n  return (\n    <div className=\"bg-zinc-900 rounded p-3 border border-emerald-800\">\n      <div className=\"text-emerald-400 text-xs mb-2\">Today&apos;s target</div>\n      <div className={`grid ${showMetric ? 'grid-cols-2' : 'grid-cols-1'} gap-3`}>\n        {showMetric && (\n          <div>\n            <div className=\"text-zinc-500 text-xs mb-1\">{weightLabel}</div>\n            <div className=\"text-white font-semibold text-lg\">\n              {formatMetricDisplay(\n                targetWeight,\n                metricInfo.primaryMetric,\n                metricInfo.metricUnit,\n                weightUnit,\n                heightUnit,\n                isMachine\n              )}\n              {weightDelta !== null && weightDelta !== 0 && (\n                <span className={`ml-2 text-sm ${deltaClass(weightDelta)}`}>({formatDelta(weightDelta)})</span>\n              )}\n            </div>\n          </div>\n        )}\n        <div>\n          <div className=\"text-zinc-500 text-xs mb-1\">Reps</div>\n          <div className=\"text-white font-semibold text-lg\">\n            {targetReps}\n            {repsDelta !== null && repsDelta !== 0 && (\n              <span className={`ml-2 text-sm ${deltaClass(repsDelta)}`}>({formatDelta(repsDelta)})</span>\n            )}\n          </div>\n        </div>\n      </div>\n      {lastSummary && (\n        <div className=\"text-zinc-500 text-xs mt-2\">\n          Last time max: {lastSummary}\n        </div>\n      )}\n      {suggestion?.rationale && (\n        <div className=\"text-zinc-400 text-xs mt-2\">{suggestion.rationale}</div>\n      )}\n    </div>\n  );\n}\n\nfunction ExerciseCard({\n  exercise,\n  index,\n  onShowHistory,\n  targets,\n  showTargets,\n  lastSessionMaxes,\n  weightUnit,\n  heightUnit,\n}: {\n  exercise: Exercise;\n  index: number;\n  onShowHistory: (names: string[]) => void;\n  targets: Record<string, ExerciseTarget>;\n  showTargets: boolean;\n  lastSessionMaxes: Record<string, LastSessionMax>;\n  weightUnit: WeightUnit;\n  heightUnit: HeightUnit;\n}) {\n  if (exercise.type === EXERCISE_TYPES.single) {\n    const tips = getFormTips(exercise.tips);\n    const videoHref = getVideoUrl(exercise.name, exercise.videoUrl);\n    const metricInfo = {\n      primaryMetric: resolvePrimaryMetric(exercise.primaryMetric, exercise.isBodyweight),\n      metricUnit: exercise.metricUnit ?? null,\n    };\n    const showMetric = !isRepsOnlyMetric(metricInfo.primaryMetric);\n    const isMachine = !!exercise.isMachine;\n    const metricLabel = getMetricLabel(\n      metricInfo.primaryMetric,\n      metricInfo.metricUnit,\n      weightUnit,\n      heightUnit,\n      isMachine\n    );\n    const showWarmup = showMetric\n      && metricInfo.primaryMetric === 'weight'\n      && (exercise.hasWarmup ?? !exercise.isBodyweight);\n\n    return (\n      <div className=\"bg-zinc-800 rounded-lg p-5 border-2 border-zinc-700\">\n        <div className=\"flex items-start justify-between mb-3\">\n          <div className=\"flex-1\">\n            <div className=\"text-zinc-500 text-sm mb-1\">Exercise #{index + 1}</div>\n            <h3 className=\"text-xl font-bold text-white mb-2\">{exercise.name}</h3>\n          </div>\n          <div className=\"flex flex-col gap-2\">\n            <a\n              href={videoHref}\n              target=\"_blank\"\n              rel=\"noopener noreferrer\"\n              className=\"text-red-500 hover:text-red-400 text-sm font-medium px-3 py-2 bg-zinc-900 rounded text-center\"\n            >\n              üì∫ Video\n            </a>\n            <button\n              onClick={() => onShowHistory([exercise.name])}\n              className=\"text-blue-300 hover:text-blue-200 text-sm font-medium px-3 py-2 bg-zinc-900 rounded\"\n            >\n              üìà History\n            </button>\n          </div>\n        </div>\n\n        <div className=\"space-y-2 mb-3\">\n          {showMetric && (\n            <div className={`grid ${showWarmup ? 'grid-cols-2' : 'grid-cols-1'} gap-3`}>\n              {showWarmup && (\n                <div className=\"bg-green-950 border border-green-800 rounded p-3\">\n                  <div className=\"text-green-400 text-xs mb-1\">Warmup {metricLabel}</div>\n                  <div className=\"text-green-300 font-bold text-2xl\">\n                    {formatMetricDisplay(\n                      exercise.warmupWeight,\n                      metricInfo.primaryMetric,\n                      metricInfo.metricUnit,\n                      weightUnit,\n                      heightUnit,\n                      isMachine\n                    )}\n                  </div>\n                </div>\n              )}\n              <div className=\"bg-orange-950 border border-orange-800 rounded p-3\">\n                <div className=\"text-orange-400 text-xs mb-1\">Target {metricLabel}</div>\n                <div className=\"text-orange-300 font-bold text-2xl\">\n                  {formatMetricDisplay(\n                    exercise.targetWeight,\n                    metricInfo.primaryMetric,\n                    metricInfo.metricUnit,\n                    weightUnit,\n                    heightUnit,\n                    isMachine\n                  )}\n                </div>\n              </div>\n            </div>\n          )}\n\n          {/* Sets & Rest */}\n          <div className=\"grid grid-cols-2 gap-3\">\n            <div className=\"bg-zinc-900 rounded p-3\">\n              <div className=\"text-zinc-500 text-xs mb-1\">Rest Time</div>\n              <div className=\"text-white font-semibold text-2xl\">{exercise.restTime}s</div>\n            </div>\n            <div className=\"bg-zinc-900 rounded p-3\">\n              <div className=\"text-zinc-500 text-xs mb-1\">Sets √ó Reps</div>\n              <div className=\"text-white font-semibold text-2xl\">\n                {exercise.sets} √ó {exercise.targetReps}\n              </div>\n            </div>\n          </div>\n        </div>\n\n        {showTargets && (\n          <TargetCard\n            baseWeight={exercise.targetWeight}\n            baseReps={exercise.targetReps}\n            suggestion={targets[exercise.name]}\n            isBodyweight={exercise.isBodyweight}\n            isMachine={exercise.isMachine}\n            primaryMetric={exercise.primaryMetric}\n            metricUnit={exercise.metricUnit}\n            weightUnit={weightUnit}\n            heightUnit={heightUnit}\n            lastSession={lastSessionMaxes[exercise.name]}\n          />\n        )}\n\n        <div className=\"bg-zinc-900 rounded p-3\">\n          <div className=\"text-zinc-500 text-xs mb-1\">Form Tips</div>\n          <p className=\"text-zinc-300 text-sm\">{tips}</p>\n        </div>\n      </div>\n    );\n  }\n\n  // B2B Exercise\n  const [ex1, ex2] = exercise.exercises;\n  const ex1Tips = getFormTips(ex1.tips);\n  const ex2Tips = getFormTips(ex2.tips);\n  const ex1VideoHref = getVideoUrl(ex1.name, ex1.videoUrl);\n  const ex2VideoHref = getVideoUrl(ex2.name, ex2.videoUrl);\n  const ex1MetricInfo = {\n    primaryMetric: resolvePrimaryMetric(ex1.primaryMetric, ex1.isBodyweight),\n    metricUnit: ex1.metricUnit ?? null,\n  };\n  const ex2MetricInfo = {\n    primaryMetric: resolvePrimaryMetric(ex2.primaryMetric, ex2.isBodyweight),\n    metricUnit: ex2.metricUnit ?? null,\n  };\n  const ex1ShowMetric = !isRepsOnlyMetric(ex1MetricInfo.primaryMetric);\n  const ex2ShowMetric = !isRepsOnlyMetric(ex2MetricInfo.primaryMetric);\n  const ex1Machine = !!ex1.isMachine;\n  const ex2Machine = !!ex2.isMachine;\n  const ex1MetricLabel = getMetricLabel(\n    ex1MetricInfo.primaryMetric,\n    ex1MetricInfo.metricUnit,\n    weightUnit,\n    heightUnit,\n    ex1Machine\n  );\n  const ex2MetricLabel = getMetricLabel(\n    ex2MetricInfo.primaryMetric,\n    ex2MetricInfo.metricUnit,\n    weightUnit,\n    heightUnit,\n    ex2Machine\n  );\n  const ex1ShowWarmup = ex1ShowMetric\n    && ex1MetricInfo.primaryMetric === 'weight'\n    && (ex1.hasWarmup ?? !ex1.isBodyweight);\n  const ex2ShowWarmup = ex2ShowMetric\n    && ex2MetricInfo.primaryMetric === 'weight'\n    && (ex2.hasWarmup ?? !ex2.isBodyweight);\n\n  return (\n    <div className=\"bg-zinc-800 rounded-lg p-5 border-2 border-purple-700\">\n      <div className=\"flex items-center justify-between mb-3\">\n        <div className=\"text-purple-400 text-sm font-bold\">\n          üîÑ B2B SUPERSET ¬∑ Exercise #{index + 1}\n        </div>\n        <button\n          onClick={() => onShowHistory([ex1.name, ex2.name])}\n          className=\"text-blue-300 hover:text-blue-200 text-xs font-semibold px-3 py-2 bg-zinc-900 rounded\"\n        >\n          üìà History\n        </button>\n      </div>\n\n      {/* Exercise 1 */}\n      <div className=\"mb-3\">\n        <div className=\"flex items-start justify-between mb-3\">\n          <div className=\"flex-1\">\n            <div className=\"text-zinc-500 text-xs mb-1\">Exercise 1 of 2</div>\n            <h3 className=\"text-lg font-bold text-white mb-2\">{ex1.name}</h3>\n          </div>\n          <a\n            href={ex1VideoHref}\n            target=\"_blank\"\n            rel=\"noopener noreferrer\"\n            className=\"text-red-500 hover:text-red-400 text-sm font-medium px-3 py-2 bg-zinc-900 rounded\"\n          >\n            üì∫ Video\n          </a>\n        </div>\n\n        <div className=\"space-y-2\">\n          {ex1ShowMetric && (\n            <div className={`grid ${ex1ShowWarmup ? 'grid-cols-2' : 'grid-cols-1'} gap-2`}>\n              {ex1ShowWarmup && (\n                <div className=\"bg-green-950 border border-green-800 rounded p-2\">\n                  <div className=\"text-green-400 text-xs mb-1\">Warmup {ex1MetricLabel}</div>\n                  <div className=\"text-green-300 font-bold text-xl\">\n                    {formatMetricDisplay(\n                      ex1.warmupWeight,\n                      ex1MetricInfo.primaryMetric,\n                      ex1MetricInfo.metricUnit,\n                      weightUnit,\n                      heightUnit,\n                      ex1Machine\n                    )}\n                  </div>\n                </div>\n              )}\n              <div className=\"bg-orange-950 border border-orange-800 rounded p-2\">\n                <div className=\"text-orange-400 text-xs mb-1\">Target {ex1MetricLabel}</div>\n                <div className=\"text-orange-300 font-bold text-xl\">\n                  {formatMetricDisplay(\n                    ex1.targetWeight,\n                    ex1MetricInfo.primaryMetric,\n                    ex1MetricInfo.metricUnit,\n                    weightUnit,\n                    heightUnit,\n                    ex1Machine\n                  )}\n                </div>\n              </div>\n            </div>\n          )}\n\n          {/* Sets √ó Reps and Tips */}\n          <div className=\"grid grid-cols-2 gap-2\">\n            <div className=\"bg-zinc-900 rounded p-2\">\n              <div className=\"text-zinc-500 text-xs mb-1\">Sets √ó Reps</div>\n              <div className=\"text-white font-semibold text-xl\">\n                {ex1.sets} √ó {ex1.targetReps}\n              </div>\n            </div>\n            <div className=\"bg-zinc-900 rounded p-2\">\n              <div className=\"text-zinc-500 text-xs mb-1\">Form Tips</div>\n              <p className=\"text-zinc-400 text-xs\">{ex1Tips}</p>\n            </div>\n          </div>\n        </div>\n\n        {showTargets && (\n          <div className=\"mt-2\">\n            <TargetCard\n              baseWeight={ex1.targetWeight}\n              baseReps={ex1.targetReps}\n              suggestion={targets[ex1.name]}\n              isBodyweight={ex1.isBodyweight}\n              isMachine={ex1.isMachine}\n              primaryMetric={ex1.primaryMetric}\n              metricUnit={ex1.metricUnit}\n              weightUnit={weightUnit}\n              heightUnit={heightUnit}\n              lastSession={lastSessionMaxes[ex1.name]}\n            />\n          </div>\n        )}\n      </div>\n\n      {/* Rest Time Card */}\n      <div className=\"my-4\">\n        <div className=\"bg-purple-950 border-2 border-purple-700 rounded-lg p-4\">\n          <div className=\"text-center\">\n            <div className=\"text-purple-400 text-sm mb-1\">Rest Between Exercises</div>\n            <div className=\"text-purple-300 font-bold text-3xl\">{exercise.restTime}s</div>\n          </div>\n        </div>\n      </div>\n\n      {/* Exercise 2 */}\n      <div className=\"mt-3\">\n        <div className=\"flex items-start justify-between mb-3\">\n          <div className=\"flex-1\">\n            <div className=\"text-zinc-500 text-xs mb-1\">Exercise 2 of 2</div>\n            <h3 className=\"text-lg font-bold text-white mb-2\">{ex2.name}</h3>\n          </div>\n          <a\n            href={ex2VideoHref}\n            target=\"_blank\"\n            rel=\"noopener noreferrer\"\n            className=\"text-red-500 hover:text-red-400 text-sm font-medium px-3 py-2 bg-zinc-900 rounded\"\n          >\n            üì∫ Video\n          </a>\n        </div>\n\n        <div className=\"space-y-2\">\n          {ex2ShowMetric && (\n            <div className={`grid ${ex2ShowWarmup ? 'grid-cols-2' : 'grid-cols-1'} gap-2`}>\n              {ex2ShowWarmup && (\n                <div className=\"bg-green-950 border border-green-800 rounded p-2\">\n                  <div className=\"text-green-400 text-xs mb-1\">Warmup {ex2MetricLabel}</div>\n                  <div className=\"text-green-300 font-bold text-xl\">\n                    {formatMetricDisplay(\n                      ex2.warmupWeight,\n                      ex2MetricInfo.primaryMetric,\n                      ex2MetricInfo.metricUnit,\n                      weightUnit,\n                      heightUnit,\n                      ex2Machine\n                    )}\n                  </div>\n                </div>\n              )}\n              <div className=\"bg-orange-950 border border-orange-800 rounded p-2\">\n                <div className=\"text-orange-400 text-xs mb-1\">Target {ex2MetricLabel}</div>\n                <div className=\"text-orange-300 font-bold text-xl\">\n                  {formatMetricDisplay(\n                    ex2.targetWeight,\n                    ex2MetricInfo.primaryMetric,\n                    ex2MetricInfo.metricUnit,\n                    weightUnit,\n                    heightUnit,\n                    ex2Machine\n                  )}\n                </div>\n              </div>\n            </div>\n          )}\n\n          {/* Sets √ó Reps and Tips */}\n          <div className=\"grid grid-cols-2 gap-2\">\n            <div className=\"bg-zinc-900 rounded p-2\">\n              <div className=\"text-zinc-500 text-xs mb-1\">Sets √ó Reps</div>\n              <div className=\"text-white font-semibold text-xl\">\n                {ex2.sets} √ó {ex2.targetReps}\n              </div>\n            </div>\n            <div className=\"bg-zinc-900 rounded p-2\">\n              <div className=\"text-zinc-500 text-xs mb-1\">Form Tips</div>\n              <p className=\"text-zinc-400 text-xs\">{ex2Tips}</p>\n            </div>\n          </div>\n        </div>\n\n        {showTargets && (\n          <div className=\"mt-2\">\n            <TargetCard\n              baseWeight={ex2.targetWeight}\n              baseReps={ex2.targetReps}\n              suggestion={targets[ex2.name]}\n              isBodyweight={ex2.isBodyweight}\n              isMachine={ex2.isMachine}\n              primaryMetric={ex2.primaryMetric}\n              metricUnit={ex2.metricUnit}\n              weightUnit={weightUnit}\n              heightUnit={heightUnit}\n              lastSession={lastSessionMaxes[ex2.name]}\n            />\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}