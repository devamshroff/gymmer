module.exports=[56704,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-async-storage.external.js",()=>require("next/dist/server/app-render/work-async-storage.external.js"))},32319,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-unit-async-storage.external.js",()=>require("next/dist/server/app-render/work-unit-async-storage.external.js"))},20635,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/action-async-storage.external.js",()=>require("next/dist/server/app-render/action-async-storage.external.js"))},36313,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.HooksClientContext},18341,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.ServerInsertedHtml},10585,a=>{"use strict";let b=["lower body compound","upper body compound","full body compound","chest","back","shoulders","biceps","triceps","forearms","core","lower back","glutes","quads","hamstrings","calves","hip flexors","adductors","abductors","unknown"],c=[...b],d=[...b],e=[...c];function f(a,b,c=2){if(!a)return[];try{let d=JSON.parse(a);return function(a,b,c=2){let d=Array.isArray(a)?a:"string"==typeof a?[a]:[];if(0===d.length)return[];let e=d.map(a=>"string"==typeof a?a.trim().toLowerCase():"").filter(Boolean),f=b?e.filter(a=>b.includes(a)):e,g=[];for(let a of f)if(g.includes(a)||g.push(a),g.length>=c)break;return g}(d,b,c)}catch{return[]}}function g(a){return a.split(" ").map(a=>a?a[0].toUpperCase()+a.slice(1):a).join(" ")}a.s(["MUSCLE_GROUP_ORDER",0,d,"MUSCLE_GROUP_TAGS",0,b,"STRETCH_MUSCLE_ORDER",0,e,"STRETCH_MUSCLE_TAGS",0,c,"formatTypeLabel",()=>g,"parseTagJson",()=>f])},84975,a=>{"use strict";function b(a){if(!a||a<=0)return"Timer not set";let b=Math.floor(a/60),c=a%60;return b>0&&0===c?`${b} min`:b>0?`${b} min ${c} sec`:`${a} sec`}a.s(["formatStretchTimer",()=>b])},93787,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(10585);function e({onSubmit:a,onCancel:e}){let[f,g]=(0,c.useState)(""),[h,i]=(0,c.useState)(""),[j,k]=(0,c.useState)(""),[l,m]=(0,c.useState)(""),[n,o]=(0,c.useState)([]),[p,q]=(0,c.useState)(!1),r=async b=>{if(b.preventDefault(),!f.trim())return;let c=h.trim(),d=c?Number(c):NaN,e=Number.isFinite(d)&&d>0?Math.round(d):void 0,g=n.map(a=>a.trim()).filter(Boolean);q(!0);try{await a({name:f.trim(),timerSeconds:e,videoUrl:j.trim()||void 0,tips:l.trim()||void 0,muscleGroups:g.length?g:void 0})}finally{q(!1)}};return(0,b.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center p-4 z-50",children:(0,b.jsxs)("div",{className:"bg-zinc-800 rounded-lg p-6 max-w-md w-full border-2 border-blue-700",children:[(0,b.jsx)("h2",{className:"text-2xl font-bold text-white mb-4",children:"Create New Stretch"}),(0,b.jsxs)("form",{onSubmit:r,className:"space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)("label",{className:"text-zinc-300 text-sm font-semibold block mb-2",children:["Stretch Name ",(0,b.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,b.jsx)("input",{type:"text",value:f,onChange:a=>g(a.target.value),placeholder:"e.g., Hamstring Stretch",className:"w-full bg-zinc-900 text-white px-4 py-3 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-600",required:!0,autoFocus:!0})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-zinc-300 text-sm font-semibold block mb-2",children:"Timer (seconds)"}),(0,b.jsx)("input",{type:"number",min:"1",step:"1",value:h,onChange:a=>i(a.target.value),placeholder:"e.g., 30",className:"w-full bg-zinc-900 text-white px-4 py-3 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-600"})]}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("label",{className:"text-zinc-300 text-sm font-semibold block mb-2",children:["Muscle Groups ",(0,b.jsx)("span",{className:"text-zinc-500",children:"(up to 2)"})]}),(0,b.jsx)("div",{className:"rounded-lg border border-zinc-700 bg-zinc-900 px-3 py-2",children:0===n.length?(0,b.jsx)("span",{className:"text-zinc-500 text-sm",children:"Select muscle groups below"}):(0,b.jsx)("div",{className:"flex flex-wrap gap-2",children:n.map(a=>(0,b.jsxs)("button",{type:"button",onClick:()=>o(b=>b.filter(b=>b!==a)),className:"inline-flex items-center gap-1 rounded-full border border-blue-600/40 bg-blue-700/30 px-3 py-1 text-xs font-semibold text-blue-100 transition hover:border-blue-400 hover:bg-blue-600/60",children:[(0,d.formatTypeLabel)(a),(0,b.jsx)("span",{"aria-hidden":!0,children:"Ã—"})]},a))})}),(0,b.jsxs)("div",{className:"mt-3",children:[(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsxs)("select",{value:"",onChange:a=>{let b=a.target.value;b&&(o(a=>a.includes(b)||a.length>=2?a:[...a,b]),a.currentTarget.value="")},className:"w-full appearance-none bg-zinc-900 text-white px-4 py-2 pr-10 rounded-lg border border-zinc-700 focus:outline-none focus:ring-2 focus:ring-blue-600",children:[(0,b.jsx)("option",{value:"",disabled:!0,children:"Add a muscle group..."}),d.STRETCH_MUSCLE_TAGS.filter(a=>"unknown"!==a).map(a=>(0,b.jsx)("option",{value:a,children:(0,d.formatTypeLabel)(a)},a))]}),(0,b.jsx)("span",{className:"pointer-events-none absolute right-3 top-1/2 -translate-y-1/2 text-zinc-400",children:"â–¾"})]}),(0,b.jsx)("p",{className:"mt-2 text-xs text-zinc-500",children:"Choose up to two muscle groups."})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-zinc-300 text-sm font-semibold block mb-2",children:"Video URL"}),(0,b.jsx)("input",{type:"url",value:j,onChange:a=>k(a.target.value),placeholder:"https://youtube.com/...",className:"w-full bg-zinc-900 text-white px-4 py-3 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-600"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-zinc-300 text-sm font-semibold block mb-2",children:"Tips"}),(0,b.jsx)("textarea",{value:l,onChange:a=>m(a.target.value),placeholder:"Form tips, cues, etc.",rows:3,className:"w-full bg-zinc-900 text-white px-4 py-3 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-600 resize-none"})]}),(0,b.jsx)("p",{className:"text-xs text-zinc-400",children:"Duration, video URL, tips, and muscle groups will be auto-filled with AI if empty."}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-3 pt-2",children:[(0,b.jsx)("button",{type:"button",onClick:e,className:"bg-zinc-700 hover:bg-zinc-600 text-white py-3 rounded-lg font-semibold transition-colors",children:"Cancel"}),(0,b.jsx)("button",{type:"submit",disabled:!f.trim()||p,className:"bg-blue-700 hover:bg-blue-800 disabled:bg-blue-900 disabled:cursor-not-allowed text-white py-3 rounded-lg font-bold transition-colors",children:p?"Creating...":"Create & Select"})]})]})]})})}var f=a.i(84975);let g="other";function h(a){return(0,d.parseTagJson)(a.muscle_groups,d.STRETCH_MUSCLE_TAGS)}function i({onSelect:a,onCancel:i,filterType:j,title:k}){let[l,m]=(0,c.useState)([]),[n,o]=(0,c.useState)(""),[p,q]=(0,c.useState)(!0),[r,s]=(0,c.useState)(!1);(0,c.useEffect)(()=>{t()},[]);let t=async()=>{try{let a=await fetch("/api/stretches"),b=await a.json();m(b.stretches)}catch(a){console.error("Error fetching stretches:",a)}finally{q(!1)}},u=async b=>{try{let c=await fetch("/api/stretches",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(b)});if(!c.ok)throw Error("Failed to create stretch");let d=await c.json();await t();let e=b.muscleGroups?.length?JSON.stringify(b.muscleGroups):null,f={id:d.id,name:b.name,timer_seconds:"number"==typeof d.timer_seconds?d.timer_seconds:null,muscle_groups:e,video_url:b.videoUrl||null,tips:"string"==typeof d.tips?d.tips:b.tips||null};s(!1),a(f)}catch(a){console.error("Error creating stretch:",a),alert("Failed to create stretch. Please try again.")}},v=function(a){let b=new Map;for(let c of[...a].sort((a,b)=>a.name.localeCompare(b.name))){let a=h(c);for(let d of a.length>0?a:[g]){let a=b.get(d);a?a.push(c):b.set(d,[c])}}let c=[...d.STRETCH_MUSCLE_ORDER,g];return Array.from(b.keys()).sort((a,b)=>{let d=c.indexOf(a),e=c.indexOf(b);return -1===d&&-1===e?a.localeCompare(b):-1===d?1:-1===e?-1:d-e}).map(a=>({type:a,stretches:b.get(a)||[]}))}(l.filter(a=>{if(!n)return!0;let b=n.toLowerCase(),c=a.name.toLowerCase(),d=h(a).join(" ").toLowerCase();return c.includes(b)||d.includes(b)}));return r?(0,b.jsx)(e,{onSubmit:u,onCancel:()=>s(!1)}):(0,b.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center p-4 z-50",children:(0,b.jsxs)("div",{className:"bg-zinc-800 rounded-lg p-6 max-w-3xl w-full max-h-[90vh] flex flex-col border-2 border-blue-800",children:[(0,b.jsx)("h2",{className:"text-2xl font-bold text-white mb-4",children:k||("pre_workout"===j?"Select Pre-Workout Stretch":"post_workout"===j?"Select Post-Workout Stretch":"Select Stretch")}),(0,b.jsxs)("div",{className:"mb-4 space-y-3",children:[(0,b.jsx)("input",{type:"text",value:n,onChange:a=>o(a.target.value),placeholder:"Search by name or muscle group...",className:"w-full bg-zinc-900 text-white px-4 py-3 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-700",autoFocus:!0}),(0,b.jsx)("button",{onClick:()=>s(!0),className:"w-full bg-blue-700 hover:bg-blue-800 text-white py-3 rounded-lg font-bold transition-colors",children:"+ Create New Stretch"})]}),(0,b.jsx)("div",{className:"flex-1 overflow-y-auto mb-4 space-y-2",children:p?(0,b.jsx)("div",{className:"text-center text-zinc-400 py-8",children:"Loading stretches..."}):0===v.length?(0,b.jsx)("div",{className:"text-center text-zinc-400 py-8",children:n?"No stretches found":"No stretches available"}):(0,b.jsx)("div",{className:"space-y-4",children:v.map(({type:c,stretches:e})=>(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("div",{className:"text-xs uppercase tracking-wide text-zinc-400",children:(0,d.formatTypeLabel)(c)}),e.map(c=>{let d=h(c);return(0,b.jsx)("button",{onClick:()=>a(c),className:"w-full bg-zinc-900 hover:bg-zinc-700 text-left p-4 rounded-lg transition-colors border-2 border-zinc-700 hover:border-blue-600",children:(0,b.jsx)("div",{className:"flex items-start justify-between",children:(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("div",{className:"text-white font-semibold",children:c.name}),(0,b.jsx)("div",{className:"text-zinc-400 text-sm mt-1",children:(0,f.formatStretchTimer)(c.timer_seconds)}),d.length>0&&(0,b.jsx)("div",{className:"flex flex-wrap gap-1 mt-2",children:d.map((a,c)=>(0,b.jsx)("span",{className:"text-xs bg-zinc-700 text-zinc-300 px-2 py-1 rounded",children:a},c))})]})})},c.id)})]},c))})}),(0,b.jsx)("button",{onClick:i,className:"w-full bg-zinc-700 hover:bg-zinc-600 text-white py-3 rounded-lg font-semibold transition-colors",children:"Cancel"})]})})}a.s(["default",()=>i],93787)},87674,a=>{"use strict";function b(a){return null}function c(a){}function d(a){var b;a.routineName&&(a.routineName,b=a.routineId&&String(a.routineId))}a.s(["invalidateWorkoutBootstrapCache",()=>d,"loadWorkoutBootstrapCache",()=>b,"saveWorkoutBootstrapCache",()=>c])},64600,a=>{"use strict";let b={progress:"progress",maintenance:"maintenance",light:"light"},c={[b.progress]:"Progress",[b.maintenance]:"Maintenance",[b.light]:"Light"},d={[b.progress]:"Push for small, steady improvements.",[b.maintenance]:"Hold steady and focus on form.",[b.light]:"Easy effort today."};a.s(["EXERCISE_HISTORY_AGGREGATION_MODES",0,{max:"max",avg:"avg"},"EXERCISE_HISTORY_DISPLAY_MODES",0,{weight:"weight",reps:"reps"},"EXERCISE_PRIMARY_METRICS",0,{weight:"weight",height:"height",time:"time",distance:"distance",repsOnly:"reps_only"},"EXERCISE_TYPES",0,{single:"single",b2b:"b2b",circuit:"circuit"},"SESSION_MODES",0,b,"SESSION_MODE_DESCRIPTIONS",0,d,"SESSION_MODE_LABELS",0,c])},13210,a=>{"use strict";var b=a.i(64600);function c(a){return a===b.SESSION_MODES.progress||a===b.SESSION_MODES.maintenance||a===b.SESSION_MODES.light}function d(a,e=b.SESSION_MODES.progress){return c(a)?a:e}function e(a,b){new Date().toISOString()}function f(a,b){let c=g(),d=b??null;c?(c.workoutName!==a||(c.routineId??null)!==d)&&e(a,d):e(a,d)}function g(){return null}function h(a){let b=g();b&&b.exercises.push(a)}function i(a){let b=g();b&&(b.cardio=a)}function j(){}a.s(["addCardioToSession",()=>i,"addExerciseToSession",()=>h,"clearWorkoutSession",()=>j,"ensureWorkoutSession",()=>f,"getWorkoutSession",()=>g,"initWorkoutSession",()=>e,"isSessionMode",()=>c,"resolveSessionMode",()=>d])},63586,a=>{"use strict";function b(a,b){return null}function c(a,b){}function d(a,b){return null}function e(a,b,c){}function f(a,b){return!1}function g(a,b){}a.s(["acknowledgeChangeWarning",()=>g,"hasChangeWarningAck",()=>f,"loadSessionTargetsMeta",()=>d,"loadSessionWorkout",()=>b,"saveSessionTargetsMeta",()=>e,"saveSessionWorkout",()=>c])},75216,a=>{"use strict";let b="No form tips yet.";function c(a){if("string"!=typeof a)return b;let c=a.trim();return c.length>0?c:b}function d(a,b){if("string"==typeof b&&b.trim().length>0)return b.trim();let c="string"==typeof a&&a.trim().length>0?a.trim():"exercise",d=`${c} form`;return`https://www.youtube.com/results?search_query=${encodeURIComponent(d)}`}a.s(["getFormTips",()=>c,"getVideoUrl",()=>d])},83509,65183,a=>{"use strict";var b=a.i(87924),c=a.i(50944),d=a.i(38246);function e({exitUrl:a,previousUrl:e,onPrevious:f,skipUrl:g,skipLabel:h="Skip",onSkip:i,nextLabel:j="Next",onNext:k}){let l=(0,c.useRouter)(),m=!!e||!!f,n=g||i,o=!!k;return(0,b.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)(d.default,{href:a,className:"text-red-400 hover:text-red-300 font-medium",children:"Exit"}),(0,b.jsx)("button",{onClick:()=>{f?f():e&&l.push(e)},disabled:!m,className:`font-medium ${m?"text-blue-400 hover:text-blue-300":"text-zinc-600 cursor-not-allowed"}`,children:"â† Previous"})]}),o?(0,b.jsxs)("button",{onClick:k,className:"text-blue-400 hover:text-blue-300 font-medium",children:[j," â†’"]}):n?(0,b.jsxs)("button",{onClick:()=>{i?i():g&&l.push(g)},className:"text-zinc-400 hover:text-zinc-300",children:[h," â†’"]}):null]})}a.s(["default",()=>e],83509);var f=a.i(72131);function g({className:a=""}){let[c,d]=(0,f.useState)({status:"idle"});(0,f.useEffect)(()=>{let a=a=>{let b=a.detail;b&&d({...b})};return window.addEventListener("workout-autosave",a),()=>window.removeEventListener("workout-autosave",a)},[]);let e=(0,f.useMemo)(()=>c.at?new Date(c.at).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit"}):"",[c.at]),{label:g,badgeClass:h}=(0,f.useMemo)(()=>{switch(c.status){case"saving":return{label:"Autosave: savingâ€¦",badgeClass:"text-amber-300 border-amber-500/40"};case"success":return{label:`Autosave: saved ${e}`,badgeClass:"text-emerald-300 border-emerald-500/40"};case"error":return{label:`Autosave: failed ${e}`,badgeClass:"text-red-300 border-red-500/40"};default:return{label:"Autosave: idle",badgeClass:"text-zinc-400 border-zinc-600/40"}}},[c.status,e]);return(0,b.jsx)("div",{className:`rounded-full border px-3 py-1 text-xs font-semibold ${h} ${a}`,"aria-live":"polite",children:g})}a.s(["default",()=>g],65183)},59486,a=>{"use strict";async function b(a){}a.i(13210),a.s(["autosaveWorkout",()=>b])},27711,18075,27231,a=>{"use strict";var b=a.i(87924),c=a.i(72131);function d({timerSeconds:a,onComplete:c}){return!a||a<=0?null:(0,b.jsx)(e,{timerSeconds:a,onComplete:c})}function e({timerSeconds:a,onComplete:d}){let e,[f,g]=(0,c.useState)(a),[h,i]=(0,c.useState)(!1),[j,k]=(0,c.useState)(!1),l=(0,c.useRef)(null),m=(0,c.useRef)(!1);(0,c.useEffect)(()=>{g(a),i(!1),k(!1),l.current=null,m.current=!1},[a]);let n=(0,c.useCallback)(()=>{if(!l.current)return;let a=Math.max(0,Math.ceil((l.current-Date.now())/1e3));g(a),0===a&&(i(!1),m.current||(m.current=!0,d?.()))},[d]);(0,c.useEffect)(()=>{if(!h)return;n();let a=setInterval(n,250);return()=>clearInterval(a)},[h,n]),(0,c.useEffect)(()=>{let a=()=>{"visible"===document.visibilityState&&n()},b=()=>{n()};return document.addEventListener("visibilitychange",a),window.addEventListener("focus",b),()=>{document.removeEventListener("visibilitychange",a),window.removeEventListener("focus",b)}},[n]);let o=(0,c.useCallback)(()=>{let b=0===f?a:f;b<=0||(0===f&&g(b),m.current=!1,l.current=Date.now()+1e3*b,i(!0),k(!0))},[f,a]),p=(0,c.useCallback)(()=>{l.current&&g(Math.max(0,Math.ceil((l.current-Date.now())/1e3))),l.current=null,i(!1)},[]),q=(0,c.useCallback)(()=>{i(!1),g(a),k(!1),l.current=null,m.current=!1},[a]);return(0,b.jsxs)("div",{className:"bg-zinc-900 rounded-lg p-4 mb-4",children:[(0,b.jsxs)("div",{className:"text-center mb-4",children:[(0,b.jsx)("div",{className:`text-5xl font-bold font-mono ${f<=5&&h?"text-red-500 animate-pulse":"text-white"}`,children:(e=Math.floor(f/60),`${e}:${(f%60).toString().padStart(2,"0")}`)}),0===f&&j&&(0,b.jsx)("div",{className:"text-blue-300 text-lg font-semibold mt-2",children:"Complete!"})]}),(0,b.jsxs)("div",{className:"flex gap-3 justify-center",children:[h?(0,b.jsxs)("button",{onClick:p,className:"bg-yellow-600 hover:bg-yellow-700 text-white px-6 py-3 rounded-lg font-semibold transition-colors flex items-center gap-2",children:[(0,b.jsx)("span",{className:"text-xl",children:"â¸"}),"Pause"]}):(0,b.jsxs)("button",{onClick:o,className:"bg-blue-800 hover:bg-blue-700 text-white px-6 py-3 rounded-lg font-semibold transition-colors flex items-center gap-2",children:[(0,b.jsx)("span",{className:"text-xl",children:"â–¶"}),j&&f>0?"Resume":0===f?"Restart":"Start Timer"]}),j&&(0,b.jsx)("button",{onClick:q,className:"bg-zinc-700 hover:bg-zinc-600 text-white px-4 py-3 rounded-lg font-semibold transition-colors",children:"Reset"})]})]})}var f=a.i(84975),g=a.i(75216);function h({stretch:a,timerKey:c=0,variant:e="pre"}){let h=(0,g.getFormTips)(a.tips),i=(0,g.getVideoUrl)(a.name,a.videoUrl),j=a.timerSeconds||0,k=(0,f.formatStretchTimer)(j);return(0,b.jsxs)("div",{className:"bg-zinc-800 rounded-lg p-8 border-2 border-blue-800 mb-8",children:[(0,b.jsxs)("div",{className:"text-center mb-6",children:[(0,b.jsx)("div",{className:"text-6xl mb-4",children:"pre"===e?"ðŸƒ":"ðŸ§˜"}),(0,b.jsx)("h2",{className:"text-3xl font-bold text-white mb-4",children:a.name}),(0,b.jsx)("div",{className:"text-xl text-blue-300 font-semibold mb-4",children:k})]}),(0,b.jsx)(d,{timerSeconds:j},c),(0,b.jsxs)("div",{className:"bg-zinc-900 rounded-lg p-4 mb-6",children:[(0,b.jsx)("div",{className:"text-zinc-400 text-sm mb-2",children:"Tips:"}),(0,b.jsx)("p",{className:"text-zinc-200 text-lg leading-relaxed",children:h})]}),(0,b.jsx)("a",{href:i,target:"_blank",rel:"noopener noreferrer",className:"block w-full bg-red-600 hover:bg-red-700 text-white text-center py-3 rounded-lg text-lg font-semibold transition-colors",children:"ðŸ“º Watch Video"})]})}function i(){return(0,b.jsx)("div",{className:"min-h-screen bg-zinc-900 flex items-center justify-center p-4",children:(0,b.jsx)("div",{className:"text-white text-2xl",children:"Loading..."})})}a.s(["default",()=>h],27711),a.s(["default",()=>i],18075);var j=a.i(38246);function k({message:a="Something went wrong",backUrl:c="/routines",backText:d="Back to routines"}){return(0,b.jsx)("div",{className:"min-h-screen bg-zinc-900 flex items-center justify-center p-4",children:(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("div",{className:"text-white text-2xl mb-4",children:a}),(0,b.jsx)(j.default,{href:c,className:"text-blue-400 hover:text-blue-300",children:d})]})})}a.s(["default",()=>k],27231)},20952,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944),e=a.i(13210),f=a.i(59486),g=a.i(83509),h=a.i(27711),i=a.i(93787),j=a.i(18075),k=a.i(27231),l=a.i(65183),m=a.i(63586),n=a.i(87674);function o(){let a=(0,d.useParams)(),o=(0,d.useRouter)(),p=(0,d.useSearchParams)(),[q,r]=(0,c.useState)(null),[s,t]=(0,c.useState)(0),[u,v]=(0,c.useState)(!0),[w,x]=(0,c.useState)(!1),[y,z]=(0,c.useState)(null),[A,B]=(0,c.useState)(!1),C=(0,c.useRef)(null),D=p.get("routineId");if((0,c.useEffect)(()=>{!async function(){try{let b=D?Number(D):null,c=Number.isNaN(b)?null:b,d=decodeURIComponent(a.workoutName),f=(0,n.loadWorkoutBootstrapCache)({workoutName:d,routineId:D}),g=null;if(f)g=f.workout;else{let b=`/api/workout/${a.workoutName}?bootstrap=1`;D&&(b+=`&routineId=${D}`);let c=await fetch(b);if(!c.ok)throw Error("Workout not found");let e=await c.json(),f={workout:g=e.workout,settings:e.settings,lastSetSummaries:e.lastSetSummaries||{},lastWorkoutReport:e.lastWorkoutReport||null,routineMeta:e.routineMeta};(0,n.saveWorkoutBootstrapCache)({workoutName:d,routineId:D??(f.routineMeta?.id?String(f.routineMeta.id):null),payload:f})}if(!g)throw Error("Workout not found");let h=(0,m.loadSessionWorkout)(g.name,D)||g;r(h),(0,e.ensureWorkoutSession)(h.name,c);let i=p.get("index");if(i){let a=parseInt(i,10),b=h.preWorkoutStretches?.length||0;!isNaN(a)&&a>=0&&a<b&&t(a)}}catch(a){console.error("Error fetching workout:",a)}finally{v(!1)}}()},[a.workoutName,p,D]),u)return(0,b.jsx)(j.default,{});if(!q)return(0,b.jsx)(k.default,{message:"Workout not found"});let E=q.preWorkoutStretches||[],F=encodeURIComponent(q.name),G=new URLSearchParams;D&&G.set("routineId",D);let H=G.toString()?`?${G.toString()}`:"",I=()=>{(0,m.acknowledgeChangeWarning)(q.name,D),B(!1);let a=C.current;C.current=null,a?.()},J=()=>{C.current=null,B(!1)},K=a=>{var b;b=()=>{z(a),x(!0)},(0,m.hasChangeWarningAck)(q.name,D)?b():(C.current=b,B(!0))},L=a=>{if(!y)return;let b={name:a.name,timerSeconds:a.timer_seconds??0,videoUrl:a.video_url||"",tips:a.tips||""},c=[...E],d=Math.min(s+1,c.length);"add"===y?c.splice(d,0,b):c[s]=b;let e={...q,preWorkoutStretches:c};r(e),(0,m.saveSessionWorkout)(e,D),z(null),x(!1)};if(0===E.length)return(0,b.jsxs)("div",{className:"min-h-screen bg-zinc-900 flex flex-col items-center justify-center p-4",children:[(0,b.jsx)("div",{className:"text-white text-2xl mb-4",children:"No pre-workout stretches"}),(0,b.jsxs)("div",{className:"w-full max-w-xs space-y-3",children:[(0,b.jsx)("button",{onClick:()=>K("add"),className:"w-full bg-blue-800 hover:bg-blue-700 text-white px-6 py-3 rounded-lg text-base font-semibold transition-colors",children:"+ Add Stretch"}),(0,b.jsx)("button",{onClick:()=>o.push(`/workout/${F}/active${H}`),className:"w-full bg-blue-800 hover:bg-blue-700 text-white px-6 py-3 rounded-lg text-base font-semibold transition-colors",children:"Start Exercises â†’"})]}),A&&(0,b.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 p-4",children:(0,b.jsxs)("div",{className:"w-full max-w-md rounded-lg border border-zinc-700 bg-zinc-900 p-6 text-white",children:[(0,b.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"Session-only change"}),(0,b.jsx)("p",{className:"text-sm text-zinc-300 mb-6",children:"This edit only applies to today's workout. Edit the routine to make a permanent change."}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,b.jsx)("button",{onClick:J,className:"rounded-lg bg-zinc-700 py-2 text-sm font-semibold text-white hover:bg-zinc-600",children:"Cancel"}),(0,b.jsx)("button",{onClick:I,className:"rounded-lg bg-blue-800 py-2 text-sm font-semibold text-white hover:bg-blue-700",children:"Continue"})]})]})}),w&&(0,b.jsx)(i.default,{title:"Add Stretch",filterType:"pre_workout",onCancel:()=>{x(!1),z(null)},onSelect:L})]});let M=E[s],N=(q.postWorkoutStretches||[]).length,O=E.length+q.exercises.length+1+N,P=s+1,Q=P/O*100,R=()=>{s>0&&t(s-1)};return(0,b.jsx)("div",{className:"min-h-screen bg-zinc-900 p-4",children:(0,b.jsxs)("div",{className:"max-w-2xl mx-auto",children:[(0,b.jsx)(g.default,{exitUrl:`/workout/${F}${H}`,previousUrl:null,onPrevious:s>0?R:void 0,skipLabel:"Skip All",onSkip:()=>{o.push(`/workout/${F}/active${H}`)}}),(0,b.jsx)("div",{className:"flex justify-end mb-4",children:(0,b.jsx)(l.default,{})}),(0,b.jsxs)("div",{className:"text-center mb-4",children:[(0,b.jsx)("h1",{className:"text-2xl font-bold text-white mb-2",children:"PRE-WORKOUT STRETCH"}),(0,b.jsxs)("div",{className:"text-zinc-400 text-lg",children:[s+1," of ",E.length]})]}),(0,b.jsxs)("div",{className:"mb-8",children:[(0,b.jsx)("div",{className:"h-2 bg-zinc-800 rounded-full overflow-hidden",children:(0,b.jsx)("div",{className:"h-full bg-blue-700 transition-all duration-300",style:{width:`${Q}%`}})}),(0,b.jsxs)("div",{className:"text-zinc-500 text-sm text-center mt-2",children:["Overall Progress: ",P," / ",O]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-3 mb-6",children:[(0,b.jsx)("button",{onClick:()=>K("add"),className:"bg-blue-900/80 hover:bg-blue-800 text-white py-2 rounded-lg text-sm font-semibold transition-colors",children:"+ Add Stretch"}),(0,b.jsx)("button",{onClick:()=>K("replace"),className:"bg-blue-900/80 hover:bg-blue-800 text-white py-2 rounded-lg text-sm font-semibold transition-colors",children:"â†º Replace Stretch"})]}),(0,b.jsx)(h.default,{stretch:M,timerKey:s,variant:"pre"}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsx)("button",{onClick:R,disabled:0===s,className:`py-4 rounded-lg text-lg font-semibold transition-colors ${0===s?"bg-zinc-800 text-zinc-600 cursor-not-allowed":"bg-zinc-700 hover:bg-zinc-600 text-white"}`,children:"â† Previous"}),(0,b.jsx)("button",{onClick:()=>{(0,f.autosaveWorkout)({type:"stretch",phase:"pre",index:s}),s<E.length-1?t(s+1):o.push(`/workout/${F}/active${H}`)},className:"bg-blue-800 hover:bg-blue-700 text-white py-4 rounded-lg text-lg font-semibold transition-colors",children:s<E.length-1?"Next Stretch â†’":"Start Exercises â†’"})]}),A&&(0,b.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 p-4",children:(0,b.jsxs)("div",{className:"w-full max-w-md rounded-lg border border-zinc-700 bg-zinc-900 p-6 text-white",children:[(0,b.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"Session-only change"}),(0,b.jsx)("p",{className:"text-sm text-zinc-300 mb-6",children:"This edit only applies to today's workout. Edit the routine to make a permanent change."}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,b.jsx)("button",{onClick:J,className:"rounded-lg bg-zinc-700 py-2 text-sm font-semibold text-white hover:bg-zinc-600",children:"Cancel"}),(0,b.jsx)("button",{onClick:I,className:"rounded-lg bg-blue-800 py-2 text-sm font-semibold text-white hover:bg-blue-700",children:"Continue"})]})]})}),w&&(0,b.jsx)(i.default,{title:"replace"===y?"Replace Stretch":"Add Stretch",filterType:"pre_workout",onCancel:()=>{x(!1),z(null)},onSelect:L})]})})}function p(){return(0,b.jsx)(c.Suspense,{fallback:(0,b.jsx)(j.default,{}),children:(0,b.jsx)(o,{})})}a.s(["default",()=>p])}];

//# sourceMappingURL=%5Broot-of-the-server%5D__e1f9bc91._.js.map