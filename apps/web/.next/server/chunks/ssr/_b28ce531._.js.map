{"version":3,"sources":["../../../../app/components/SharedUi.tsx","../../../../lib/constants.ts","../../../../lib/workout-session.ts","../../../../app/routines/browse/page.tsx"],"sourcesContent":["'use client';\n\nimport type { ReactNode } from 'react';\n\ntype CardProps = {\n  children: ReactNode;\n  className?: string;\n  paddingClassName?: string;\n  borderClassName?: string;\n  borderWidthClassName?: string;\n};\n\nexport function Card({\n  children,\n  className = '',\n  paddingClassName,\n  borderClassName = 'border-zinc-700',\n  borderWidthClassName = 'border-2'\n}: CardProps) {\n  const padding = paddingClassName || 'p-4';\n  return (\n    <div className={`bg-zinc-800 rounded-lg ${borderWidthClassName} ${borderClassName} ${padding} ${className}`.trim()}>\n      {children}\n    </div>\n  );\n}\n\ntype EmptyStateProps = {\n  message: string;\n  description?: string;\n  className?: string;\n};\n\nexport function EmptyState({ message, description, className = '' }: EmptyStateProps) {\n  return (\n    <div className={`text-zinc-500 text-center py-4 bg-zinc-800 rounded-lg ${className}`.trim()}>\n      <div>{message}</div>\n      {description && <div className=\"text-zinc-600 text-sm mt-1\">{description}</div>}\n    </div>\n  );\n}\n\ntype BottomActionBarProps = {\n  children: ReactNode;\n  maxWidthClassName?: string;\n  className?: string;\n};\n\nexport function BottomActionBar({\n  children,\n  maxWidthClassName = 'max-w-2xl',\n  className = ''\n}: BottomActionBarProps) {\n  return (\n    <div className={`fixed bottom-0 left-0 right-0 p-4 bg-zinc-900 border-t border-zinc-800 ${className}`.trim()}>\n      <div className={`${maxWidthClassName} mx-auto`}>\n        {children}\n      </div>\n    </div>\n  );\n}\n\ntype SectionHeaderProps = {\n  icon: string;\n  label: string;\n  iconClassName?: string;\n  className?: string;\n};\n\nexport function SectionHeader({\n  icon,\n  label,\n  iconClassName = 'text-zinc-400',\n  className = ''\n}: SectionHeaderProps) {\n  return (\n    <h2 className={`text-xl font-bold text-white mb-4 flex items-center gap-2 ${className}`.trim()}>\n      <span className={iconClassName}>{icon}</span>\n      {label}\n    </h2>\n  );\n}\n","// lib/constants.ts\n\n// Exercise type identifiers used across workouts, routines, and storage.\nexport const EXERCISE_TYPES = {\n  single: 'single',\n  b2b: 'b2b',\n  circuit: 'circuit',\n} as const;\n\nexport type ExerciseType = typeof EXERCISE_TYPES[keyof typeof EXERCISE_TYPES];\n\n// Exercise history display modes (primary metric axis).\nexport const EXERCISE_HISTORY_DISPLAY_MODES = {\n  weight: 'weight',\n  reps: 'reps',\n} as const;\n\nexport type ExerciseHistoryDisplayMode =\n  typeof EXERCISE_HISTORY_DISPLAY_MODES[keyof typeof EXERCISE_HISTORY_DISPLAY_MODES];\n\n// Exercise history aggregation modes (how points are summarized).\nexport const EXERCISE_HISTORY_AGGREGATION_MODES = {\n  max: 'max',\n  avg: 'avg',\n} as const;\n\nexport type ExerciseHistoryAggregationMode =\n  typeof EXERCISE_HISTORY_AGGREGATION_MODES[keyof typeof EXERCISE_HISTORY_AGGREGATION_MODES];\n\n// Exercise tracking primary metrics (how we interpret the numeric value).\nexport const EXERCISE_PRIMARY_METRICS = {\n  weight: 'weight',\n  height: 'height',\n  time: 'time',\n  distance: 'distance',\n  repsOnly: 'reps_only',\n} as const;\n\nexport type ExercisePrimaryMetric =\n  typeof EXERCISE_PRIMARY_METRICS[keyof typeof EXERCISE_PRIMARY_METRICS];\n\n// Workout session modes (preview-only target selection).\nexport const SESSION_MODES = {\n  progress: 'progress',\n  maintenance: 'maintenance',\n  light: 'light',\n} as const;\n\nexport type SessionMode = typeof SESSION_MODES[keyof typeof SESSION_MODES];\n\nexport const SESSION_MODE_LABELS: Record<SessionMode, string> = {\n  [SESSION_MODES.progress]: 'Progress',\n  [SESSION_MODES.maintenance]: 'Maintenance',\n  [SESSION_MODES.light]: 'Light',\n};\n\nexport const SESSION_MODE_DESCRIPTIONS: Record<SessionMode, string> = {\n  [SESSION_MODES.progress]: 'Push for small, steady improvements.',\n  [SESSION_MODES.maintenance]: 'Hold steady and focus on form.',\n  [SESSION_MODES.light]: 'Easy effort today.',\n};\n","// lib/workout-session.ts\n// Client-side storage for current workout session\n\nimport { EXERCISE_TYPES, SESSION_MODES, type ExercisePrimaryMetric, type SessionMode } from '@/lib/constants';\n\nexport interface SessionExerciseData {\n  name: string;\n  type: typeof EXERCISE_TYPES.single | typeof EXERCISE_TYPES.b2b;\n  isMachine?: boolean;\n  primaryMetric?: ExercisePrimaryMetric;\n  metricUnit?: string | null;\n  warmup?: { weight: number; reps: number };\n  sets: Array<{ weight: number; reps: number }>;\n  b2bPartner?: {\n    name: string;\n    isMachine?: boolean;\n    primaryMetric?: ExercisePrimaryMetric;\n    metricUnit?: string | null;\n    warmup?: { weight: number; reps: number };\n    sets: Array<{ weight: number; reps: number }>;\n  };\n}\n\nexport interface WorkoutSessionData {\n  workoutName: string;\n  routineId?: number | null;\n  sessionId?: number | null;\n  startTime: string;\n  exercises: SessionExerciseData[];\n  cardio?: {\n    type: string;\n    time: string;\n    speed?: number;\n    incline?: number;\n  };\n}\n\nconst STORAGE_KEY = 'current_workout_session';\n\nexport function isSessionMode(value: string | null | undefined): value is SessionMode {\n  return value === SESSION_MODES.progress\n    || value === SESSION_MODES.maintenance\n    || value === SESSION_MODES.light;\n}\n\nexport function resolveSessionMode(\n  value: string | null | undefined,\n  fallback: SessionMode = SESSION_MODES.progress\n): SessionMode {\n  return isSessionMode(value) ? value : fallback;\n}\n\nexport function initWorkoutSession(\n  workoutName: string,\n  routineId?: number | null\n): void {\n  const session: WorkoutSessionData = {\n    workoutName,\n    routineId: routineId ?? null,\n    sessionId: null,\n    startTime: new Date().toISOString(),\n    exercises: [],\n  };\n  if (typeof window !== 'undefined') {\n    localStorage.setItem(STORAGE_KEY, JSON.stringify(session));\n  }\n}\n\nexport function ensureWorkoutSession(\n  workoutName: string,\n  routineId?: number | null\n): void {\n  const existing = getWorkoutSession();\n  const normalizedRoutineId = routineId ?? null;\n  if (!existing) {\n    initWorkoutSession(workoutName, normalizedRoutineId);\n    return;\n  }\n  if (existing.workoutName !== workoutName || (existing.routineId ?? null) !== normalizedRoutineId) {\n    initWorkoutSession(workoutName, normalizedRoutineId);\n  }\n}\n\nexport function getWorkoutSession(): WorkoutSessionData | null {\n  if (typeof window === 'undefined') return null;\n  const data = localStorage.getItem(STORAGE_KEY);\n  if (!data) return null;\n  const parsed = JSON.parse(data) as WorkoutSessionData;\n  const rawRoutineId = (parsed as { routineId?: unknown }).routineId;\n  const nextRoutineId = typeof rawRoutineId === 'number' ? rawRoutineId : Number(rawRoutineId);\n  parsed.routineId = Number.isFinite(nextRoutineId) ? nextRoutineId : null;\n  const rawSessionId = (parsed as { sessionId?: unknown }).sessionId;\n  const nextSessionId = typeof rawSessionId === 'number' ? rawSessionId : Number(rawSessionId);\n  parsed.sessionId = Number.isFinite(nextSessionId) ? nextSessionId : null;\n  return parsed;\n}\n\nexport function setWorkoutSessionId(sessionId: number): void {\n  if (typeof window === 'undefined') return;\n  const session = getWorkoutSession();\n  if (!session) return;\n  if (session.sessionId === sessionId) return;\n  session.sessionId = sessionId;\n  localStorage.setItem(STORAGE_KEY, JSON.stringify(session));\n}\n\nexport function addExerciseToSession(exercise: SessionExerciseData): void {\n  const session = getWorkoutSession();\n  if (!session) return;\n\n  session.exercises.push(exercise);\n  if (typeof window !== 'undefined') {\n    localStorage.setItem(STORAGE_KEY, JSON.stringify(session));\n  }\n}\n\nexport function addCardioToSession(cardio: { type: string; time: string; speed?: number; incline?: number }): void {\n  const session = getWorkoutSession();\n  if (!session) return;\n\n  session.cardio = cardio;\n  if (typeof window !== 'undefined') {\n    localStorage.setItem(STORAGE_KEY, JSON.stringify(session));\n  }\n}\n\nexport function clearWorkoutSession(): void {\n  if (typeof window !== 'undefined') {\n    localStorage.removeItem(STORAGE_KEY);\n  }\n}\n","'use client';\n\nimport { useEffect, useState } from 'react';\nimport Link from 'next/link';\nimport { Card } from '@/app/components/SharedUi';\nimport { initWorkoutSession } from '@/lib/workout-session';\n\ninterface PublicRoutine {\n  id: number;\n  name: string;\n  description: string | null;\n  user_id: string;\n  creator_username: string | null;\n  creator_name: string | null;\n  created_at: string;\n  last_workout_date?: string | null;\n}\n\nfunction normalizeDateString(value: string): string {\n  if (/^\\d{4}-\\d{2}-\\d{2} \\d{2}:\\d{2}:\\d{2}/.test(value)) {\n    return `${value.replace(' ', 'T')}Z`;\n  }\n  if (/^\\d{4}-\\d{2}-\\d{2}$/.test(value)) {\n    return `${value}T00:00:00Z`;\n  }\n  return value;\n}\n\nfunction formatLocalDate(value?: string | null): string {\n  if (!value) return 'Never';\n  const date = new Date(normalizeDateString(value));\n  if (Number.isNaN(date.getTime())) return 'Unknown';\n  return date.toLocaleDateString('en-US', {\n    month: 'short',\n    day: 'numeric',\n    year: 'numeric',\n  });\n}\n\nexport default function BrowseRoutinesPage() {\n  const [routines, setRoutines] = useState<PublicRoutine[]>([]);\n  const [favoritedIds, setFavoritedIds] = useState<Set<number>>(new Set());\n  const [loading, setLoading] = useState(true);\n  const [actionInProgress, setActionInProgress] = useState<number | null>(null);\n  const [toast, setToast] = useState<{ message: string; type: 'success' | 'error' } | null>(null);\n\n  // Auto-dismiss toast after 3 seconds\n  useEffect(() => {\n    if (toast) {\n      const timer = setTimeout(() => setToast(null), 3000);\n      return () => clearTimeout(timer);\n    }\n  }, [toast]);\n\n  useEffect(() => {\n    fetchPublicRoutines();\n  }, []);\n\n  async function fetchPublicRoutines() {\n    try {\n      const response = await fetch('/api/routines/public');\n      if (response.ok) {\n        const data = await response.json();\n        const publicRoutines = data.routines || [];\n        setRoutines(publicRoutines);\n\n        // Check which ones are already favorited\n        const favResponse = await fetch('/api/routines/favorites');\n        if (favResponse.ok) {\n          const favData = await favResponse.json();\n          const favIds = new Set((favData.routines || []).map((r: any) => r.id));\n          setFavoritedIds(favIds as Set<number>);\n        }\n\n      }\n    } catch (error) {\n      console.error('Error fetching public routines:', error);\n    } finally {\n      setLoading(false);\n    }\n  }\n\n  async function toggleFavorite(routineId: number) {\n    setActionInProgress(routineId);\n    const isFavorited = favoritedIds.has(routineId);\n\n    try {\n      const response = await fetch(`/api/routines/${routineId}/favorite`, {\n        method: isFavorited ? 'DELETE' : 'POST',\n      });\n\n      if (response.ok) {\n        const newFavorites = new Set(favoritedIds);\n        if (isFavorited) {\n          newFavorites.delete(routineId);\n        } else {\n          newFavorites.add(routineId);\n        }\n        setFavoritedIds(newFavorites);\n      }\n    } catch (error) {\n      console.error('Error toggling favorite:', error);\n    } finally {\n      setActionInProgress(null);\n    }\n  }\n\n  async function cloneRoutine(routineId: number, routineName: string) {\n    setActionInProgress(routineId);\n\n    try {\n      const response = await fetch(`/api/routines/${routineId}/clone`, {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ name: `${routineName} (Copy)` }),\n      });\n\n      if (response.ok) {\n        setToast({ message: 'Saved to your routines!', type: 'success' });\n      } else {\n        const data = await response.json();\n        setToast({ message: data.error || 'Failed to clone routine', type: 'error' });\n      }\n    } catch (error) {\n      console.error('Error cloning routine:', error);\n      setToast({ message: 'Failed to clone routine', type: 'error' });\n    } finally {\n      setActionInProgress(null);\n    }\n  }\n\n  if (loading) {\n    return (\n      <div className=\"min-h-screen bg-zinc-900 flex items-center justify-center p-4\">\n        <div className=\"text-white text-2xl\">Loading...</div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen bg-zinc-900 p-4\">\n      {/* Toast Notification */}\n      {toast && (\n        <div className=\"fixed top-4 left-1/2 transform -translate-x-1/2 z-50 animate-in fade-in slide-in-from-top-2 duration-300\">\n          <div className={`flex items-center gap-2 px-4 py-3 rounded-lg shadow-lg ${\n            toast.type === 'success'\n              ? 'bg-green-600 text-white'\n              : 'bg-red-600 text-white'\n          }`}>\n            {toast.type === 'success' ? (\n              <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-5 w-5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M5 13l4 4L19 7\" />\n              </svg>\n            ) : (\n              <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-5 w-5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" />\n              </svg>\n            )}\n            <span className=\"font-medium\">{toast.message}</span>\n          </div>\n        </div>\n      )}\n\n      <main className=\"max-w-2xl mx-auto py-8\">\n        <div className=\"flex items-center gap-4 mb-8\">\n          <Link\n            href=\"/routines\"\n            className=\"text-zinc-400 hover:text-white transition-colors\"\n          >\n            <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-6 w-6\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M15 19l-7-7 7-7\" />\n            </svg>\n          </Link>\n          <h1 className=\"text-3xl font-bold text-white\">Browse Public Routines</h1>\n        </div>\n\n        <p className=\"text-zinc-400 mb-6\">\n          Discover routines shared by other users. Favorite them to use directly, or clone to customize.\n        </p>\n\n        {routines.length === 0 ? (\n          <div className=\"text-center text-zinc-500 text-lg py-12\">\n            No public routines available yet.\n          </div>\n        ) : (\n          <div className=\"space-y-4\">\n            {routines.map((routine) => {\n              const isFavorited = favoritedIds.has(routine.id);\n              const isProcessing = actionInProgress === routine.id;\n              const lastDate = routine.last_workout_date || null;\n              const formattedDate = formatLocalDate(lastDate);\n\n              return (\n                <Card key={routine.id} paddingClassName=\"p-6\">\n                  <div className=\"flex items-start justify-between mb-3\">\n                    <div className=\"flex-1\">\n                      <h3 className=\"text-xl font-semibold text-white mb-1\">\n                        {routine.name}\n                      </h3>\n                      <p className=\"text-sm text-zinc-400\">\n                        by{' '}\n                        <span className=\"text-purple-400\">\n                          @{routine.creator_username || routine.creator_name || 'Anonymous'}\n                        </span>\n                      </p>\n                    </div>\n                    <div className=\"text-sm text-zinc-500 whitespace-nowrap shrink-0\">\n                      Last:{' '}\n                      <span className={lastDate ? 'text-blue-400' : 'text-zinc-600'}>\n                        {formattedDate}\n                      </span>\n                    </div>\n                  </div>\n\n                  {routine.description && (\n                    <p className=\"text-zinc-400 text-sm mb-4\">{routine.description}</p>\n                  )}\n\n                  <div className=\"flex flex-wrap gap-3\">\n                    {/* Favorite Button */}\n                    <button\n                      onClick={() => toggleFavorite(routine.id)}\n                      disabled={isProcessing}\n                      className={`flex items-center gap-2 px-4 py-2 rounded-lg font-medium transition-colors ${\n                        isFavorited\n                          ? 'bg-red-600 hover:bg-red-700 text-white'\n                          : 'bg-zinc-700 hover:bg-zinc-600 text-zinc-300'\n                      } disabled:opacity-50`}\n                    >\n                      <svg\n                        xmlns=\"http://www.w3.org/2000/svg\"\n                        className=\"h-5 w-5\"\n                        fill={isFavorited ? 'currentColor' : 'none'}\n                        viewBox=\"0 0 24 24\"\n                        stroke=\"currentColor\"\n                        strokeWidth={isFavorited ? 0 : 2}\n                      >\n                        <path d=\"M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z\"/>\n                      </svg>\n                      {isFavorited ? 'Favorited' : 'Favorite'}\n                    </button>\n\n                    {/* Preview Button */}\n                    <Link\n                      href={`/workout/${encodeURIComponent(routine.name)}?routineId=${routine.id}`}\n                      className=\"flex items-center gap-2 px-4 py-2 rounded-lg font-medium bg-zinc-700 hover:bg-zinc-600 text-zinc-200 transition-colors\"\n                    >\n                      <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-5 w-5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M15 12a3 3 0 11-6 0 3 3 0 016 0z\" />\n                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z\" />\n                      </svg>\n                      Preview\n                    </Link>\n\n                    {/* Use Routine Button */}\n                    <Link\n                      href={`/stretches/${encodeURIComponent(routine.name)}?routineId=${routine.id}`}\n                      onClick={() => initWorkoutSession(routine.name, routine.id)}\n                      className=\"flex items-center gap-2 px-4 py-2 rounded-lg font-medium bg-green-600 hover:bg-green-700 text-white transition-colors\"\n                    >\n                      <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-5 w-5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z\" />\n                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M21 12a9 9 0 11-18 0 9 9 0 0118 0z\" />\n                      </svg>\n                      Start\n                    </Link>\n\n                    {/* Clone Button */}\n                    <button\n                      onClick={() => cloneRoutine(routine.id, routine.name)}\n                      disabled={isProcessing}\n                      className=\"flex items-center gap-2 px-4 py-2 rounded-lg font-medium bg-blue-600 hover:bg-blue-700 text-white transition-colors disabled:opacity-50\"\n                    >\n                      <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-5 w-5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z\" />\n                      </svg>\n                      Clone\n                    </button>\n                  </div>\n                </Card>\n              );\n            })}\n          </div>\n        )}\n      </main>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}