{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/devamshroff/Documents/SWE%20Career/projects/gymmer/app/profile/page.tsx"],"sourcesContent":["'use client';\n\nimport { useEffect, useState } from 'react';\n\ninterface UserInfo {\n  username: string | null;\n  name?: string | null;\n  email?: string | null;\n}\n\nexport default function ProfilePage() {\n  const [userInfo, setUserInfo] = useState<UserInfo | null>(null);\n  const [restTimeSeconds, setRestTimeSeconds] = useState('60');\n  const [supersetRestSeconds, setSupersetRestSeconds] = useState('15');\n  const [loading, setLoading] = useState(true);\n  const [saving, setSaving] = useState(false);\n  const [saveStatus, setSaveStatus] = useState<'idle' | 'saved' | 'error'>('idle');\n  const [loadError, setLoadError] = useState(false);\n  const [validationError, setValidationError] = useState<string | null>(null);\n  const [goalsText, setGoalsText] = useState('');\n  const [goalsSaving, setGoalsSaving] = useState(false);\n  const [goalsStatus, setGoalsStatus] = useState<'idle' | 'saved' | 'error'>('idle');\n  const [goalsLoadError, setGoalsLoadError] = useState(false);\n\n  useEffect(() => {\n    async function fetchProfile() {\n      try {\n        const [userResponse, settingsResponse, goalsResponse] = await Promise.all([\n          fetch('/api/user'),\n          fetch('/api/user/settings'),\n          fetch('/api/goals')\n        ]);\n\n        if (userResponse.ok) {\n          const userData = await userResponse.json();\n          setUserInfo({\n            username: userData.username || null,\n            name: userData.name || null,\n            email: userData.email || null\n          });\n        }\n\n        if (settingsResponse.ok) {\n          const settingsData = await settingsResponse.json();\n          if (settingsData?.restTimeSeconds !== undefined) {\n            setRestTimeSeconds(String(settingsData.restTimeSeconds));\n          }\n          if (settingsData?.supersetRestSeconds !== undefined) {\n            setSupersetRestSeconds(String(settingsData.supersetRestSeconds));\n          }\n        }\n\n        if (goalsResponse.ok) {\n          const goalsData = await goalsResponse.json();\n          setGoalsText(goalsData.goals || '');\n        } else {\n          setGoalsLoadError(true);\n        }\n      } catch (error) {\n        console.error('Error loading profile settings:', error);\n        setLoadError(true);\n        setGoalsLoadError(true);\n      } finally {\n        setLoading(false);\n      }\n    }\n\n    fetchProfile();\n  }, []);\n\n  const displayName = userInfo?.username\n    ? `@${userInfo.username}`\n    : userInfo?.name || userInfo?.email || 'Profile';\n\n  const handleSave = async () => {\n    setSaving(true);\n    setSaveStatus('idle');\n    setValidationError(null);\n\n    const restSeconds = Number(restTimeSeconds);\n    const supersetSeconds = Number(supersetRestSeconds);\n\n    if (!Number.isFinite(restSeconds) || restSeconds < 0) {\n      setValidationError('Rest time must be a non-negative number.');\n      setSaving(false);\n      return;\n    }\n\n    if (!Number.isFinite(supersetSeconds) || supersetSeconds < 0) {\n      setValidationError('Superset rest time must be a non-negative number.');\n      setSaving(false);\n      return;\n    }\n\n    try {\n      const response = await fetch('/api/user/settings', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({\n          restTimeSeconds: restSeconds,\n          supersetRestSeconds: supersetSeconds\n        })\n      });\n\n      if (!response.ok) {\n        throw new Error('Failed to save');\n      }\n\n      setSaveStatus('saved');\n    } catch (error) {\n      console.error('Error saving profile settings:', error);\n      setSaveStatus('error');\n    } finally {\n      setSaving(false);\n    }\n  };\n\n  const handleGoalsSave = async () => {\n    setGoalsSaving(true);\n    setGoalsStatus('idle');\n\n    try {\n      const response = await fetch('/api/goals', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ goals: goalsText })\n      });\n\n      if (!response.ok) {\n        throw new Error('Failed to save');\n      }\n\n      setGoalsStatus('saved');\n    } catch (error) {\n      console.error('Error saving goals:', error);\n      setGoalsStatus('error');\n    } finally {\n      setGoalsSaving(false);\n    }\n  };\n\n  return (\n    <div className=\"min-h-screen bg-zinc-900 p-4 text-white\">\n      <div className=\"mx-auto max-w-2xl\">\n        <div className=\"rounded-lg border border-zinc-700 bg-zinc-800 p-6\">\n          <h1 className=\"text-3xl font-bold mb-2\">{displayName}</h1>\n          <p className=\"text-sm text-zinc-300 mb-6\">\n            Set your default rest timers. Set a value to 0 seconds to skip the timer between sets.\n          </p>\n\n          {loadError && (\n            <div className=\"mb-3 text-sm text-red-400\">Could not load profile settings.</div>\n          )}\n\n          <div className=\"mb-8 border-b border-zinc-700 pb-6\">\n            <h2 className=\"text-2xl font-bold mb-2\">Fitness Goals and Background</h2>\n            <p className=\"text-sm text-zinc-300 mb-4\">\n              What are your fitness goals? Share goals like strength, hypertrophy, rehab focus, equipment limits, or weekly targets.\n              Also please share any relevant background about you! Age, Gender, Sports you are into..\n              We&apos;ll use this for AI-assisted routines and post-workout reports.\n            </p>\n            {goalsLoadError && (\n              <div className=\"mb-3 text-sm text-red-400\">Could not load goals.</div>\n            )}\n\n            <label htmlFor=\"goals\" className=\"text-sm font-semibold text-zinc-200\">\n              Goals & preferences\n            </label>\n            <textarea\n              id=\"goals\"\n              rows={8}\n              value={goalsText}\n              onChange={(event) => setGoalsText(event.target.value)}\n              disabled={loading || goalsSaving}\n              placeholder=\"Example: Build strength in squat/bench, avoid knee-heavy plyometrics, 4 days/week, focus on upper body hypertrophy.\"\n              className=\"mt-2 w-full resize-none rounded-lg border border-zinc-700 bg-zinc-900 px-3 py-2 text-sm text-white placeholder:text-zinc-500 focus:outline-none focus:ring-2 focus:ring-emerald-600\"\n            />\n\n            <div className=\"mt-4 flex items-center gap-3\">\n              <button\n                onClick={handleGoalsSave}\n                disabled={loading || goalsSaving}\n                className=\"rounded-lg bg-slate-800 px-4 py-2 text-sm font-semibold text-slate-200 transition-colors hover:bg-slate-700 disabled:cursor-not-allowed disabled:bg-slate-800 disabled:opacity-70\"\n              >\n                {goalsSaving ? 'Saving...' : 'Save Goals'}\n              </button>\n              {goalsStatus === 'saved' && (\n                <span className=\"text-sm text-emerald-400\">Saved</span>\n              )}\n              {goalsStatus === 'error' && (\n                <span className=\"text-sm text-red-400\">Could not save goals.</span>\n              )}\n            </div>\n          </div>\n\n          <div className=\"space-y-4\">\n            <div>\n              <label htmlFor=\"rest-time\" className=\"text-sm font-semibold text-zinc-200\">\n                Rest time between sets (seconds)\n              </label>\n              <input\n                id=\"rest-time\"\n                type=\"number\"\n                min=\"0\"\n                value={restTimeSeconds}\n                onChange={(event) => setRestTimeSeconds(event.target.value)}\n                disabled={loading || saving}\n                className=\"mt-2 w-full rounded-lg border border-zinc-700 bg-zinc-900 px-3 py-2 text-sm text-white focus:outline-none focus:ring-2 focus:ring-emerald-600\"\n              />\n            </div>\n\n            <div>\n              <label htmlFor=\"superset-rest-time\" className=\"text-sm font-semibold text-zinc-200\">\n                Rest time between superset rounds (seconds)\n              </label>\n              <input\n                id=\"superset-rest-time\"\n                type=\"number\"\n                min=\"0\"\n                value={supersetRestSeconds}\n                onChange={(event) => setSupersetRestSeconds(event.target.value)}\n                disabled={loading || saving}\n                className=\"mt-2 w-full rounded-lg border border-zinc-700 bg-zinc-900 px-3 py-2 text-sm text-white focus:outline-none focus:ring-2 focus:ring-emerald-600\"\n              />\n            </div>\n          </div>\n\n          {validationError && (\n            <div className=\"mt-3 text-sm text-red-400\">{validationError}</div>\n          )}\n\n          <div className=\"mt-4 flex items-center gap-3\">\n            <button\n              onClick={handleSave}\n              disabled={saving || loading}\n              className=\"rounded-lg bg-slate-800 px-4 py-2 text-sm font-semibold text-slate-200 transition-colors hover:bg-slate-700 disabled:cursor-not-allowed disabled:bg-slate-800 disabled:opacity-70\"\n            >\n              {saving ? 'Saving...' : 'Save Settings'}\n            </button>\n            {saveStatus === 'saved' && (\n              <span className=\"text-sm text-emerald-400\">Saved</span>\n            )}\n            {saveStatus === 'error' && (\n              <span className=\"text-sm text-red-400\">Could not save settings.</span>\n            )}\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;;;AAFA;;AAUe,SAAS;;IACtB,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,yKAAQ,EAAkB;IAC1D,MAAM,CAAC,iBAAiB,mBAAmB,GAAG,IAAA,yKAAQ,EAAC;IACvD,MAAM,CAAC,qBAAqB,uBAAuB,GAAG,IAAA,yKAAQ,EAAC;IAC/D,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,yKAAQ,EAAC;IACvC,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,yKAAQ,EAAC;IACrC,MAAM,CAAC,YAAY,cAAc,GAAG,IAAA,yKAAQ,EAA6B;IACzE,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,yKAAQ,EAAC;IAC3C,MAAM,CAAC,iBAAiB,mBAAmB,GAAG,IAAA,yKAAQ,EAAgB;IACtE,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,yKAAQ,EAAC;IAC3C,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,yKAAQ,EAAC;IAC/C,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,yKAAQ,EAA6B;IAC3E,MAAM,CAAC,gBAAgB,kBAAkB,GAAG,IAAA,yKAAQ,EAAC;IAErD,IAAA,0KAAS;iCAAC;YACR,eAAe;gBACb,IAAI;oBACF,MAAM,CAAC,cAAc,kBAAkB,cAAc,GAAG,MAAM,QAAQ,GAAG,CAAC;wBACxE,MAAM;wBACN,MAAM;wBACN,MAAM;qBACP;oBAED,IAAI,aAAa,EAAE,EAAE;wBACnB,MAAM,WAAW,MAAM,aAAa,IAAI;wBACxC,YAAY;4BACV,UAAU,SAAS,QAAQ,IAAI;4BAC/B,MAAM,SAAS,IAAI,IAAI;4BACvB,OAAO,SAAS,KAAK,IAAI;wBAC3B;oBACF;oBAEA,IAAI,iBAAiB,EAAE,EAAE;wBACvB,MAAM,eAAe,MAAM,iBAAiB,IAAI;wBAChD,IAAI,cAAc,oBAAoB,WAAW;4BAC/C,mBAAmB,OAAO,aAAa,eAAe;wBACxD;wBACA,IAAI,cAAc,wBAAwB,WAAW;4BACnD,uBAAuB,OAAO,aAAa,mBAAmB;wBAChE;oBACF;oBAEA,IAAI,cAAc,EAAE,EAAE;wBACpB,MAAM,YAAY,MAAM,cAAc,IAAI;wBAC1C,aAAa,UAAU,KAAK,IAAI;oBAClC,OAAO;wBACL,kBAAkB;oBACpB;gBACF,EAAE,OAAO,OAAO;oBACd,QAAQ,KAAK,CAAC,mCAAmC;oBACjD,aAAa;oBACb,kBAAkB;gBACpB,SAAU;oBACR,WAAW;gBACb;YACF;YAEA;QACF;gCAAG,EAAE;IAEL,MAAM,cAAc,UAAU,WAC1B,CAAC,CAAC,EAAE,SAAS,QAAQ,EAAE,GACvB,UAAU,QAAQ,UAAU,SAAS;IAEzC,MAAM,aAAa;QACjB,UAAU;QACV,cAAc;QACd,mBAAmB;QAEnB,MAAM,cAAc,OAAO;QAC3B,MAAM,kBAAkB,OAAO;QAE/B,IAAI,CAAC,OAAO,QAAQ,CAAC,gBAAgB,cAAc,GAAG;YACpD,mBAAmB;YACnB,UAAU;YACV;QACF;QAEA,IAAI,CAAC,OAAO,QAAQ,CAAC,oBAAoB,kBAAkB,GAAG;YAC5D,mBAAmB;YACnB,UAAU;YACV;QACF;QAEA,IAAI;YACF,MAAM,WAAW,MAAM,MAAM,sBAAsB;gBACjD,QAAQ;gBACR,SAAS;oBAAE,gBAAgB;gBAAmB;gBAC9C,MAAM,KAAK,SAAS,CAAC;oBACnB,iBAAiB;oBACjB,qBAAqB;gBACvB;YACF;YAEA,IAAI,CAAC,SAAS,EAAE,EAAE;gBAChB,MAAM,IAAI,MAAM;YAClB;YAEA,cAAc;QAChB,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,kCAAkC;YAChD,cAAc;QAChB,SAAU;YACR,UAAU;QACZ;IACF;IAEA,MAAM,kBAAkB;QACtB,eAAe;QACf,eAAe;QAEf,IAAI;YACF,MAAM,WAAW,MAAM,MAAM,cAAc;gBACzC,QAAQ;gBACR,SAAS;oBAAE,gBAAgB;gBAAmB;gBAC9C,MAAM,KAAK,SAAS,CAAC;oBAAE,OAAO;gBAAU;YAC1C;YAEA,IAAI,CAAC,SAAS,EAAE,EAAE;gBAChB,MAAM,IAAI,MAAM;YAClB;YAEA,eAAe;QACjB,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,uBAAuB;YACrC,eAAe;QACjB,SAAU;YACR,eAAe;QACjB;IACF;IAEA,qBACE,6LAAC;QAAI,WAAU;kBACb,cAAA,6LAAC;YAAI,WAAU;sBACb,cAAA,6LAAC;gBAAI,WAAU;;kCACb,6LAAC;wBAAG,WAAU;kCAA2B;;;;;;kCACzC,6LAAC;wBAAE,WAAU;kCAA6B;;;;;;oBAIzC,2BACC,6LAAC;wBAAI,WAAU;kCAA4B;;;;;;kCAG7C,6LAAC;wBAAI,WAAU;;0CACb,6LAAC;gCAAG,WAAU;0CAA0B;;;;;;0CACxC,6LAAC;gCAAE,WAAU;0CAA6B;;;;;;4BAKzC,gCACC,6LAAC;gCAAI,WAAU;0CAA4B;;;;;;0CAG7C,6LAAC;gCAAM,SAAQ;gCAAQ,WAAU;0CAAsC;;;;;;0CAGvE,6LAAC;gCACC,IAAG;gCACH,MAAM;gCACN,OAAO;gCACP,UAAU,CAAC,QAAU,aAAa,MAAM,MAAM,CAAC,KAAK;gCACpD,UAAU,WAAW;gCACrB,aAAY;gCACZ,WAAU;;;;;;0CAGZ,6LAAC;gCAAI,WAAU;;kDACb,6LAAC;wCACC,SAAS;wCACT,UAAU,WAAW;wCACrB,WAAU;kDAET,cAAc,cAAc;;;;;;oCAE9B,gBAAgB,yBACf,6LAAC;wCAAK,WAAU;kDAA2B;;;;;;oCAE5C,gBAAgB,yBACf,6LAAC;wCAAK,WAAU;kDAAuB;;;;;;;;;;;;;;;;;;kCAK7C,6LAAC;wBAAI,WAAU;;0CACb,6LAAC;;kDACC,6LAAC;wCAAM,SAAQ;wCAAY,WAAU;kDAAsC;;;;;;kDAG3E,6LAAC;wCACC,IAAG;wCACH,MAAK;wCACL,KAAI;wCACJ,OAAO;wCACP,UAAU,CAAC,QAAU,mBAAmB,MAAM,MAAM,CAAC,KAAK;wCAC1D,UAAU,WAAW;wCACrB,WAAU;;;;;;;;;;;;0CAId,6LAAC;;kDACC,6LAAC;wCAAM,SAAQ;wCAAqB,WAAU;kDAAsC;;;;;;kDAGpF,6LAAC;wCACC,IAAG;wCACH,MAAK;wCACL,KAAI;wCACJ,OAAO;wCACP,UAAU,CAAC,QAAU,uBAAuB,MAAM,MAAM,CAAC,KAAK;wCAC9D,UAAU,WAAW;wCACrB,WAAU;;;;;;;;;;;;;;;;;;oBAKf,iCACC,6LAAC;wBAAI,WAAU;kCAA6B;;;;;;kCAG9C,6LAAC;wBAAI,WAAU;;0CACb,6LAAC;gCACC,SAAS;gCACT,UAAU,UAAU;gCACpB,WAAU;0CAET,SAAS,cAAc;;;;;;4BAEzB,eAAe,yBACd,6LAAC;gCAAK,WAAU;0CAA2B;;;;;;4BAE5C,eAAe,yBACd,6LAAC;gCAAK,WAAU;0CAAuB;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAOrD;GAhPwB;KAAA"}}]
}