{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 22, "column": 0}, "map": {"version":3,"sources":["file:///Users/devamshroff/Documents/SWE%20Career/projects/gymmer/app/routines/browse/page.tsx"],"sourcesContent":["'use client';\n\nimport { useEffect, useState } from 'react';\nimport Link from 'next/link';\nimport { useRouter } from 'next/navigation';\n\ninterface PublicRoutine {\n  id: number;\n  name: string;\n  description: string | null;\n  user_id: string;\n  creator_username: string | null;\n  creator_name: string | null;\n  created_at: string;\n}\n\nexport default function BrowseRoutinesPage() {\n  const router = useRouter();\n  const [routines, setRoutines] = useState<PublicRoutine[]>([]);\n  const [favoritedIds, setFavoritedIds] = useState<Set<number>>(new Set());\n  const [loading, setLoading] = useState(true);\n  const [actionInProgress, setActionInProgress] = useState<number | null>(null);\n\n  useEffect(() => {\n    fetchPublicRoutines();\n  }, []);\n\n  async function fetchPublicRoutines() {\n    try {\n      const response = await fetch('/api/routines/public');\n      if (response.ok) {\n        const data = await response.json();\n        setRoutines(data.routines || []);\n\n        // Check which ones are already favorited\n        const favResponse = await fetch('/api/routines/favorites');\n        if (favResponse.ok) {\n          const favData = await favResponse.json();\n          const favIds = new Set((favData.routines || []).map((r: any) => r.id));\n          setFavoritedIds(favIds as Set<number>);\n        }\n      }\n    } catch (error) {\n      console.error('Error fetching public routines:', error);\n    } finally {\n      setLoading(false);\n    }\n  }\n\n  async function toggleFavorite(routineId: number) {\n    setActionInProgress(routineId);\n    const isFavorited = favoritedIds.has(routineId);\n\n    try {\n      const response = await fetch(`/api/routines/${routineId}/favorite`, {\n        method: isFavorited ? 'DELETE' : 'POST',\n      });\n\n      if (response.ok) {\n        const newFavorites = new Set(favoritedIds);\n        if (isFavorited) {\n          newFavorites.delete(routineId);\n        } else {\n          newFavorites.add(routineId);\n        }\n        setFavoritedIds(newFavorites);\n      }\n    } catch (error) {\n      console.error('Error toggling favorite:', error);\n    } finally {\n      setActionInProgress(null);\n    }\n  }\n\n  async function cloneRoutine(routineId: number, routineName: string) {\n    setActionInProgress(routineId);\n\n    try {\n      const response = await fetch(`/api/routines/${routineId}/clone`, {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ name: `${routineName} (Copy)` }),\n      });\n\n      if (response.ok) {\n        const data = await response.json();\n        router.push(`/routines/${data.routineId}`);\n      } else {\n        const data = await response.json();\n        alert(data.error || 'Failed to clone routine');\n      }\n    } catch (error) {\n      console.error('Error cloning routine:', error);\n      alert('Failed to clone routine');\n    } finally {\n      setActionInProgress(null);\n    }\n  }\n\n  if (loading) {\n    return (\n      <div className=\"min-h-screen bg-zinc-900 flex items-center justify-center p-4\">\n        <div className=\"text-white text-2xl\">Loading...</div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen bg-zinc-900 p-4\">\n      <main className=\"max-w-2xl mx-auto py-8\">\n        <div className=\"flex items-center gap-4 mb-8\">\n          <Link\n            href=\"/\"\n            className=\"text-zinc-400 hover:text-white transition-colors\"\n          >\n            <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-6 w-6\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M15 19l-7-7 7-7\" />\n            </svg>\n          </Link>\n          <h1 className=\"text-3xl font-bold text-white\">Browse Public Routines</h1>\n        </div>\n\n        <p className=\"text-zinc-400 mb-6\">\n          Discover routines shared by other users. Favorite them to use directly, or clone to customize.\n        </p>\n\n        {routines.length === 0 ? (\n          <div className=\"text-center text-zinc-500 text-lg py-12\">\n            No public routines available yet.\n          </div>\n        ) : (\n          <div className=\"space-y-4\">\n            {routines.map((routine) => {\n              const isFavorited = favoritedIds.has(routine.id);\n              const isProcessing = actionInProgress === routine.id;\n\n              return (\n                <div\n                  key={routine.id}\n                  className=\"bg-zinc-800 rounded-lg p-6 border-2 border-zinc-700\"\n                >\n                  <div className=\"flex items-start justify-between mb-3\">\n                    <div className=\"flex-1\">\n                      <h3 className=\"text-xl font-semibold text-white mb-1\">\n                        {routine.name}\n                      </h3>\n                      <p className=\"text-sm text-zinc-400\">\n                        by{' '}\n                        <span className=\"text-purple-400\">\n                          @{routine.creator_username || routine.creator_name || 'Anonymous'}\n                        </span>\n                      </p>\n                    </div>\n                  </div>\n\n                  {routine.description && (\n                    <p className=\"text-zinc-400 text-sm mb-4\">{routine.description}</p>\n                  )}\n\n                  <div className=\"flex gap-3\">\n                    {/* Favorite Button */}\n                    <button\n                      onClick={() => toggleFavorite(routine.id)}\n                      disabled={isProcessing}\n                      className={`flex items-center gap-2 px-4 py-2 rounded-lg font-medium transition-colors ${\n                        isFavorited\n                          ? 'bg-red-600 hover:bg-red-700 text-white'\n                          : 'bg-zinc-700 hover:bg-zinc-600 text-zinc-300'\n                      } disabled:opacity-50`}\n                    >\n                      <svg\n                        xmlns=\"http://www.w3.org/2000/svg\"\n                        className=\"h-5 w-5\"\n                        fill={isFavorited ? 'currentColor' : 'none'}\n                        viewBox=\"0 0 24 24\"\n                        stroke=\"currentColor\"\n                        strokeWidth={isFavorited ? 0 : 2}\n                      >\n                        <path d=\"M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z\"/>\n                      </svg>\n                      {isFavorited ? 'Favorited' : 'Favorite'}\n                    </button>\n\n                    {/* Use Routine Button (links to workout page) */}\n                    <Link\n                      href={`/workout/${encodeURIComponent(routine.name)}?routineId=${routine.id}`}\n                      className=\"flex items-center gap-2 px-4 py-2 rounded-lg font-medium bg-green-600 hover:bg-green-700 text-white transition-colors\"\n                    >\n                      <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-5 w-5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z\" />\n                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M21 12a9 9 0 11-18 0 9 9 0 0118 0z\" />\n                      </svg>\n                      Start\n                    </Link>\n\n                    {/* Clone Button */}\n                    <button\n                      onClick={() => cloneRoutine(routine.id, routine.name)}\n                      disabled={isProcessing}\n                      className=\"flex items-center gap-2 px-4 py-2 rounded-lg font-medium bg-blue-600 hover:bg-blue-700 text-white transition-colors disabled:opacity-50\"\n                    >\n                      <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-5 w-5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z\" />\n                      </svg>\n                      Clone\n                    </button>\n                  </div>\n                </div>\n              );\n            })}\n          </div>\n        )}\n      </main>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}}]
}