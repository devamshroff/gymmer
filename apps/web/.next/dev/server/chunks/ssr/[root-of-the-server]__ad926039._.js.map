{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 22, "column": 0}, "map": {"version":3,"sources":["file:///Users/devamshroff/Documents/SWE%20Career/projects/gymmer/app/components/Header.tsx"],"sourcesContent":["'use client';\n\nimport Link from 'next/link';\n\nexport default function Header() {\n  return (\n    <Link href=\"/\" className=\"block text-center mb-6\">\n      <span className=\"text-2xl font-bold text-emerald-700\">GYMMER</span>\n    </Link>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AAFA;;;AAIe,SAAS;IACtB,qBACE,8OAAC,uKAAI;QAAC,MAAK;QAAI,WAAU;kBACvB,cAAA,8OAAC;YAAK,WAAU;sBAAsC;;;;;;;;;;;AAG5D"}},
    {"offset": {"line": 53, "column": 0}, "map": {"version":3,"sources":["file:///Users/devamshroff/Documents/SWE%20Career/projects/gymmer/app/routines/ai/page.tsx"],"sourcesContent":["'use client';\n\nimport { useEffect, useMemo, useState } from 'react';\nimport { useRouter } from 'next/navigation';\nimport Header from '@/app/components/Header';\n\ntype Message = {\n  role: 'user' | 'assistant';\n  content: string;\n};\n\nconst STORAGE_KEY = 'ai_routine_draft';\nconst PROMPT_KEY = 'ai_routine_prompt';\n\nfunction buildPreview(plan: any) {\n  return {\n    name: plan?.name || 'Untitled',\n    exercises: Array.isArray(plan?.exercises) ? plan.exercises.length : 0,\n    preStretches: Array.isArray(plan?.preWorkoutStretches) ? plan.preWorkoutStretches.length : 0,\n    postStretches: Array.isArray(plan?.postWorkoutStretches) ? plan.postWorkoutStretches.length : 0,\n    hasCardio: !!plan?.cardio,\n  };\n}\n\nexport default function AiRoutinePage() {\n  const router = useRouter();\n  const [messages, setMessages] = useState<Message[]>([]);\n  const [prompt, setPrompt] = useState('');\n  const [generating, setGenerating] = useState(false);\n  const [generatingDots, setGeneratingDots] = useState('.');\n  const [planText, setPlanText] = useState('');\n  const [error, setError] = useState<string | null>(null);\n  const [success, setSuccess] = useState<string | null>(null);\n  const [generated, setGenerated] = useState(false);\n\n  const parsedPlan = useMemo(() => {\n    if (!planText.trim()) return null;\n    try {\n      return JSON.parse(planText);\n    } catch {\n      return null;\n    }\n  }, [planText]);\n\n  const preview = useMemo(() => buildPreview(parsedPlan), [parsedPlan]);\n\n  useEffect(() => {\n    if (!generating) {\n      setGeneratingDots('.');\n      return;\n    }\n\n    const timer = setInterval(() => {\n      setGeneratingDots((prev) => {\n        if (prev === '...') return '.';\n        return `${prev}.`;\n      });\n    }, 450);\n\n    return () => clearInterval(timer);\n  }, [generating]);\n\n  useEffect(() => {\n    const storedPrompt = localStorage.getItem(PROMPT_KEY);\n    if (storedPrompt) {\n      setPrompt(storedPrompt);\n    }\n  }, []);\n\n  const handleGenerate = async () => {\n    const trimmedPrompt = prompt.trim();\n    if (!trimmedPrompt) return;\n\n    setGenerating(true);\n    setError(null);\n    setSuccess(null);\n    setGenerated(false);\n    localStorage.setItem(PROMPT_KEY, trimmedPrompt);\n    setMessages((prev) => [...prev, { role: 'user', content: trimmedPrompt }]);\n\n    try {\n      const response = await fetch('/api/routines/ai-generate', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ prompt: trimmedPrompt }),\n      });\n\n      if (!response.ok) {\n        const errorData = await response.json().catch(() => ({}));\n        throw new Error(errorData.error || 'Failed to generate routine');\n      }\n\n      const data = await response.json();\n      const text = JSON.stringify(data.workoutPlan, null, 2);\n      setPlanText(text);\n      setGenerated(true);\n      setMessages((prev) => [\n        ...prev,\n        { role: 'assistant', content: `Generated \"${data.workoutPlan.name}\". Review and edit below.` },\n      ]);\n      setPrompt('');\n    } catch (err: any) {\n      setError(err.message || 'Failed to generate routine');\n    } finally {\n      setGenerating(false);\n    }\n  };\n\n  const handleViewWorkout = () => {\n    if (!planText.trim()) return;\n    try {\n      JSON.parse(planText);\n    } catch {\n      setError('JSON is invalid. Please fix it before previewing.');\n      return;\n    }\n    localStorage.setItem(STORAGE_KEY, planText);\n    router.push('/routines/ai/preview');\n  };\n\n  return (\n    <div className=\"min-h-screen bg-zinc-900 p-4\">\n      <div className=\"max-w-3xl mx-auto py-8\">\n        <Header />\n        <div className=\"flex items-center justify-between mb-6\">\n          <h1 className=\"text-3xl font-bold text-white\">AI-Assisted Routine</h1>\n          <button\n            onClick={() => router.push('/')}\n            className=\"text-zinc-400 hover:text-zinc-200 text-sm font-semibold\"\n          >\n            Exit\n          </button>\n        </div>\n\n        <div className=\"bg-zinc-800 rounded-lg p-6 border-2 border-emerald-700 mb-6\">\n          <h2 className=\"text-lg font-semibold text-white mb-2\">Describe your workout</h2>\n          <p className=\"text-zinc-400 text-sm mb-4\">\n            Include your goals, target muscles, exercises you dislike, injuries or restrictions,\n            where you’re working out (home/gym), available equipment, and time.\n          </p>\n          <textarea\n            value={prompt}\n            onChange={(e) => setPrompt(e.target.value)}\n            placeholder=\"Example: 45-minute pull day focused on hypertrophy. Target lats and biceps. No deadlifts. Mild shoulder impingement. Home gym with dumbbells and pull-up bar.\"\n            className=\"w-full min-h-[120px] bg-zinc-900 text-white p-4 rounded-lg border border-zinc-700 focus:outline-none focus:ring-2 focus:ring-emerald-500 mb-4\"\n          />\n          <div className=\"flex items-center gap-3\">\n            <div className=\"flex flex-col gap-2\">\n              {generated && (\n                <div className=\"text-emerald-200 text-sm font-semibold flex items-center gap-2\">\n                  <span className=\"text-xl\">✓</span> Routine generated!\n                </div>\n              )}\n              <button\n                onClick={handleGenerate}\n                disabled={!prompt.trim() || generating}\n                className=\"bg-emerald-600 hover:bg-emerald-700 disabled:bg-emerald-900 disabled:cursor-not-allowed text-white px-6 py-3 rounded-lg font-semibold\"\n              >\n                {generating ? `Generating${generatingDots}` : 'Generate Routine'}\n              </button>\n            </div>\n            <button\n              onClick={() => setPrompt('')}\n              disabled={!prompt.trim() || generating}\n              className=\"text-zinc-400 hover:text-zinc-200 text-sm\"\n            >\n              Clear\n            </button>\n          </div>\n        </div>\n\n        {messages.length > 0 && (\n          <div className=\"bg-zinc-800 rounded-lg p-6 border border-zinc-700 mb-6\">\n            <h2 className=\"text-lg font-semibold text-white mb-4\">Conversation</h2>\n            <div className=\"space-y-3\">\n              {messages.map((message, index) => (\n                <div\n                  key={`${message.role}-${index}`}\n                  className={message.role === 'user'\n                    ? 'bg-zinc-900 text-zinc-200 p-3 rounded-lg'\n                    : 'bg-emerald-900/40 text-emerald-100 p-3 rounded-lg'}\n                >\n                  <div className=\"text-xs uppercase tracking-wide mb-1 text-zinc-400\">\n                    {message.role === 'user' ? 'You' : 'Assistant'}\n                  </div>\n                  <div className=\"text-sm whitespace-pre-wrap\">{message.content}</div>\n                </div>\n              ))}\n            </div>\n          </div>\n        )}\n\n        <div className=\"bg-zinc-800 rounded-lg p-6 border border-zinc-700\">\n          <h2 className=\"text-lg font-semibold text-white mb-3\">Routine Preview</h2>\n          {parsedPlan ? (\n            <div className=\"space-y-4\">\n              <div className=\"space-y-2 text-sm text-zinc-300\">\n                <div><span className=\"text-zinc-500\">Name:</span> {preview.name}</div>\n                <div><span className=\"text-zinc-500\">Exercises:</span> {preview.exercises}</div>\n                <div><span className=\"text-zinc-500\">Pre-stretches:</span> {preview.preStretches}</div>\n                <div><span className=\"text-zinc-500\">Post-stretches:</span> {preview.postStretches}</div>\n                <div><span className=\"text-zinc-500\">Cardio:</span> {preview.hasCardio ? 'Yes' : 'No'}</div>\n              </div>\n              <button\n                onClick={handleViewWorkout}\n                className=\"w-full bg-emerald-600 hover:bg-emerald-700 text-white py-3 rounded-lg text-sm font-semibold\"\n              >\n                View Workout\n              </button>\n            </div>\n          ) : (\n            <div className=\"text-zinc-500 text-sm\">\n              Generate a routine to preview it here.\n            </div>\n          )}\n        </div>\n\n        {error && (\n          <div className=\"mt-6 bg-red-900/50 border border-red-600 text-red-200 px-4 py-3 rounded-lg\">\n            {error}\n          </div>\n        )}\n        {success && (\n          <div className=\"mt-6 bg-emerald-900/50 border border-emerald-600 text-emerald-200 px-4 py-3 rounded-lg\">\n            {success}\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}}]
}