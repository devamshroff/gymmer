{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 10, "column": 0}, "map": {"version":3,"sources":["file:///Users/devamshroff/Documents/SWE%20Career/projects/gymmer/app/page.tsx"],"sourcesContent":["'use client';\n\nimport { useEffect, useState } from 'react';\nimport Link from 'next/link';\n\ninterface Routine {\n  id: number;\n  name: string;\n  description: string | null;\n  is_custom: number;\n  source_file: string | null;\n  created_at: string;\n  updated_at: string;\n}\n\nexport default function Home() {\n  const [routines, setRoutines] = useState<Routine[]>([]);\n  const [lastWorkoutDates, setLastWorkoutDates] = useState<Record<string, string | null>>({});\n  const [loading, setLoading] = useState(true);\n  const [editingId, setEditingId] = useState<number | null>(null);\n  const [editingName, setEditingName] = useState('');\n\n  useEffect(() => {\n    fetchRoutines();\n  }, []);\n\n  async function fetchRoutines() {\n    try {\n      // Fetch all routines from database\n      const routinesResponse = await fetch('/api/routines');\n      const routinesData = await routinesResponse.json();\n      setRoutines(routinesData.routines);\n\n      // Fetch last workout date for each routine\n      const dates: Record<string, string | null> = {};\n      for (const routine of routinesData.routines) {\n        try {\n          const historyResponse = await fetch(`/api/workout-history?name=${encodeURIComponent(routine.name)}`);\n          const historyData = await historyResponse.json();\n          dates[routine.name] = historyData.lastDate;\n        } catch (error) {\n          console.error(`Error fetching history for ${routine.name}:`, error);\n          dates[routine.name] = null;\n        }\n      }\n\n      setLastWorkoutDates(dates);\n    } catch (error) {\n      console.error('Error fetching routines:', error);\n    } finally {\n      setLoading(false);\n    }\n  }\n\n  function startEditing(routine: Routine, e: React.MouseEvent) {\n    e.preventDefault();\n    e.stopPropagation();\n    setEditingId(routine.id);\n    setEditingName(routine.name);\n  }\n\n  function cancelEditing(e: React.MouseEvent) {\n    e.preventDefault();\n    e.stopPropagation();\n    setEditingId(null);\n    setEditingName('');\n  }\n\n  async function saveRoutineName(routineId: number, e: React.MouseEvent) {\n    e.preventDefault();\n    e.stopPropagation();\n\n    if (!editingName.trim()) return;\n\n    try {\n      const response = await fetch(`/api/routines/${routineId}`, {\n        method: 'PUT',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ name: editingName.trim() }),\n      });\n\n      if (response.ok) {\n        setRoutines(routines.map(r =>\n          r.id === routineId ? { ...r, name: editingName.trim() } : r\n        ));\n        setEditingId(null);\n        setEditingName('');\n      }\n    } catch (error) {\n      console.error('Error updating routine name:', error);\n    }\n  }\n\n  if (loading) {\n    return (\n      <div className=\"min-h-screen bg-zinc-900 flex items-center justify-center p-4\">\n        <div className=\"text-white text-2xl\">Loading...</div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen bg-zinc-900 p-4\">\n      <main className=\"max-w-2xl mx-auto py-8\">\n        <h1 className=\"text-4xl font-bold text-white mb-8 text-center\">\n          <span className=\"block text-gray-200\">welcome to</span>\n          <span className=\"text-emerald-700 font-bold\">GYMMER</span>\n        </h1>\n\n        {/* Create New Routine Button */}\n        <Link\n          href=\"/routines/builder\"\n          className=\"mb-6 block w-full bg-green-600 hover:bg-green-700 text-white text-center py-4 rounded-lg text-lg font-bold transition-colors\"\n        >\n          + Create New Routine\n        </Link>\n\n        <div className=\"space-y-4\">\n          {routines.length === 0 ? (\n            <div className=\"text-center text-zinc-400 text-lg\">\n              No routines found. Create a custom routine or import your workout plans.\n            </div>\n          ) : (\n            routines.map((routine) => {\n              const lastDate = lastWorkoutDates[routine.name];\n              const formattedDate = lastDate\n                ? new Date(lastDate).toLocaleDateString('en-US', {\n                    month: 'short',\n                    day: 'numeric',\n                    year: 'numeric',\n                  })\n                : 'Never';\n              const isEditing = editingId === routine.id;\n\n              return (\n                <div\n                  key={`routine-${routine.id}`}\n                  className=\"bg-zinc-800 hover:bg-zinc-700 transition-colors rounded-lg p-6 border-2 border-zinc-700\"\n                >\n                  <div className=\"flex items-center justify-between mb-2\">\n                    {isEditing ? (\n                      <div className=\"flex items-center gap-2 flex-1\">\n                        <input\n                          type=\"text\"\n                          value={editingName}\n                          onChange={(e) => setEditingName(e.target.value)}\n                          onClick={(e) => e.stopPropagation()}\n                          onKeyDown={(e) => {\n                            if (e.key === 'Enter') saveRoutineName(routine.id, e as any);\n                            if (e.key === 'Escape') { setEditingId(null); setEditingName(''); }\n                          }}\n                          className=\"flex-1 bg-zinc-700 text-white text-xl font-semibold px-3 py-1 rounded border border-zinc-500 focus:outline-none focus:border-green-500\"\n                          autoFocus\n                        />\n                        <button\n                          onClick={(e) => saveRoutineName(routine.id, e)}\n                          className=\"text-green-500 hover:text-green-400 p-1\"\n                          title=\"Save\"\n                        >\n                          <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-6 w-6\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M5 13l4 4L19 7\" />\n                          </svg>\n                        </button>\n                        <button\n                          onClick={cancelEditing}\n                          className=\"text-zinc-400 hover:text-zinc-300 p-1\"\n                          title=\"Cancel\"\n                        >\n                          <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-6 w-6\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" />\n                          </svg>\n                        </button>\n                      </div>\n                    ) : (\n                      <>\n                        <Link\n                          href={`/workout/${encodeURIComponent(routine.name)}`}\n                          className=\"text-2xl font-semibold text-white hover:text-green-400 transition-colors\"\n                        >\n                          {routine.name}\n                        </Link>\n                        <button\n                          onClick={(e) => startEditing(routine, e)}\n                          className=\"text-zinc-500 hover:text-zinc-300 p-1 ml-2\"\n                          title=\"Edit name\"\n                        >\n                          <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-5 w-5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z\" />\n                          </svg>\n                        </button>\n                      </>\n                    )}\n                  </div>\n                  <Link\n                    href={`/workout/${encodeURIComponent(routine.name)}`}\n                    className=\"block\"\n                  >\n                    <div className=\"flex justify-between items-center\">\n                      <div className=\"text-zinc-400\">\n                        {routine.description || '\\u00A0'}\n                      </div>\n                      <div className=\"text-sm text-zinc-500\">\n                        Last: <span className={lastDate ? \"text-blue-400\" : \"text-zinc-600\"}>{formattedDate}</span>\n                      </div>\n                    </div>\n                  </Link>\n                </div>\n              );\n            })\n          )}\n        </div>\n\n        <Link\n          href=\"/routines/import\"\n          className=\"mt-8 block w-full bg-blue-600 hover:bg-blue-700 text-white text-center py-4 rounded-lg text-lg font-semibold transition-colors\"\n        >\n          Import Routine from JSON\n        </Link>\n      </main>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAHA;;;;AAee,SAAS;IACtB,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,iNAAQ,EAAY,EAAE;IACtD,MAAM,CAAC,kBAAkB,oBAAoB,GAAG,IAAA,iNAAQ,EAAgC,CAAC;IACzF,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAC;IACvC,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,iNAAQ,EAAgB;IAC1D,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,iNAAQ,EAAC;IAE/C,IAAA,kNAAS,EAAC;QACR;IACF,GAAG,EAAE;IAEL,eAAe;QACb,IAAI;YACF,mCAAmC;YACnC,MAAM,mBAAmB,MAAM,MAAM;YACrC,MAAM,eAAe,MAAM,iBAAiB,IAAI;YAChD,YAAY,aAAa,QAAQ;YAEjC,2CAA2C;YAC3C,MAAM,QAAuC,CAAC;YAC9C,KAAK,MAAM,WAAW,aAAa,QAAQ,CAAE;gBAC3C,IAAI;oBACF,MAAM,kBAAkB,MAAM,MAAM,CAAC,0BAA0B,EAAE,mBAAmB,QAAQ,IAAI,GAAG;oBACnG,MAAM,cAAc,MAAM,gBAAgB,IAAI;oBAC9C,KAAK,CAAC,QAAQ,IAAI,CAAC,GAAG,YAAY,QAAQ;gBAC5C,EAAE,OAAO,OAAO;oBACd,QAAQ,KAAK,CAAC,CAAC,2BAA2B,EAAE,QAAQ,IAAI,CAAC,CAAC,CAAC,EAAE;oBAC7D,KAAK,CAAC,QAAQ,IAAI,CAAC,GAAG;gBACxB;YACF;YAEA,oBAAoB;QACtB,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,4BAA4B;QAC5C,SAAU;YACR,WAAW;QACb;IACF;IAEA,SAAS,aAAa,OAAgB,EAAE,CAAmB;QACzD,EAAE,cAAc;QAChB,EAAE,eAAe;QACjB,aAAa,QAAQ,EAAE;QACvB,eAAe,QAAQ,IAAI;IAC7B;IAEA,SAAS,cAAc,CAAmB;QACxC,EAAE,cAAc;QAChB,EAAE,eAAe;QACjB,aAAa;QACb,eAAe;IACjB;IAEA,eAAe,gBAAgB,SAAiB,EAAE,CAAmB;QACnE,EAAE,cAAc;QAChB,EAAE,eAAe;QAEjB,IAAI,CAAC,YAAY,IAAI,IAAI;QAEzB,IAAI;YACF,MAAM,WAAW,MAAM,MAAM,CAAC,cAAc,EAAE,WAAW,EAAE;gBACzD,QAAQ;gBACR,SAAS;oBAAE,gBAAgB;gBAAmB;gBAC9C,MAAM,KAAK,SAAS,CAAC;oBAAE,MAAM,YAAY,IAAI;gBAAG;YAClD;YAEA,IAAI,SAAS,EAAE,EAAE;gBACf,YAAY,SAAS,GAAG,CAAC,CAAA,IACvB,EAAE,EAAE,KAAK,YAAY;wBAAE,GAAG,CAAC;wBAAE,MAAM,YAAY,IAAI;oBAAG,IAAI;gBAE5D,aAAa;gBACb,eAAe;YACjB;QACF,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,gCAAgC;QAChD;IACF;IAEA,IAAI,SAAS;QACX,qBACE,8OAAC;YAAI,WAAU;sBACb,cAAA,8OAAC;gBAAI,WAAU;0BAAsB;;;;;;;;;;;IAG3C;IAEA,qBACE,8OAAC;QAAI,WAAU;kBACb,cAAA,8OAAC;YAAK,WAAU;;8BACd,8OAAC;oBAAG,WAAU;;sCACZ,8OAAC;4BAAK,WAAU;sCAAsB;;;;;;sCACtC,8OAAC;4BAAK,WAAU;sCAA6B;;;;;;;;;;;;8BAI/C,8OAAC,uKAAI;oBACH,MAAK;oBACL,WAAU;8BACX;;;;;;8BAID,8OAAC;oBAAI,WAAU;8BACZ,SAAS,MAAM,KAAK,kBACnB,8OAAC;wBAAI,WAAU;kCAAoC;;;;;+BAInD,SAAS,GAAG,CAAC,CAAC;wBACZ,MAAM,WAAW,gBAAgB,CAAC,QAAQ,IAAI,CAAC;wBAC/C,MAAM,gBAAgB,WAClB,IAAI,KAAK,UAAU,kBAAkB,CAAC,SAAS;4BAC7C,OAAO;4BACP,KAAK;4BACL,MAAM;wBACR,KACA;wBACJ,MAAM,YAAY,cAAc,QAAQ,EAAE;wBAE1C,qBACE,8OAAC;4BAEC,WAAU;;8CAEV,8OAAC;oCAAI,WAAU;8CACZ,0BACC,8OAAC;wCAAI,WAAU;;0DACb,8OAAC;gDACC,MAAK;gDACL,OAAO;gDACP,UAAU,CAAC,IAAM,eAAe,EAAE,MAAM,CAAC,KAAK;gDAC9C,SAAS,CAAC,IAAM,EAAE,eAAe;gDACjC,WAAW,CAAC;oDACV,IAAI,EAAE,GAAG,KAAK,SAAS,gBAAgB,QAAQ,EAAE,EAAE;oDACnD,IAAI,EAAE,GAAG,KAAK,UAAU;wDAAE,aAAa;wDAAO,eAAe;oDAAK;gDACpE;gDACA,WAAU;gDACV,SAAS;;;;;;0DAEX,8OAAC;gDACC,SAAS,CAAC,IAAM,gBAAgB,QAAQ,EAAE,EAAE;gDAC5C,WAAU;gDACV,OAAM;0DAEN,cAAA,8OAAC;oDAAI,OAAM;oDAA6B,WAAU;oDAAU,MAAK;oDAAO,SAAQ;oDAAY,QAAO;8DACjG,cAAA,8OAAC;wDAAK,eAAc;wDAAQ,gBAAe;wDAAQ,aAAa;wDAAG,GAAE;;;;;;;;;;;;;;;;0DAGzE,8OAAC;gDACC,SAAS;gDACT,WAAU;gDACV,OAAM;0DAEN,cAAA,8OAAC;oDAAI,OAAM;oDAA6B,WAAU;oDAAU,MAAK;oDAAO,SAAQ;oDAAY,QAAO;8DACjG,cAAA,8OAAC;wDAAK,eAAc;wDAAQ,gBAAe;wDAAQ,aAAa;wDAAG,GAAE;;;;;;;;;;;;;;;;;;;;;6DAK3E;;0DACE,8OAAC,uKAAI;gDACH,MAAM,CAAC,SAAS,EAAE,mBAAmB,QAAQ,IAAI,GAAG;gDACpD,WAAU;0DAET,QAAQ,IAAI;;;;;;0DAEf,8OAAC;gDACC,SAAS,CAAC,IAAM,aAAa,SAAS;gDACtC,WAAU;gDACV,OAAM;0DAEN,cAAA,8OAAC;oDAAI,OAAM;oDAA6B,WAAU;oDAAU,MAAK;oDAAO,SAAQ;oDAAY,QAAO;8DACjG,cAAA,8OAAC;wDAAK,eAAc;wDAAQ,gBAAe;wDAAQ,aAAa;wDAAG,GAAE;;;;;;;;;;;;;;;;;;;;;;;8CAM/E,8OAAC,uKAAI;oCACH,MAAM,CAAC,SAAS,EAAE,mBAAmB,QAAQ,IAAI,GAAG;oCACpD,WAAU;8CAEV,cAAA,8OAAC;wCAAI,WAAU;;0DACb,8OAAC;gDAAI,WAAU;0DACZ,QAAQ,WAAW,IAAI;;;;;;0DAE1B,8OAAC;gDAAI,WAAU;;oDAAwB;kEAC/B,8OAAC;wDAAK,WAAW,WAAW,kBAAkB;kEAAkB;;;;;;;;;;;;;;;;;;;;;;;;2BAlEvE,CAAC,QAAQ,EAAE,QAAQ,EAAE,EAAE;;;;;oBAwElC;;;;;;8BAIJ,8OAAC,uKAAI;oBACH,MAAK;oBACL,WAAU;8BACX;;;;;;;;;;;;;;;;;AAMT"}}]
}