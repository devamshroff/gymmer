(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,49448,e=>{"use strict";var t=e.i(43476);function s({children:e,className:s="",paddingClassName:r,borderClassName:n="border-zinc-700",borderWidthClassName:i="border-2"}){return(0,t.jsx)("div",{className:`bg-zinc-800 rounded-lg ${i} ${n} ${r||"p-4"} ${s}`.trim(),children:e})}function r({message:e,description:s,className:r=""}){return(0,t.jsxs)("div",{className:`text-zinc-500 text-center py-4 bg-zinc-800 rounded-lg ${r}`.trim(),children:[(0,t.jsx)("div",{children:e}),s&&(0,t.jsx)("div",{className:"text-zinc-600 text-sm mt-1",children:s})]})}function n({children:e,maxWidthClassName:s="max-w-2xl",className:r=""}){return(0,t.jsx)("div",{className:`fixed bottom-0 left-0 right-0 p-4 bg-zinc-900 border-t border-zinc-800 ${r}`.trim(),children:(0,t.jsx)("div",{className:`${s} mx-auto`,children:e})})}function i({icon:e,label:s,iconClassName:r="text-zinc-400",className:n=""}){return(0,t.jsxs)("h2",{className:`text-xl font-bold text-white mb-4 flex items-center gap-2 ${n}`.trim(),children:[(0,t.jsx)("span",{className:r,children:e}),s]})}e.s(["BottomActionBar",()=>n,"Card",()=>s,"EmptyState",()=>r,"SectionHeader",()=>i])},20970,e=>{"use strict";function t(e,t){let s=encodeURIComponent(e),r=t?encodeURIComponent(t):"default";return`workout_bootstrap:${s}:${r}`}function s(e){return`routine_edit_version:${e}`}function r(e){if(null==e)return null;let t=s(`id:${e}`);return localStorage.getItem(t)??"0"}function n(e){if(!e)return null;let t=s(`name:${encodeURIComponent(e)}`);return localStorage.getItem(t)??"0"}function i(e){let{workoutName:s,routineId:i}=e,l=[t(s,i)];for(let e of(i&&l.push(t(s,null)),l)){let t=sessionStorage.getItem(e);if(t)try{let l=JSON.parse(t);if(!function(e,t,s){let i=r(s);if(e.editVersionId&&i&&e.editVersionId!==i)return!1;let l=n(t);return!e.editVersionName||!l||e.editVersionName===l}(l,s,i)){sessionStorage.removeItem(e);continue}return l}catch(t){console.error("Failed to parse workout bootstrap cache:",t),sessionStorage.removeItem(e)}}return null}function l(e){let{workoutName:s,routineId:i,payload:l}=e,o=JSON.stringify({...l,cachedAt:new Date().toISOString(),editVersionId:r(i),editVersionName:n(s)});sessionStorage.setItem(t(s,i),o),i&&sessionStorage.setItem(t(s,null),o)}function o(e){let r;r=String(Date.now()),null!==e.routineId&&void 0!==e.routineId&&localStorage.setItem(s(`id:${e.routineId}`),r),e.routineName&&localStorage.setItem(s(`name:${encodeURIComponent(e.routineName)}`),r),e.routineName&&function(e){let{workoutName:s,routineId:r}=e;sessionStorage.removeItem(t(s,r)),r&&sessionStorage.removeItem(t(s,null))}({workoutName:e.routineName,routineId:e.routineId?String(e.routineId):null})}e.s(["invalidateWorkoutBootstrapCache",()=>o,"loadWorkoutBootstrapCache",()=>i,"saveWorkoutBootstrapCache",()=>l])},18566,(e,t,s)=>{t.exports=e.r(76562)},71829,e=>{"use strict";let t={progress:"progress",maintenance:"maintenance",light:"light"},s={[t.progress]:"Progress",[t.maintenance]:"Maintenance",[t.light]:"Light"},r={[t.progress]:"Push for small, steady improvements.",[t.maintenance]:"Hold steady and focus on form.",[t.light]:"Easy effort today."};e.s(["EXERCISE_HISTORY_AGGREGATION_MODES",0,{max:"max",avg:"avg"},"EXERCISE_HISTORY_DISPLAY_MODES",0,{weight:"weight",reps:"reps"},"EXERCISE_PRIMARY_METRICS",0,{weight:"weight",height:"height",time:"time",distance:"distance",repsOnly:"reps_only"},"EXERCISE_TYPES",0,{single:"single",b2b:"b2b",circuit:"circuit"},"SESSION_MODES",0,t,"SESSION_MODE_DESCRIPTIONS",0,r,"SESSION_MODE_LABELS",0,s])},78806,e=>{"use strict";let t=["lower body compound","upper body compound","full body compound","chest","back","shoulders","biceps","triceps","forearms","core","lower back","glutes","quads","hamstrings","calves","hip flexors","adductors","abductors","unknown"],s=[...t],r=[...t],n=[...s];function i(e,t,s=2){if(!e)return[];try{let r=JSON.parse(e);return function(e,t,s=2){let r=Array.isArray(e)?e:"string"==typeof e?[e]:[];if(0===r.length)return[];let n=r.map(e=>"string"==typeof e?e.trim().toLowerCase():"").filter(Boolean),i=t?n.filter(e=>t.includes(e)):n,l=[];for(let e of i)if(l.includes(e)||l.push(e),l.length>=s)break;return l}(r,t,s)}catch{return[]}}function l(e){return e.split(" ").map(e=>e?e[0].toUpperCase()+e.slice(1):e).join(" ")}e.s(["MUSCLE_GROUP_ORDER",0,r,"MUSCLE_GROUP_TAGS",0,t,"STRETCH_MUSCLE_ORDER",0,n,"STRETCH_MUSCLE_TAGS",0,s,"formatTypeLabel",()=>l,"parseTagJson",()=>i])},85064,e=>{"use strict";function t(e){if(!e||e<=0)return"Timer not set";let t=Math.floor(e/60),s=e%60;return t>0&&0===s?`${t} min`:t>0?`${t} min ${s} sec`:`${e} sec`}e.s(["formatStretchTimer",()=>t])},96388,e=>{"use strict";var t=e.i(43476),s=e.i(71645),r=e.i(78806);function n({onSubmit:e,onCancel:n}){let[i,l]=(0,s.useState)(""),[o,a]=(0,s.useState)(""),[c,d]=(0,s.useState)(""),[u,m]=(0,s.useState)(""),[x,h]=(0,s.useState)([]),[p,g]=(0,s.useState)(!1),b=async t=>{if(t.preventDefault(),!i.trim())return;let s=o.trim(),r=s?Number(s):NaN,n=Number.isFinite(r)&&r>0?Math.round(r):void 0,l=x.map(e=>e.trim()).filter(Boolean);g(!0);try{await e({name:i.trim(),timerSeconds:n,videoUrl:c.trim()||void 0,tips:u.trim()||void 0,muscleGroups:l.length?l:void 0})}finally{g(!1)}};return(0,t.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center p-4 z-50",children:(0,t.jsxs)("div",{className:"bg-zinc-800 rounded-lg p-6 max-w-md w-full border-2 border-blue-700",children:[(0,t.jsx)("h2",{className:"text-2xl font-bold text-white mb-4",children:"Create New Stretch"}),(0,t.jsxs)("form",{onSubmit:b,className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{className:"text-zinc-300 text-sm font-semibold block mb-2",children:["Stretch Name ",(0,t.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,t.jsx)("input",{type:"text",value:i,onChange:e=>l(e.target.value),placeholder:"e.g., Hamstring Stretch",className:"w-full bg-zinc-900 text-white px-4 py-3 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-600",required:!0,autoFocus:!0})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-zinc-300 text-sm font-semibold block mb-2",children:"Timer (seconds)"}),(0,t.jsx)("input",{type:"number",min:"1",step:"1",value:o,onChange:e=>a(e.target.value),placeholder:"e.g., 30",className:"w-full bg-zinc-900 text-white px-4 py-3 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-600"})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{className:"text-zinc-300 text-sm font-semibold block mb-2",children:["Muscle Groups ",(0,t.jsx)("span",{className:"text-zinc-500",children:"(up to 2)"})]}),(0,t.jsx)("div",{className:"rounded-lg border border-zinc-700 bg-zinc-900 px-3 py-2",children:0===x.length?(0,t.jsx)("span",{className:"text-zinc-500 text-sm",children:"Select muscle groups below"}):(0,t.jsx)("div",{className:"flex flex-wrap gap-2",children:x.map(e=>(0,t.jsxs)("button",{type:"button",onClick:()=>h(t=>t.filter(t=>t!==e)),className:"inline-flex items-center gap-1 rounded-full border border-blue-600/40 bg-blue-700/30 px-3 py-1 text-xs font-semibold text-blue-100 transition hover:border-blue-400 hover:bg-blue-600/60",children:[(0,r.formatTypeLabel)(e),(0,t.jsx)("span",{"aria-hidden":!0,children:"Ã—"})]},e))})}),(0,t.jsxs)("div",{className:"mt-3",children:[(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsxs)("select",{value:"",onChange:e=>{let t=e.target.value;t&&(h(e=>e.includes(t)||e.length>=2?e:[...e,t]),e.currentTarget.value="")},className:"w-full appearance-none bg-zinc-900 text-white px-4 py-2 pr-10 rounded-lg border border-zinc-700 focus:outline-none focus:ring-2 focus:ring-blue-600",children:[(0,t.jsx)("option",{value:"",disabled:!0,children:"Add a muscle group..."}),r.STRETCH_MUSCLE_TAGS.filter(e=>"unknown"!==e).map(e=>(0,t.jsx)("option",{value:e,children:(0,r.formatTypeLabel)(e)},e))]}),(0,t.jsx)("span",{className:"pointer-events-none absolute right-3 top-1/2 -translate-y-1/2 text-zinc-400",children:"â–¾"})]}),(0,t.jsx)("p",{className:"mt-2 text-xs text-zinc-500",children:"Choose up to two muscle groups."})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-zinc-300 text-sm font-semibold block mb-2",children:"Video URL"}),(0,t.jsx)("input",{type:"url",value:c,onChange:e=>d(e.target.value),placeholder:"https://youtube.com/...",className:"w-full bg-zinc-900 text-white px-4 py-3 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-600"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-zinc-300 text-sm font-semibold block mb-2",children:"Tips"}),(0,t.jsx)("textarea",{value:u,onChange:e=>m(e.target.value),placeholder:"Form tips, cues, etc.",rows:3,className:"w-full bg-zinc-900 text-white px-4 py-3 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-600 resize-none"})]}),(0,t.jsx)("p",{className:"text-xs text-zinc-400",children:"Duration, video URL, tips, and muscle groups will be auto-filled with AI if empty."}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-3 pt-2",children:[(0,t.jsx)("button",{type:"button",onClick:n,className:"bg-zinc-700 hover:bg-zinc-600 text-white py-3 rounded-lg font-semibold transition-colors",children:"Cancel"}),(0,t.jsx)("button",{type:"submit",disabled:!i.trim()||p,className:"bg-blue-700 hover:bg-blue-800 disabled:bg-blue-900 disabled:cursor-not-allowed text-white py-3 rounded-lg font-bold transition-colors",children:p?"Creating...":"Create & Select"})]})]})]})})}var i=e.i(85064);let l="other";function o(e){return(0,r.parseTagJson)(e.muscle_groups,r.STRETCH_MUSCLE_TAGS)}function a({onSelect:e,onCancel:a,filterType:c,title:d}){let[u,m]=(0,s.useState)([]),[x,h]=(0,s.useState)(""),[p,g]=(0,s.useState)(!0),[b,f]=(0,s.useState)(!1);(0,s.useEffect)(()=>{j()},[]);let j=async()=>{try{let e=await fetch("/api/stretches"),t=await e.json();m(t.stretches)}catch(e){console.error("Error fetching stretches:",e)}finally{g(!1)}},v=async t=>{try{let s=await fetch("/api/stretches",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!s.ok)throw Error("Failed to create stretch");let r=await s.json();await j();let n=t.muscleGroups?.length?JSON.stringify(t.muscleGroups):null,i={id:r.id,name:t.name,timer_seconds:"number"==typeof r.timer_seconds?r.timer_seconds:null,muscle_groups:n,video_url:t.videoUrl||null,tips:"string"==typeof r.tips?r.tips:t.tips||null};f(!1),e(i)}catch(e){console.error("Error creating stretch:",e),alert("Failed to create stretch. Please try again.")}},y=function(e){let t=new Map;for(let s of[...e].sort((e,t)=>e.name.localeCompare(t.name))){let e=o(s);for(let r of e.length>0?e:[l]){let e=t.get(r);e?e.push(s):t.set(r,[s])}}let s=[...r.STRETCH_MUSCLE_ORDER,l];return Array.from(t.keys()).sort((e,t)=>{let r=s.indexOf(e),n=s.indexOf(t);return -1===r&&-1===n?e.localeCompare(t):-1===r?1:-1===n?-1:r-n}).map(e=>({type:e,stretches:t.get(e)||[]}))}(u.filter(e=>{if(!x)return!0;let t=x.toLowerCase(),s=e.name.toLowerCase(),r=o(e).join(" ").toLowerCase();return s.includes(t)||r.includes(t)}));return b?(0,t.jsx)(n,{onSubmit:v,onCancel:()=>f(!1)}):(0,t.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center p-4 z-50",children:(0,t.jsxs)("div",{className:"bg-zinc-800 rounded-lg p-6 max-w-3xl w-full max-h-[90vh] flex flex-col border-2 border-blue-800",children:[(0,t.jsx)("h2",{className:"text-2xl font-bold text-white mb-4",children:d||("pre_workout"===c?"Select Pre-Workout Stretch":"post_workout"===c?"Select Post-Workout Stretch":"Select Stretch")}),(0,t.jsxs)("div",{className:"mb-4 space-y-3",children:[(0,t.jsx)("input",{type:"text",value:x,onChange:e=>h(e.target.value),placeholder:"Search by name or muscle group...",className:"w-full bg-zinc-900 text-white px-4 py-3 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-700",autoFocus:!0}),(0,t.jsx)("button",{onClick:()=>f(!0),className:"w-full bg-blue-700 hover:bg-blue-800 text-white py-3 rounded-lg font-bold transition-colors",children:"+ Create New Stretch"})]}),(0,t.jsx)("div",{className:"flex-1 overflow-y-auto mb-4 space-y-2",children:p?(0,t.jsx)("div",{className:"text-center text-zinc-400 py-8",children:"Loading stretches..."}):0===y.length?(0,t.jsx)("div",{className:"text-center text-zinc-400 py-8",children:x?"No stretches found":"No stretches available"}):(0,t.jsx)("div",{className:"space-y-4",children:y.map(({type:s,stretches:n})=>(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("div",{className:"text-xs uppercase tracking-wide text-zinc-400",children:(0,r.formatTypeLabel)(s)}),n.map(s=>{let r=o(s);return(0,t.jsx)("button",{onClick:()=>e(s),className:"w-full bg-zinc-900 hover:bg-zinc-700 text-left p-4 rounded-lg transition-colors border-2 border-zinc-700 hover:border-blue-600",children:(0,t.jsx)("div",{className:"flex items-start justify-between",children:(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("div",{className:"text-white font-semibold",children:s.name}),(0,t.jsx)("div",{className:"text-zinc-400 text-sm mt-1",children:(0,i.formatStretchTimer)(s.timer_seconds)}),r.length>0&&(0,t.jsx)("div",{className:"flex flex-wrap gap-1 mt-2",children:r.map((e,s)=>(0,t.jsx)("span",{className:"text-xs bg-zinc-700 text-zinc-300 px-2 py-1 rounded",children:e},s))})]})})},s.id)})]},s))})}),(0,t.jsx)("button",{onClick:a,className:"w-full bg-zinc-700 hover:bg-zinc-600 text-white py-3 rounded-lg font-semibold transition-colors",children:"Cancel"})]})})}e.s(["default",()=>a],96388)},90408,2519,e=>{"use strict";var t=e.i(43476),s=e.i(71645),r=e.i(71829);function n({onSubmit:e,onCancel:n}){let[i,l]=(0,s.useState)(""),[o,a]=(0,s.useState)(""),[c,d]=(0,s.useState)(""),[u,m]=(0,s.useState)(""),[x,h]=(0,s.useState)(r.EXERCISE_PRIMARY_METRICS.weight),[p,g]=(0,s.useState)("sec"),[b,f]=(0,s.useState)(!1),j=async t=>{if(t.preventDefault(),i.trim()){f(!0);try{await e({name:i.trim(),videoUrl:o.trim()||void 0,tips:c.trim()||void 0,equipment:u||void 0,primaryMetric:x,metricUnit:x===r.EXERCISE_PRIMARY_METRICS.time||x===r.EXERCISE_PRIMARY_METRICS.distance?p.trim():void 0})}finally{f(!1)}}};return(0,t.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center p-4 z-50",children:(0,t.jsxs)("div",{className:"bg-zinc-800 rounded-lg p-6 max-w-md w-full border-2 border-green-600",children:[(0,t.jsx)("h2",{className:"text-2xl font-bold text-white mb-4",children:"Create New Exercise"}),(0,t.jsxs)("form",{onSubmit:j,className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{className:"text-zinc-300 text-sm font-semibold block mb-2",children:["Exercise Name ",(0,t.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,t.jsx)("input",{type:"text",value:i,onChange:e=>l(e.target.value),placeholder:"e.g., Barbell Bench Press",className:"w-full bg-zinc-900 text-white px-4 py-3 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500",required:!0,autoFocus:!0})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-zinc-300 text-sm font-semibold block mb-2",children:"Equipment"}),(0,t.jsxs)("select",{value:u,onChange:e=>m(e.target.value),className:"w-full bg-zinc-900 text-white px-4 py-3 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 appearance-none cursor-pointer",style:{backgroundImage:"url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3E%3Cpath stroke='%23ffffff' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='M6 8l4 4 4-4'/%3E%3C/svg%3E\")",backgroundPosition:"right 0.5rem center",backgroundRepeat:"no-repeat",backgroundSize:"1.5em 1.5em",paddingRight:"2.5rem"},children:[(0,t.jsx)("option",{value:"",children:"Select equipment (optional)"}),(0,t.jsx)("option",{value:"Barbell",children:"Barbell"}),(0,t.jsx)("option",{value:"Dumbbells",children:"Dumbbells"}),(0,t.jsx)("option",{value:"Bodyweight",children:"Bodyweight"}),(0,t.jsx)("option",{value:"Machine",children:"Machine"}),(0,t.jsx)("option",{value:"Cable",children:"Cable"}),(0,t.jsx)("option",{value:"Bands",children:"Bands"}),(0,t.jsx)("option",{value:"Other",children:"Other"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-zinc-300 text-sm font-semibold block mb-2",children:"Tracking Metric"}),(0,t.jsxs)("select",{value:x,onChange:e=>{let t=e.target.value;h(t),t===r.EXERCISE_PRIMARY_METRICS.time?g("sec"):t===r.EXERCISE_PRIMARY_METRICS.distance&&g("m")},className:"w-full bg-zinc-900 text-white px-4 py-3 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 appearance-none cursor-pointer",style:{backgroundImage:"url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3E%3Cpath stroke='%23ffffff' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='M6 8l4 4 4-4'/%3E%3C/svg%3E\")",backgroundPosition:"right 0.5rem center",backgroundRepeat:"no-repeat",backgroundSize:"1.5em 1.5em",paddingRight:"2.5rem"},children:[(0,t.jsx)("option",{value:r.EXERCISE_PRIMARY_METRICS.weight,children:"Weight"}),(0,t.jsx)("option",{value:r.EXERCISE_PRIMARY_METRICS.height,children:"Height"}),(0,t.jsx)("option",{value:r.EXERCISE_PRIMARY_METRICS.time,children:"Time"}),(0,t.jsx)("option",{value:r.EXERCISE_PRIMARY_METRICS.distance,children:"Distance"}),(0,t.jsx)("option",{value:r.EXERCISE_PRIMARY_METRICS.repsOnly,children:"Reps only"})]}),x===r.EXERCISE_PRIMARY_METRICS.height&&(0,t.jsx)("p",{className:"text-zinc-500 text-xs mt-2",children:"Uses your profile height unit (in or cm)."})]}),(x===r.EXERCISE_PRIMARY_METRICS.time||x===r.EXERCISE_PRIMARY_METRICS.distance)&&(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-zinc-300 text-sm font-semibold block mb-2",children:"Unit"}),(0,t.jsx)("select",{value:p,onChange:e=>g(e.target.value),className:"w-full bg-zinc-900 text-white px-4 py-3 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 appearance-none cursor-pointer",style:{backgroundImage:"url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3E%3Cpath stroke='%23ffffff' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='M6 8l4 4 4-4'/%3E%3C/svg%3E\")",backgroundPosition:"right 0.5rem center",backgroundRepeat:"no-repeat",backgroundSize:"1.5em 1.5em",paddingRight:"2.5rem"},children:x===r.EXERCISE_PRIMARY_METRICS.time?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("option",{value:"sec",children:"sec"}),(0,t.jsx)("option",{value:"min",children:"min"})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("option",{value:"m",children:"m"}),(0,t.jsx)("option",{value:"km",children:"km"}),(0,t.jsx)("option",{value:"yd",children:"yd"}),(0,t.jsx)("option",{value:"mi",children:"mi"})]})})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-zinc-300 text-sm font-semibold block mb-2",children:"Video URL"}),(0,t.jsxs)("p",{className:"text-zinc-500 text-xs mb-2",children:['If left empty, will default to YouTube search for "',i||"exercise name",'"']}),(0,t.jsx)("input",{type:"url",value:o,onChange:e=>a(e.target.value),placeholder:"https://youtube.com/...",className:"w-full bg-zinc-900 text-white px-4 py-3 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-zinc-300 text-sm font-semibold block mb-2",children:"Tips"}),(0,t.jsx)("textarea",{value:c,onChange:e=>d(e.target.value),placeholder:"Form tips, cues, etc.",rows:3,className:"w-full bg-zinc-900 text-white px-4 py-3 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 resize-none"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-3 pt-2",children:[(0,t.jsx)("button",{type:"button",onClick:n,className:"bg-zinc-700 hover:bg-zinc-600 text-white py-3 rounded-lg font-semibold transition-colors",children:"Cancel"}),(0,t.jsx)("button",{type:"submit",disabled:!i.trim()||b,className:"bg-green-600 hover:bg-green-700 disabled:bg-green-800 disabled:cursor-not-allowed text-white py-3 rounded-lg font-bold transition-colors",children:b?"Creating...":"Create & Select"})]})]})]})})}var i=e.i(78806);let l="other";function o(e){return(0,i.parseTagJson)(e.muscle_groups,i.MUSCLE_GROUP_TAGS)}function a({onSelect:e,onCancel:r,title:a}){let[c,d]=(0,s.useState)([]),[u,m]=(0,s.useState)(""),[x,h]=(0,s.useState)(!0),[p,g]=(0,s.useState)(!1);(0,s.useEffect)(()=>{b()},[]);let b=async()=>{try{let e=await fetch("/api/exercises"),t=await e.json();d(t.exercises)}catch(e){console.error("Error fetching exercises:",e)}finally{h(!1)}},f=async t=>{try{let s=await fetch("/api/exercises",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!s.ok)throw Error("Failed to create exercise");let r=await s.json();await b();let n=c.find(e=>e.id===r.id)||{id:r.id,name:t.name,video_url:t.videoUrl||null,tips:t.tips||null,equipment:t.equipment||null,is_bodyweight:"number"==typeof r.is_bodyweight?r.is_bodyweight:null,primary_metric:"string"==typeof r.primary_metric?r.primary_metric:null,metric_unit:"string"==typeof r.metric_unit?r.metric_unit:null};e(n)}catch(e){console.error("Error creating exercise:",e),alert("Failed to create exercise. Please try again.")}},j=function(e){let t=new Map;for(let s of[...e].sort((e,t)=>e.name.localeCompare(t.name))){let e=o(s);for(let r of e.length>0?e:[l]){let e=t.get(r);e?e.push(s):t.set(r,[s])}}let s=[...i.MUSCLE_GROUP_ORDER,l];return Array.from(t.keys()).sort((e,t)=>{let r=s.indexOf(e),n=s.indexOf(t);return -1===r&&-1===n?e.localeCompare(t):-1===r?1:-1===n?-1:r-n}).map(e=>({type:e,exercises:t.get(e)||[]}))}(c.filter(e=>{if(!u)return!0;let t=u.toLowerCase(),s=o(e).join(" ").toLowerCase();return e.name.toLowerCase().includes(t)||s.includes(t)}));return p?(0,t.jsx)(n,{onSubmit:f,onCancel:()=>g(!1)}):(0,t.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center p-4 z-50",children:(0,t.jsxs)("div",{className:"bg-zinc-800 rounded-lg p-6 max-w-3xl w-full max-h-[90vh] flex flex-col border-2 border-blue-600",children:[(0,t.jsx)("h2",{className:"text-2xl font-bold text-white mb-4",children:a||"Select Exercise"}),(0,t.jsxs)("div",{className:"mb-4 space-y-3",children:[(0,t.jsx)("input",{type:"text",value:u,onChange:e=>m(e.target.value),placeholder:"Search exercises or muscle groups...",className:"w-full bg-zinc-900 text-white px-4 py-3 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",autoFocus:!0}),(0,t.jsx)("button",{onClick:()=>g(!0),className:"w-full bg-green-600 hover:bg-green-700 text-white py-3 rounded-lg font-bold transition-colors",children:"+ Create New Exercise"})]}),(0,t.jsx)("div",{className:"flex-1 overflow-y-auto mb-4 space-y-2",children:x?(0,t.jsx)("div",{className:"text-center text-zinc-400 py-8",children:"Loading exercises..."}):0===j.length?(0,t.jsx)("div",{className:"text-center text-zinc-400 py-8",children:u?"No exercises found":"No exercises available"}):(0,t.jsx)("div",{className:"space-y-4",children:j.map(({type:s,exercises:r})=>(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("div",{className:"text-xs uppercase tracking-wide text-zinc-400",children:(0,i.formatTypeLabel)(s)}),r.map(s=>(0,t.jsx)("button",{onClick:()=>e(s),className:"w-full bg-zinc-900 hover:bg-zinc-700 text-left p-4 rounded-lg transition-colors border-2 border-zinc-700 hover:border-blue-500",children:(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-white font-semibold",children:s.name}),s.equipment&&(0,t.jsx)("div",{className:"text-zinc-400 text-sm mt-1",children:s.equipment})]})},s.id))]},s))})}),(0,t.jsx)("button",{onClick:r,className:"w-full bg-zinc-700 hover:bg-zinc-600 text-white py-3 rounded-lg font-semibold transition-colors",children:"Cancel"})]})})}e.s(["default",()=>a],90408);let c="other";function d(e){return(0,i.parseTagJson)(e.muscle_groups,i.MUSCLE_GROUP_TAGS)}function u(e){let t=new Map;for(let s of[...e].sort((e,t)=>e.name.localeCompare(t.name))){let e=d(s);for(let r of e.length>0?e:[c]){let e=t.get(r);e?e.push(s):t.set(r,[s])}}let s=[...i.MUSCLE_GROUP_ORDER,c];return Array.from(t.keys()).sort((e,t)=>{let r=s.indexOf(e),n=s.indexOf(t);return -1===r&&-1===n?e.localeCompare(t):-1===r?1:-1===n?-1:r-n}).map(e=>({type:e,exercises:t.get(e)||[]}))}function m({onSelect:e,onCancel:r}){let[l,o]=(0,s.useState)([]),[a,c]=(0,s.useState)(""),[m,x]=(0,s.useState)(""),[h,p]=(0,s.useState)(!0),[g,b]=(0,s.useState)(null),[f,j]=(0,s.useState)(null),[v,y]=(0,s.useState)(!1),[w,N]=(0,s.useState)(null);(0,s.useEffect)(()=>{S()},[]);let S=async()=>{try{let e=await fetch("/api/exercises"),t=await e.json();o(t.exercises)}catch(e){console.error("Error fetching exercises:",e)}finally{p(!1)}},C=async e=>{try{let t=await fetch("/api/exercises",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw Error("Failed to create exercise");let s=await t.json();await S();let r={id:s.id,name:e.name,video_url:e.videoUrl||null,tips:e.tips||null,equipment:e.equipment||null,primary_metric:"string"==typeof s.primary_metric?s.primary_metric:null,metric_unit:"string"==typeof s.metric_unit?s.metric_unit:null};"exercise1"===w?(b(r),c("")):"exercise2"===w&&(j(r),x("")),y(!1),N(null)}catch(e){console.error("Error creating exercise:",e),alert("Failed to create exercise. Please try again.")}},E=l.filter(e=>{if(!a)return!0;let t=a.toLowerCase(),s=d(e).join(" ").toLowerCase();return e.name.toLowerCase().includes(t)||s.includes(t)}),k=l.filter(e=>{if(!m)return!0;let t=m.toLowerCase(),s=d(e).join(" ").toLowerCase();return e.name.toLowerCase().includes(t)||s.includes(t)}),z=u(E),_=u(k);return v?(0,t.jsx)(n,{onSubmit:C,onCancel:()=>{y(!1),N(null)}}):(0,t.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center p-4 z-50",children:(0,t.jsxs)("div",{className:"bg-zinc-800 rounded-lg p-6 max-w-4xl w-full max-h-[90vh] flex flex-col border-2 border-purple-600",children:[(0,t.jsx)("h2",{className:"text-2xl font-bold text-white mb-4",children:"Create Superset"}),(0,t.jsx)("p",{className:"text-zinc-400 text-sm mb-4",children:"Select two exercises to pair together"}),(0,t.jsxs)("div",{className:"flex-1 overflow-hidden flex gap-4 mb-4",children:[(0,t.jsxs)("div",{className:"flex-1 flex flex-col min-h-0",children:[(0,t.jsxs)("div",{className:"mb-2",children:[(0,t.jsx)("div",{className:"text-purple-400 text-sm font-bold mb-2",children:"Exercise 1"}),g?(0,t.jsxs)("div",{className:"bg-purple-900/30 border-2 border-purple-500 rounded-lg p-3 flex items-center justify-between",children:[(0,t.jsx)("span",{className:"text-white font-semibold",children:g.name}),(0,t.jsx)("button",{onClick:()=>b(null),className:"text-purple-300 hover:text-white text-sm",children:"Change"})]}):(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("input",{type:"text",value:a,onChange:e=>c(e.target.value),placeholder:"Search exercises or muscle groups...",className:"w-full bg-zinc-900 text-white px-3 py-2 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-purple-500",autoFocus:!0}),(0,t.jsx)("button",{onClick:()=>{N("exercise1"),y(!0)},className:"w-full bg-green-600 hover:bg-green-700 text-white py-2 rounded-lg text-sm font-semibold transition-colors",children:"+ Create New Exercise"})]})]}),!g&&(0,t.jsx)("div",{className:"flex-1 overflow-y-auto space-y-2",children:h?(0,t.jsx)("div",{className:"text-center text-zinc-400 py-4",children:"Loading..."}):0===z.length?(0,t.jsx)("div",{className:"text-center text-zinc-400 py-4",children:"No exercises found"}):(0,t.jsx)("div",{className:"space-y-4",children:z.map(({type:e,exercises:s})=>(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("div",{className:"text-[10px] uppercase tracking-wide text-zinc-400",children:(0,i.formatTypeLabel)(e)}),s.map(e=>(0,t.jsxs)("button",{onClick:()=>b(e),className:"w-full bg-zinc-900 hover:bg-zinc-700 text-left p-3 rounded-lg transition-colors border border-zinc-700 hover:border-purple-500",children:[(0,t.jsx)("div",{className:"text-white text-sm font-semibold",children:e.name}),e.equipment&&(0,t.jsx)("div",{className:"text-zinc-400 text-xs mt-1",children:e.equipment})]},e.id))]},e))})})]}),(0,t.jsx)("div",{className:"flex items-center",children:(0,t.jsx)("div",{className:"text-purple-400 text-2xl font-bold",children:"+"})}),(0,t.jsxs)("div",{className:"flex-1 flex flex-col min-h-0",children:[(0,t.jsxs)("div",{className:"mb-2",children:[(0,t.jsx)("div",{className:"text-purple-400 text-sm font-bold mb-2",children:"Exercise 2"}),f?(0,t.jsxs)("div",{className:"bg-purple-900/30 border-2 border-purple-500 rounded-lg p-3 flex items-center justify-between",children:[(0,t.jsx)("span",{className:"text-white font-semibold",children:f.name}),(0,t.jsx)("button",{onClick:()=>j(null),className:"text-purple-300 hover:text-white text-sm",children:"Change"})]}):(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("input",{type:"text",value:m,onChange:e=>x(e.target.value),placeholder:"Search exercises or muscle groups...",className:"w-full bg-zinc-900 text-white px-3 py-2 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-purple-500"}),(0,t.jsx)("button",{onClick:()=>{N("exercise2"),y(!0)},className:"w-full bg-green-600 hover:bg-green-700 text-white py-2 rounded-lg text-sm font-semibold transition-colors",children:"+ Create New Exercise"})]})]}),!f&&(0,t.jsx)("div",{className:"flex-1 overflow-y-auto space-y-2",children:h?(0,t.jsx)("div",{className:"text-center text-zinc-400 py-4",children:"Loading..."}):0===_.length?(0,t.jsx)("div",{className:"text-center text-zinc-400 py-4",children:"No exercises found"}):(0,t.jsx)("div",{className:"space-y-4",children:_.map(({type:e,exercises:s})=>(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("div",{className:"text-[10px] uppercase tracking-wide text-zinc-400",children:(0,i.formatTypeLabel)(e)}),s.map(e=>(0,t.jsxs)("button",{onClick:()=>j(e),className:"w-full bg-zinc-900 hover:bg-zinc-700 text-left p-3 rounded-lg transition-colors border border-zinc-700 hover:border-purple-500",children:[(0,t.jsx)("div",{className:"text-white text-sm font-semibold",children:e.name}),e.equipment&&(0,t.jsx)("div",{className:"text-zinc-400 text-xs mt-1",children:e.equipment})]},e.id))]},e))})})]})]}),(0,t.jsxs)("div",{className:"flex gap-3",children:[(0,t.jsx)("button",{onClick:r,className:"flex-1 bg-zinc-700 hover:bg-zinc-600 text-white py-3 rounded-lg font-semibold transition-colors",children:"Cancel"}),(0,t.jsx)("button",{onClick:()=>{g&&f&&e(g,f)},disabled:!g||!f,className:"flex-1 bg-purple-600 hover:bg-purple-700 disabled:bg-purple-900 disabled:cursor-not-allowed text-white py-3 rounded-lg font-bold transition-colors",children:"Add Superset"})]})]})})}e.s(["default",()=>m],2519)},85763,e=>{"use strict";var t=e.i(43476),s=e.i(71645),r=e.i(85064);function n({onClick:e,label:s,color:r}){return(0,t.jsxs)("button",{onClick:e,className:`w-full py-2 text-sm rounded ${{green:"bg-green-900/50 hover:bg-green-800/50",blue:"bg-blue-900/50 hover:bg-blue-800/50",orange:"bg-orange-900/50 hover:bg-orange-800/50"}[r]} text-white transition-colors mb-2`,children:["+ ",s]})}function i({onAddExercise:e,onAddSuperset:s}){return(0,t.jsxs)("div",{className:"flex gap-2 mb-2",children:[(0,t.jsx)("button",{onClick:e,className:"flex-1 py-2 text-sm rounded bg-orange-900/60 text-white hover:bg-orange-800/60 transition-colors",children:"+ Exercise"}),(0,t.jsx)("button",{onClick:s,className:"flex-1 py-2 text-sm rounded bg-purple-900/60 text-white hover:bg-purple-800/60 transition-colors",children:"+ Superset"})]})}function l({stretch:e,onDelete:s}){return(0,t.jsxs)("div",{className:"bg-zinc-800 rounded-lg p-4 border-2 border-zinc-700 mb-2 flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-white font-semibold",children:e.name}),(0,t.jsx)("div",{className:"text-zinc-400 text-sm",children:(0,r.formatStretchTimer)(e.timerSeconds)})]}),(0,t.jsx)("button",{onClick:s,className:"text-red-500 hover:text-red-400 p-2",title:"Delete",children:(0,t.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})}function o({exercise:e,onDelete:s}){let r=!!e.exercise_id2;return(0,t.jsx)("div",{className:`bg-zinc-800 rounded-lg p-4 border-2 ${r?"border-purple-700":"border-zinc-700"} mb-2`,children:(0,t.jsxs)("div",{className:"flex items-start justify-between",children:[(0,t.jsxs)("div",{className:"flex-1",children:[r&&(0,t.jsx)("div",{className:"text-purple-400 text-xs font-bold mb-2",children:"SUPERSET"}),(0,t.jsx)("div",{className:"text-white font-semibold",children:e.exercise_name}),r&&e.exercise2_name&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"text-purple-400 text-sm my-1",children:"+"}),(0,t.jsx)("div",{className:"text-white font-semibold",children:e.exercise2_name})]})]}),(0,t.jsx)("button",{onClick:s,className:"text-red-500 hover:text-red-400 p-2",title:"Delete",children:(0,t.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})})}function a({cardio:e,onDelete:s}){return(0,t.jsx)("div",{className:"bg-zinc-800 rounded-lg p-4 border-2 border-red-900 mb-2",children:(0,t.jsxs)("div",{className:"flex items-start justify-between",children:[(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("div",{className:"text-white font-semibold text-lg",children:e.type}),e.duration&&(0,t.jsx)("div",{className:"text-zinc-400 text-sm",children:e.duration}),e.intensity&&(0,t.jsx)("div",{className:"text-zinc-500 text-sm",children:e.intensity}),e.tips&&(0,t.jsx)("div",{className:"text-zinc-500 text-xs mt-1",children:e.tips})]}),s&&(0,t.jsx)("button",{onClick:s,className:"text-red-500 hover:text-red-400 p-2",title:"Delete",children:(0,t.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})})}function c({onSave:e,onCancel:r}){let[n,i]=(0,s.useState)(""),[l,o]=(0,s.useState)(""),[a,c]=(0,s.useState)(""),[d,u]=(0,s.useState)("");return(0,t.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center p-4 z-50",children:(0,t.jsxs)("div",{className:"bg-zinc-800 rounded-lg p-6 max-w-md w-full border-2 border-red-600",children:[(0,t.jsx)("h2",{className:"text-2xl font-bold text-white mb-4",children:"Add Cardio"}),(0,t.jsxs)("div",{className:"space-y-4 mb-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-zinc-400 text-sm block mb-1",children:"Type *"}),(0,t.jsx)("input",{type:"text",value:n,onChange:e=>i(e.target.value),placeholder:"e.g., Incline Walk, Bike, Stairmaster",className:"w-full bg-zinc-900 text-white px-3 py-2 rounded focus:outline-none focus:ring-2 focus:ring-red-500",autoFocus:!0})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-zinc-400 text-sm block mb-1",children:"Duration *"}),(0,t.jsx)("input",{type:"text",value:l,onChange:e=>o(e.target.value),placeholder:"e.g., 15 min, 20 min",className:"w-full bg-zinc-900 text-white px-3 py-2 rounded focus:outline-none focus:ring-2 focus:ring-red-500"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-zinc-400 text-sm block mb-1",children:"Intensity"}),(0,t.jsx)("input",{type:"text",value:a,onChange:e=>c(e.target.value),placeholder:"e.g., 12% incline, 3.0 mph",className:"w-full bg-zinc-900 text-white px-3 py-2 rounded focus:outline-none focus:ring-2 focus:ring-red-500"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-zinc-400 text-sm block mb-1",children:"Tips"}),(0,t.jsx)("textarea",{value:d,onChange:e=>u(e.target.value),placeholder:"Optional tips...",rows:2,className:"w-full bg-zinc-900 text-white px-3 py-2 rounded focus:outline-none focus:ring-2 focus:ring-red-500 resize-none"})]})]}),(0,t.jsxs)("div",{className:"flex gap-3",children:[(0,t.jsx)("button",{onClick:r,className:"flex-1 bg-zinc-700 hover:bg-zinc-600 text-white py-3 rounded-lg font-semibold transition-colors",children:"Cancel"}),(0,t.jsx)("button",{onClick:()=>{n.trim()&&l.trim()&&e({type:n.trim(),duration:l.trim(),intensity:a.trim(),tips:d.trim()})},disabled:!n.trim()||!l.trim(),className:"flex-1 bg-red-600 hover:bg-red-700 disabled:bg-red-900 disabled:cursor-not-allowed text-white py-3 rounded-lg font-bold transition-colors",children:"Add Cardio"})]})]})})}e.s(["AddButton",()=>n,"CardioForm",()=>c,"CardioItem",()=>a,"ExerciseAddRow",()=>i,"ExerciseItem",()=>o,"StretchItem",()=>l])},67557,e=>{"use strict";var t=e.i(43476),s=e.i(71645),r=e.i(18566),n=e.i(90408),i=e.i(2519),l=e.i(96388),o=e.i(85763),a=e.i(49448),c=e.i(20970);function d(){let e=(0,r.useParams)(),d=(0,r.useRouter)(),u=e.id,[m,x]=(0,s.useState)(""),[h,p]=(0,s.useState)(""),[g,b]=(0,s.useState)(!1),[f,j]=(0,s.useState)(null),[v,y]=(0,s.useState)([]),[w,N]=(0,s.useState)([]),[S,C]=(0,s.useState)([]),[E,k]=(0,s.useState)(null),[z,_]=(0,s.useState)(!0),[R,I]=(0,s.useState)(!0),[T,M]=(0,s.useState)(!1),[O,P]=(0,s.useState)(!1),[A,L]=(0,s.useState)(!1),[U,$]=(0,s.useState)(!1),[D,B]=(0,s.useState)(!1),[F,J]=(0,s.useState)(null),[Y,G]=(0,s.useState)(null),[H,X]=(0,s.useState)(null),q=e=>{(0,c.invalidateWorkoutBootstrapCache)({routineId:u,routineName:e??m})};(0,s.useEffect)(()=>{W()},[u]);let W=async()=>{try{let e=await fetch(`/api/routines/${u}`),t=await e.json();x(t.routine.name),p(t.routine.name),N(t.exercises),I(1===t.routine.is_public);let s=await fetch(`/api/workout/${encodeURIComponent(t.routine.name)}`),r=await s.json(),n=await fetch("/api/stretches"),i=await n.json(),l=r.workout.preWorkoutStretches.map((e,t)=>{let s=i.stretches.find(t=>t.name===e.name);return{id:t,stretch_id:s?.id||0,name:e.name,timerSeconds:e.timerSeconds??0,muscle_groups:s?.muscle_groups||null}}),o=r.workout.postWorkoutStretches.map((e,t)=>{let s=i.stretches.find(t=>t.name===e.name);return{id:t,stretch_id:s?.id||0,name:e.name,timerSeconds:e.timerSeconds??0,muscle_groups:s?.muscle_groups||null}});y(l),C(o),r.workout.cardio&&k(r.workout.cardio)}catch(e){console.error("Error loading routine:",e)}finally{_(!1)}},V=async e=>{let t=v[e];try{await fetch(`/api/routines/${u}/stretches?stretchId=${t.stretch_id}&type=pre`,{method:"DELETE"});let s=v.filter((t,s)=>s!==e);y(s);let r=s.map(e=>e.stretch_id);await fetch(`/api/routines/${u}/stretches`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:"pre",order:r})}),q()}catch(e){console.error("Error deleting stretch:",e)}},K=async e=>{let t=S[e];try{await fetch(`/api/routines/${u}/stretches?stretchId=${t.stretch_id}&type=post`,{method:"DELETE"});let s=S.filter((t,s)=>s!==e);C(s);let r=s.map(e=>e.stretch_id);await fetch(`/api/routines/${u}/stretches`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:"post",order:r})}),q()}catch(e){console.error("Error deleting stretch:",e)}},Q=async e=>{let t=w[e];try{await fetch(`/api/routines/${u}/exercises?exerciseConfigId=${t.id}`,{method:"DELETE"});let s=w.filter((t,s)=>s!==e);N(s);let r=s.map(e=>e.id);await fetch(`/api/routines/${u}/exercises`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({order:r})}),q()}catch(e){console.error("Error deleting exercise:",e)}},Z=async()=>{try{await fetch(`/api/routines/${u}/cardio`,{method:"DELETE"}),k(null),q()}catch(e){console.error("Error deleting cardio:",e)}},ee=e=>{G(e),L(!0)},et=e=>{X(e),$(!0)},es=e=>{J(e),M(!0)},er=e=>{J(e),P(!0)},en=async e=>{L(!1);let t=Y??v.length,s=v.map(e=>e.stretch_id);s.splice(t,0,e.id),await fetch(`/api/routines/${u}/stretches`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:"pre",order:s})});let r={id:Date.now(),stretch_id:e.id,name:e.name,timerSeconds:e.timer_seconds??0,muscle_groups:e.muscle_groups},n=[...v];n.splice(t,0,r),y(n),G(null),q()},ei=async e=>{$(!1);let t=H??S.length,s=S.map(e=>e.stretch_id);s.splice(t,0,e.id),await fetch(`/api/routines/${u}/stretches`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:"post",order:s})});let r={id:Date.now(),stretch_id:e.id,name:e.name,timerSeconds:e.timer_seconds??0,muscle_groups:e.muscle_groups},n=[...S];n.splice(t,0,r),C(n),X(null),q()},el=async e=>{M(!1);let t=F??w.length;try{let s=await fetch(`/api/routines/${u}/exercises`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({exerciseId1:e.id})}),r={id:(await s.json()).id,exercise_id1:e.id,exercise_name:e.name,exercise_id2:null,exercise2_name:null},n=[...w];n.splice(t,0,r),N(n);let i=n.map(e=>e.id);await fetch(`/api/routines/${u}/exercises`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({order:i})}),q()}catch(e){console.error("Error adding exercise:",e)}J(null)},eo=async(e,t)=>{P(!1);let s=F??w.length;try{let r=await fetch(`/api/routines/${u}/exercises`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({exerciseId1:e.id,exerciseId2:t.id})}),n={id:(await r.json()).id,exercise_id1:e.id,exercise_name:e.name,exercise_id2:t.id,exercise2_name:t.name},i=[...w];i.splice(s,0,n),N(i);let l=i.map(e=>e.id);await fetch(`/api/routines/${u}/exercises`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({order:l})}),q()}catch(e){console.error("Error adding superset:",e)}J(null)},ea=async e=>{try{await fetch(`/api/routines/${u}/cardio`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),k(e),B(!1),q()}catch(e){console.error("Error saving cardio:",e)}},ec=async e=>{try{await fetch(`/api/routines/${u}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({isPublic:e})}),I(e)}catch(e){console.error("Error updating privacy:",e)}},ed=async()=>{let e=h.trim();if(e&&e!==m){b(!0),j(null);try{let t=await fetch(`/api/routines/${u}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:e})});if(!t.ok){let e=await t.json().catch(()=>({}));throw Error(e.error||"Failed to update routine name")}q(m),q(e),x(e),p(e)}catch(e){console.error("Error updating routine name:",e),j(e instanceof Error?e.message:"Failed to update routine name")}finally{b(!1)}}};return z?(0,t.jsx)("div",{className:"min-h-screen bg-zinc-900 flex items-center justify-center",children:(0,t.jsx)("div",{className:"text-white text-xl",children:"Loading routine..."})}):(0,t.jsxs)("div",{className:"min-h-screen bg-zinc-900 p-4 pb-24",children:[(0,t.jsxs)("div",{className:"max-w-2xl mx-auto",children:[(0,t.jsxs)("div",{className:"mb-6",children:[(0,t.jsx)("button",{onClick:()=>d.back(),className:"text-blue-400 hover:text-blue-300 mb-4 block",children:"â† Back"}),(0,t.jsxs)("h1",{className:"text-3xl font-bold text-white",children:["Edit: ",m]})]}),(0,t.jsxs)(a.Card,{paddingClassName:"p-4 mb-6",children:[(0,t.jsx)("label",{className:"block text-zinc-400 text-sm mb-2",children:"Routine name"}),(0,t.jsxs)("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center",children:[(0,t.jsx)("input",{type:"text",value:h,onChange:e=>p(e.target.value),onKeyDown:e=>{"Enter"===e.key&&ed()},className:"flex-1 bg-zinc-800 text-white px-3 py-2 rounded border border-zinc-600 focus:outline-none focus:border-green-500",placeholder:"Routine name"}),(0,t.jsx)("button",{onClick:ed,disabled:g||h.trim()===m||!h.trim(),className:"px-4 py-2 rounded-lg font-semibold bg-green-600 hover:bg-green-700 text-white disabled:opacity-50 disabled:cursor-not-allowed",children:g?"Saving...":"Save Name"})]}),f&&(0,t.jsx)("div",{className:"text-red-400 text-sm mt-2",children:f})]}),(0,t.jsxs)("section",{className:"mb-8",children:[(0,t.jsx)(a.SectionHeader,{icon:"ðŸŸ¢",iconClassName:"text-green-500",label:"Pre-Workout Stretches"}),(0,t.jsx)(o.AddButton,{onClick:()=>ee(0),label:"Add Pre-Stretch",color:"green"}),v.map((e,s)=>(0,t.jsxs)("div",{children:[(0,t.jsx)(o.StretchItem,{stretch:e,onDelete:()=>V(s)}),(0,t.jsx)(o.AddButton,{onClick:()=>ee(s+1),label:"Add Pre-Stretch",color:"green"})]},`pre-${s}`)),0===v.length&&(0,t.jsx)(a.EmptyState,{message:"No pre-workout stretches",className:"mb-2"})]}),(0,t.jsxs)("section",{className:"mb-8",children:[(0,t.jsx)(a.SectionHeader,{icon:"ðŸ”¥",iconClassName:"text-orange-500",label:"Exercises"}),(0,t.jsx)(o.ExerciseAddRow,{onAddExercise:()=>es(0),onAddSuperset:()=>er(0)}),w.map((e,s)=>(0,t.jsxs)("div",{children:[(0,t.jsx)(o.ExerciseItem,{exercise:e,onDelete:()=>Q(s)}),(0,t.jsx)(o.ExerciseAddRow,{onAddExercise:()=>es(s+1),onAddSuperset:()=>er(s+1)})]},`ex-${s}`)),0===w.length&&(0,t.jsx)(a.EmptyState,{message:"No exercises",className:"mb-2"})]}),(0,t.jsxs)("section",{className:"mb-8",children:[(0,t.jsx)(a.SectionHeader,{icon:"â¤ï¸",iconClassName:"text-red-500",label:"Cardio (Optional)"}),E?(0,t.jsx)(o.CardioItem,{cardio:E,onDelete:Z}):(0,t.jsx)("button",{onClick:()=>B(!0),className:"w-full py-3 text-sm rounded bg-red-900/50 text-white hover:bg-red-800/50 transition-colors",children:"+ Add Cardio"})]}),(0,t.jsxs)("section",{className:"mb-8",children:[(0,t.jsx)(a.SectionHeader,{icon:"ðŸ”µ",iconClassName:"text-blue-500",label:"Post-Workout Stretches"}),(0,t.jsx)(o.AddButton,{onClick:()=>et(0),label:"Add Post-Stretch",color:"blue"}),S.map((e,s)=>(0,t.jsxs)("div",{children:[(0,t.jsx)(o.StretchItem,{stretch:e,onDelete:()=>K(s)}),(0,t.jsx)(o.AddButton,{onClick:()=>et(s+1),label:"Add Post-Stretch",color:"blue"})]},`post-${s}`)),0===S.length&&(0,t.jsx)(a.EmptyState,{message:"No post-workout stretches",className:"mb-2"})]}),(0,t.jsx)("section",{className:"mb-8",children:(0,t.jsx)(a.Card,{paddingClassName:"p-4",children:(0,t.jsxs)("label",{className:"flex items-center gap-3 cursor-pointer",children:[(0,t.jsx)("input",{type:"checkbox",checked:!R,onChange:e=>ec(!e.target.checked),className:"w-5 h-5 rounded border-zinc-600 bg-zinc-900 text-green-600 focus:ring-green-500 focus:ring-offset-zinc-800 cursor-pointer"}),(0,t.jsxs)("span",{className:"text-zinc-300",children:["Make this routine private",(0,t.jsx)("span",{className:"block text-zinc-500 text-xs",children:"Private routines won't appear in the public browse page"})]})]})})}),(0,t.jsx)(a.BottomActionBar,{maxWidthClassName:"max-w-2xl",children:(0,t.jsx)("button",{onClick:()=>d.push(`/workout/${encodeURIComponent(m)}`),className:"w-full bg-green-600 hover:bg-green-700 text-white py-4 rounded-lg text-xl font-bold transition-colors",children:"Done Editing"})})]}),A&&(0,t.jsx)(l.default,{onSelect:en,onCancel:()=>{L(!1),G(null)},filterType:"pre_workout"}),U&&(0,t.jsx)(l.default,{onSelect:ei,onCancel:()=>{$(!1),X(null)},filterType:"post_workout"}),T&&(0,t.jsx)(n.default,{onSelect:el,onCancel:()=>{M(!1),J(null)}}),O&&(0,t.jsx)(i.default,{onSelect:eo,onCancel:()=>{P(!1),J(null)}}),D&&(0,t.jsx)(o.CardioForm,{onSave:ea,onCancel:()=>B(!1)})]})}e.s(["default",()=>d])}]);