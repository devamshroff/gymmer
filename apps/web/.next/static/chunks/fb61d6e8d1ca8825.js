(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,18566,(e,t,s)=>{t.exports=e.r(76562)},49448,e=>{"use strict";var t=e.i(43476);function s({children:e,className:s="",paddingClassName:r,borderClassName:i="border-zinc-700",borderWidthClassName:a="border-2"}){return(0,t.jsx)("div",{className:`bg-zinc-800 rounded-lg ${a} ${i} ${r||"p-4"} ${s}`.trim(),children:e})}function r({message:e,description:s,className:r=""}){return(0,t.jsxs)("div",{className:`text-zinc-500 text-center py-4 bg-zinc-800 rounded-lg ${r}`.trim(),children:[(0,t.jsx)("div",{children:e}),s&&(0,t.jsx)("div",{className:"text-zinc-600 text-sm mt-1",children:s})]})}function i({children:e,maxWidthClassName:s="max-w-2xl",className:r=""}){return(0,t.jsx)("div",{className:`fixed bottom-0 left-0 right-0 p-4 bg-zinc-900 border-t border-zinc-800 ${r}`.trim(),children:(0,t.jsx)("div",{className:`${s} mx-auto`,children:e})})}function a({icon:e,label:s,iconClassName:r="text-zinc-400",className:i=""}){return(0,t.jsxs)("h2",{className:`text-xl font-bold text-white mb-4 flex items-center gap-2 ${i}`.trim(),children:[(0,t.jsx)("span",{className:r,children:e}),s]})}e.s(["BottomActionBar",()=>i,"Card",()=>s,"EmptyState",()=>r,"SectionHeader",()=>a])},94660,e=>{"use strict";var t=e.i(43476),s=e.i(71645),r=e.i(18566),i=e.i(49448);let a="ai_routine_prompt";function l(){let e=(0,r.useRouter)(),[l,n]=(0,s.useState)([]),[c,d]=(0,s.useState)(""),[o,m]=(0,s.useState)(!1),[x,u]=(0,s.useState)("."),[h,p]=(0,s.useState)(""),[b,g]=(0,s.useState)(null),[N,j]=(0,s.useState)(null),[f,v]=(0,s.useState)(!1),y=(0,s.useMemo)(()=>{if(!h.trim())return null;try{return JSON.parse(h)}catch{return null}},[h]),w=(0,s.useMemo)(()=>({name:y?.name||"Untitled",exercises:Array.isArray(y?.exercises)?y.exercises.length:0,preStretches:Array.isArray(y?.preWorkoutStretches)?y.preWorkoutStretches.length:0,postStretches:Array.isArray(y?.postWorkoutStretches)?y.postWorkoutStretches.length:0,hasCardio:!!y?.cardio}),[y]);(0,s.useEffect)(()=>{if(!o)return void u(".");let e=setInterval(()=>{u(e=>"..."===e?".":`${e}.`)},450);return()=>clearInterval(e)},[o]),(0,s.useEffect)(()=>{let e=localStorage.getItem(a);e&&d(e)},[]);let S=async()=>{let e=c.trim();if(e){m(!0),g(null),j(null),v(!1),localStorage.setItem(a,e),n(t=>[...t,{role:"user",content:e}]);try{let t=await fetch("/api/routines/ai-generate",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({prompt:e})});if(!t.ok){let e=await t.json().catch(()=>({}));throw Error(e.error||"Failed to generate routine")}let s=await t.json(),r=JSON.stringify(s.workoutPlan,null,2);p(r),v(!0),n(e=>[...e,{role:"assistant",content:`Generated "${s.workoutPlan.name}". Review and edit below.`}]),d("")}catch(e){g(e.message||"Failed to generate routine")}finally{m(!1)}}};return(0,t.jsx)("div",{className:"min-h-screen bg-zinc-900 p-4",children:(0,t.jsxs)("div",{className:"max-w-3xl mx-auto py-8",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,t.jsx)("h1",{className:"text-3xl font-bold text-white",children:"AI-Assisted Routine"}),(0,t.jsx)("button",{onClick:()=>e.push("/routines"),className:"text-zinc-400 hover:text-zinc-200 text-sm font-semibold",children:"Exit"})]}),(0,t.jsxs)(i.Card,{paddingClassName:"p-6",borderClassName:"border-emerald-700",className:"mb-6",children:[(0,t.jsx)("h2",{className:"text-lg font-semibold text-white mb-2",children:"Describe your workout"}),(0,t.jsx)("p",{className:"text-zinc-400 text-sm mb-4",children:"Include your goals, target muscles, exercises you dislike, injuries or restrictions, where you’re working out (home/gym), available equipment, and time."}),(0,t.jsx)("textarea",{value:c,onChange:e=>d(e.target.value),placeholder:"Example: 45-minute pull day focused on hypertrophy. Target lats and biceps. No deadlifts. Mild shoulder impingement. Home gym with dumbbells and pull-up bar.",className:"w-full min-h-[120px] bg-zinc-900 text-white p-4 rounded-lg border border-zinc-700 focus:outline-none focus:ring-2 focus:ring-emerald-500 mb-4"}),(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsxs)("div",{className:"flex flex-col gap-2",children:[f&&(0,t.jsxs)("div",{className:"text-emerald-200 text-sm font-semibold flex items-center gap-2",children:[(0,t.jsx)("span",{className:"text-xl",children:"✓"})," Routine generated!"]}),(0,t.jsx)("button",{onClick:S,disabled:!c.trim()||o,className:"bg-emerald-600 hover:bg-emerald-700 disabled:bg-emerald-900 disabled:cursor-not-allowed text-white px-6 py-3 rounded-lg font-semibold",children:o?`Generating${x}`:"Generate Routine"})]}),(0,t.jsx)("button",{onClick:()=>d(""),disabled:!c.trim()||o,className:"text-zinc-400 hover:text-zinc-200 text-sm",children:"Clear"})]})]}),l.length>0&&(0,t.jsxs)(i.Card,{paddingClassName:"p-6",borderWidthClassName:"border",className:"mb-6",children:[(0,t.jsx)("h2",{className:"text-lg font-semibold text-white mb-4",children:"Conversation"}),(0,t.jsx)("div",{className:"space-y-3",children:l.map((e,s)=>(0,t.jsxs)("div",{className:"user"===e.role?"bg-zinc-900 text-zinc-200 p-3 rounded-lg":"bg-emerald-900/40 text-emerald-100 p-3 rounded-lg",children:[(0,t.jsx)("div",{className:"text-xs uppercase tracking-wide mb-1 text-zinc-400",children:"user"===e.role?"You":"Assistant"}),(0,t.jsx)("div",{className:"text-sm whitespace-pre-wrap",children:e.content})]},`${e.role}-${s}`))})]}),(0,t.jsxs)(i.Card,{paddingClassName:"p-6",borderWidthClassName:"border",children:[(0,t.jsx)("h2",{className:"text-lg font-semibold text-white mb-3",children:"Routine Preview"}),y?(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"space-y-2 text-sm text-zinc-300",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"text-zinc-500",children:"Name:"})," ",w.name]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"text-zinc-500",children:"Exercises:"})," ",w.exercises]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"text-zinc-500",children:"Pre-stretches:"})," ",w.preStretches]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"text-zinc-500",children:"Post-stretches:"})," ",w.postStretches]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"text-zinc-500",children:"Cardio:"})," ",w.hasCardio?"Yes":"No"]})]}),(0,t.jsx)("button",{onClick:()=>{if(h.trim()){try{JSON.parse(h)}catch{g("JSON is invalid. Please fix it before previewing.");return}localStorage.setItem("ai_routine_draft",h),e.push("/routines/ai/preview")}},className:"w-full bg-emerald-600 hover:bg-emerald-700 text-white py-3 rounded-lg text-sm font-semibold",children:"View Workout"})]}):(0,t.jsx)("div",{className:"text-zinc-500 text-sm",children:"Generate a routine to preview it here."})]}),b&&(0,t.jsx)("div",{className:"mt-6 bg-red-900/50 border border-red-600 text-red-200 px-4 py-3 rounded-lg",children:b}),N&&(0,t.jsx)("div",{className:"mt-6 bg-emerald-900/50 border border-emerald-600 text-emerald-200 px-4 py-3 rounded-lg",children:N})]})})}e.s(["default",()=>l])}]);