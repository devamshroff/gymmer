(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,49448,e=>{"use strict";var t=e.i(43476);function s({children:e,className:s="",paddingClassName:r,borderClassName:i="border-zinc-700",borderWidthClassName:n="border-2"}){return(0,t.jsx)("div",{className:`bg-zinc-800 rounded-lg ${n} ${i} ${r||"p-4"} ${s}`.trim(),children:e})}function r({message:e,description:s,className:r=""}){return(0,t.jsxs)("div",{className:`text-zinc-500 text-center py-4 bg-zinc-800 rounded-lg ${r}`.trim(),children:[(0,t.jsx)("div",{children:e}),s&&(0,t.jsx)("div",{className:"text-zinc-600 text-sm mt-1",children:s})]})}function i({children:e,maxWidthClassName:s="max-w-2xl",className:r=""}){return(0,t.jsx)("div",{className:`fixed bottom-0 left-0 right-0 p-4 bg-zinc-900 border-t border-zinc-800 ${r}`.trim(),children:(0,t.jsx)("div",{className:`${s} mx-auto`,children:e})})}function n({icon:e,label:s,iconClassName:r="text-zinc-400",className:i=""}){return(0,t.jsxs)("h2",{className:`text-xl font-bold text-white mb-4 flex items-center gap-2 ${i}`.trim(),children:[(0,t.jsx)("span",{className:r,children:e}),s]})}e.s(["BottomActionBar",()=>i,"Card",()=>s,"EmptyState",()=>r,"SectionHeader",()=>n])},18566,(e,t,s)=>{t.exports=e.r(76562)},71829,e=>{"use strict";let t={progress:"progress",maintenance:"maintenance",light:"light"},s={[t.progress]:"Progress",[t.maintenance]:"Maintenance",[t.light]:"Light"},r={[t.progress]:"Push for small, steady improvements.",[t.maintenance]:"Hold steady and focus on form.",[t.light]:"Easy effort today."};e.s(["EXERCISE_HISTORY_AGGREGATION_MODES",0,{max:"max",avg:"avg"},"EXERCISE_HISTORY_DISPLAY_MODES",0,{weight:"weight",reps:"reps"},"EXERCISE_PRIMARY_METRICS",0,{weight:"weight",height:"height",time:"time",distance:"distance",repsOnly:"reps_only"},"EXERCISE_TYPES",0,{single:"single",b2b:"b2b",circuit:"circuit"},"SESSION_MODES",0,t,"SESSION_MODE_DESCRIPTIONS",0,r,"SESSION_MODE_LABELS",0,s])},78806,e=>{"use strict";let t=["lower body compound","upper body compound","full body compound","chest","back","shoulders","biceps","triceps","forearms","core","lower back","glutes","quads","hamstrings","calves","hip flexors","adductors","abductors","unknown"],s=[...t],r=[...t],i=[...s];function n(e,t,s=2){if(!e)return[];try{let r=JSON.parse(e);return function(e,t,s=2){let r=Array.isArray(e)?e:"string"==typeof e?[e]:[];if(0===r.length)return[];let i=r.map(e=>"string"==typeof e?e.trim().toLowerCase():"").filter(Boolean),n=t?i.filter(e=>t.includes(e)):i,l=[];for(let e of n)if(l.includes(e)||l.push(e),l.length>=s)break;return l}(r,t,s)}catch{return[]}}function l(e){return e.split(" ").map(e=>e?e[0].toUpperCase()+e.slice(1):e).join(" ")}e.s(["MUSCLE_GROUP_ORDER",0,r,"MUSCLE_GROUP_TAGS",0,t,"STRETCH_MUSCLE_ORDER",0,i,"STRETCH_MUSCLE_TAGS",0,s,"formatTypeLabel",()=>l,"parseTagJson",()=>n])},85064,e=>{"use strict";function t(e){if(!e||e<=0)return"Timer not set";let t=Math.floor(e/60),s=e%60;return t>0&&0===s?`${t} min`:t>0?`${t} min ${s} sec`:`${e} sec`}e.s(["formatStretchTimer",()=>t])},96388,e=>{"use strict";var t=e.i(43476),s=e.i(71645),r=e.i(78806);function i({onSubmit:e,onCancel:i}){let[n,l]=(0,s.useState)(""),[a,o]=(0,s.useState)(""),[c,d]=(0,s.useState)(""),[x,u]=(0,s.useState)(""),[m,h]=(0,s.useState)([]),[p,b]=(0,s.useState)(!1),g=async t=>{if(t.preventDefault(),!n.trim())return;let s=a.trim(),r=s?Number(s):NaN,i=Number.isFinite(r)&&r>0?Math.round(r):void 0,l=m.map(e=>e.trim()).filter(Boolean);b(!0);try{await e({name:n.trim(),timerSeconds:i,videoUrl:c.trim()||void 0,tips:x.trim()||void 0,muscleGroups:l.length?l:void 0})}finally{b(!1)}};return(0,t.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center p-4 z-50",children:(0,t.jsxs)("div",{className:"bg-zinc-800 rounded-lg p-6 max-w-md w-full border-2 border-blue-700",children:[(0,t.jsx)("h2",{className:"text-2xl font-bold text-white mb-4",children:"Create New Stretch"}),(0,t.jsxs)("form",{onSubmit:g,className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{className:"text-zinc-300 text-sm font-semibold block mb-2",children:["Stretch Name ",(0,t.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,t.jsx)("input",{type:"text",value:n,onChange:e=>l(e.target.value),placeholder:"e.g., Hamstring Stretch",className:"w-full bg-zinc-900 text-white px-4 py-3 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-600",required:!0,autoFocus:!0})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-zinc-300 text-sm font-semibold block mb-2",children:"Timer (seconds)"}),(0,t.jsx)("input",{type:"number",min:"1",step:"1",value:a,onChange:e=>o(e.target.value),placeholder:"e.g., 30",className:"w-full bg-zinc-900 text-white px-4 py-3 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-600"})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{className:"text-zinc-300 text-sm font-semibold block mb-2",children:["Muscle Groups ",(0,t.jsx)("span",{className:"text-zinc-500",children:"(up to 2)"})]}),(0,t.jsx)("div",{className:"rounded-lg border border-zinc-700 bg-zinc-900 px-3 py-2",children:0===m.length?(0,t.jsx)("span",{className:"text-zinc-500 text-sm",children:"Select muscle groups below"}):(0,t.jsx)("div",{className:"flex flex-wrap gap-2",children:m.map(e=>(0,t.jsxs)("button",{type:"button",onClick:()=>h(t=>t.filter(t=>t!==e)),className:"inline-flex items-center gap-1 rounded-full border border-blue-600/40 bg-blue-700/30 px-3 py-1 text-xs font-semibold text-blue-100 transition hover:border-blue-400 hover:bg-blue-600/60",children:[(0,r.formatTypeLabel)(e),(0,t.jsx)("span",{"aria-hidden":!0,children:"Ã—"})]},e))})}),(0,t.jsxs)("div",{className:"mt-3",children:[(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsxs)("select",{value:"",onChange:e=>{let t=e.target.value;t&&(h(e=>e.includes(t)||e.length>=2?e:[...e,t]),e.currentTarget.value="")},className:"w-full appearance-none bg-zinc-900 text-white px-4 py-2 pr-10 rounded-lg border border-zinc-700 focus:outline-none focus:ring-2 focus:ring-blue-600",children:[(0,t.jsx)("option",{value:"",disabled:!0,children:"Add a muscle group..."}),r.STRETCH_MUSCLE_TAGS.filter(e=>"unknown"!==e).map(e=>(0,t.jsx)("option",{value:e,children:(0,r.formatTypeLabel)(e)},e))]}),(0,t.jsx)("span",{className:"pointer-events-none absolute right-3 top-1/2 -translate-y-1/2 text-zinc-400",children:"â–¾"})]}),(0,t.jsx)("p",{className:"mt-2 text-xs text-zinc-500",children:"Choose up to two muscle groups."})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-zinc-300 text-sm font-semibold block mb-2",children:"Video URL"}),(0,t.jsx)("input",{type:"url",value:c,onChange:e=>d(e.target.value),placeholder:"https://youtube.com/...",className:"w-full bg-zinc-900 text-white px-4 py-3 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-600"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-zinc-300 text-sm font-semibold block mb-2",children:"Tips"}),(0,t.jsx)("textarea",{value:x,onChange:e=>u(e.target.value),placeholder:"Form tips, cues, etc.",rows:3,className:"w-full bg-zinc-900 text-white px-4 py-3 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-600 resize-none"})]}),(0,t.jsx)("p",{className:"text-xs text-zinc-400",children:"Duration, video URL, tips, and muscle groups will be auto-filled with AI if empty."}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-3 pt-2",children:[(0,t.jsx)("button",{type:"button",onClick:i,className:"bg-zinc-700 hover:bg-zinc-600 text-white py-3 rounded-lg font-semibold transition-colors",children:"Cancel"}),(0,t.jsx)("button",{type:"submit",disabled:!n.trim()||p,className:"bg-blue-700 hover:bg-blue-800 disabled:bg-blue-900 disabled:cursor-not-allowed text-white py-3 rounded-lg font-bold transition-colors",children:p?"Creating...":"Create & Select"})]})]})]})})}var n=e.i(85064);let l="other";function a(e){return(0,r.parseTagJson)(e.muscle_groups,r.STRETCH_MUSCLE_TAGS)}function o({onSelect:e,onCancel:o,filterType:c,title:d}){let[x,u]=(0,s.useState)([]),[m,h]=(0,s.useState)(""),[p,b]=(0,s.useState)(!0),[g,f]=(0,s.useState)(!1);(0,s.useEffect)(()=>{j()},[]);let j=async()=>{try{let e=await fetch("/api/stretches"),t=await e.json();u(t.stretches)}catch(e){console.error("Error fetching stretches:",e)}finally{b(!1)}},v=async t=>{try{let s=await fetch("/api/stretches",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!s.ok)throw Error("Failed to create stretch");let r=await s.json();await j();let i=t.muscleGroups?.length?JSON.stringify(t.muscleGroups):null,n={id:r.id,name:t.name,timer_seconds:"number"==typeof r.timer_seconds?r.timer_seconds:null,muscle_groups:i,video_url:t.videoUrl||null,tips:"string"==typeof r.tips?r.tips:t.tips||null};f(!1),e(n)}catch(e){console.error("Error creating stretch:",e),alert("Failed to create stretch. Please try again.")}},N=function(e){let t=new Map;for(let s of[...e].sort((e,t)=>e.name.localeCompare(t.name))){let e=a(s);for(let r of e.length>0?e:[l]){let e=t.get(r);e?e.push(s):t.set(r,[s])}}let s=[...r.STRETCH_MUSCLE_ORDER,l];return Array.from(t.keys()).sort((e,t)=>{let r=s.indexOf(e),i=s.indexOf(t);return -1===r&&-1===i?e.localeCompare(t):-1===r?1:-1===i?-1:r-i}).map(e=>({type:e,stretches:t.get(e)||[]}))}(x.filter(e=>{if(!m)return!0;let t=m.toLowerCase(),s=e.name.toLowerCase(),r=a(e).join(" ").toLowerCase();return s.includes(t)||r.includes(t)}));return g?(0,t.jsx)(i,{onSubmit:v,onCancel:()=>f(!1)}):(0,t.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center p-4 z-50",children:(0,t.jsxs)("div",{className:"bg-zinc-800 rounded-lg p-6 max-w-3xl w-full max-h-[90vh] flex flex-col border-2 border-blue-800",children:[(0,t.jsx)("h2",{className:"text-2xl font-bold text-white mb-4",children:d||("pre_workout"===c?"Select Pre-Workout Stretch":"post_workout"===c?"Select Post-Workout Stretch":"Select Stretch")}),(0,t.jsxs)("div",{className:"mb-4 space-y-3",children:[(0,t.jsx)("input",{type:"text",value:m,onChange:e=>h(e.target.value),placeholder:"Search by name or muscle group...",className:"w-full bg-zinc-900 text-white px-4 py-3 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-700",autoFocus:!0}),(0,t.jsx)("button",{onClick:()=>f(!0),className:"w-full bg-blue-700 hover:bg-blue-800 text-white py-3 rounded-lg font-bold transition-colors",children:"+ Create New Stretch"})]}),(0,t.jsx)("div",{className:"flex-1 overflow-y-auto mb-4 space-y-2",children:p?(0,t.jsx)("div",{className:"text-center text-zinc-400 py-8",children:"Loading stretches..."}):0===N.length?(0,t.jsx)("div",{className:"text-center text-zinc-400 py-8",children:m?"No stretches found":"No stretches available"}):(0,t.jsx)("div",{className:"space-y-4",children:N.map(({type:s,stretches:i})=>(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("div",{className:"text-xs uppercase tracking-wide text-zinc-400",children:(0,r.formatTypeLabel)(s)}),i.map(s=>{let r=a(s);return(0,t.jsx)("button",{onClick:()=>e(s),className:"w-full bg-zinc-900 hover:bg-zinc-700 text-left p-4 rounded-lg transition-colors border-2 border-zinc-700 hover:border-blue-600",children:(0,t.jsx)("div",{className:"flex items-start justify-between",children:(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("div",{className:"text-white font-semibold",children:s.name}),(0,t.jsx)("div",{className:"text-zinc-400 text-sm mt-1",children:(0,n.formatStretchTimer)(s.timer_seconds)}),r.length>0&&(0,t.jsx)("div",{className:"flex flex-wrap gap-1 mt-2",children:r.map((e,s)=>(0,t.jsx)("span",{className:"text-xs bg-zinc-700 text-zinc-300 px-2 py-1 rounded",children:e},s))})]})})},s.id)})]},s))})}),(0,t.jsx)("button",{onClick:o,className:"w-full bg-zinc-700 hover:bg-zinc-600 text-white py-3 rounded-lg font-semibold transition-colors",children:"Cancel"})]})})}e.s(["default",()=>o],96388)},90408,2519,e=>{"use strict";var t=e.i(43476),s=e.i(71645),r=e.i(71829);function i({onSubmit:e,onCancel:i}){let[n,l]=(0,s.useState)(""),[a,o]=(0,s.useState)(""),[c,d]=(0,s.useState)(""),[x,u]=(0,s.useState)(""),[m,h]=(0,s.useState)(r.EXERCISE_PRIMARY_METRICS.weight),[p,b]=(0,s.useState)("sec"),[g,f]=(0,s.useState)(!1),j=async t=>{if(t.preventDefault(),n.trim()){f(!0);try{await e({name:n.trim(),videoUrl:a.trim()||void 0,tips:c.trim()||void 0,equipment:x||void 0,primaryMetric:m,metricUnit:m===r.EXERCISE_PRIMARY_METRICS.time||m===r.EXERCISE_PRIMARY_METRICS.distance?p.trim():void 0})}finally{f(!1)}}};return(0,t.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center p-4 z-50",children:(0,t.jsxs)("div",{className:"bg-zinc-800 rounded-lg p-6 max-w-md w-full border-2 border-green-600",children:[(0,t.jsx)("h2",{className:"text-2xl font-bold text-white mb-4",children:"Create New Exercise"}),(0,t.jsxs)("form",{onSubmit:j,className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{className:"text-zinc-300 text-sm font-semibold block mb-2",children:["Exercise Name ",(0,t.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,t.jsx)("input",{type:"text",value:n,onChange:e=>l(e.target.value),placeholder:"e.g., Barbell Bench Press",className:"w-full bg-zinc-900 text-white px-4 py-3 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500",required:!0,autoFocus:!0})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-zinc-300 text-sm font-semibold block mb-2",children:"Equipment"}),(0,t.jsxs)("select",{value:x,onChange:e=>u(e.target.value),className:"w-full bg-zinc-900 text-white px-4 py-3 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 appearance-none cursor-pointer",style:{backgroundImage:"url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3E%3Cpath stroke='%23ffffff' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='M6 8l4 4 4-4'/%3E%3C/svg%3E\")",backgroundPosition:"right 0.5rem center",backgroundRepeat:"no-repeat",backgroundSize:"1.5em 1.5em",paddingRight:"2.5rem"},children:[(0,t.jsx)("option",{value:"",children:"Select equipment (optional)"}),(0,t.jsx)("option",{value:"Barbell",children:"Barbell"}),(0,t.jsx)("option",{value:"Dumbbells",children:"Dumbbells"}),(0,t.jsx)("option",{value:"Bodyweight",children:"Bodyweight"}),(0,t.jsx)("option",{value:"Machine",children:"Machine"}),(0,t.jsx)("option",{value:"Cable",children:"Cable"}),(0,t.jsx)("option",{value:"Bands",children:"Bands"}),(0,t.jsx)("option",{value:"Other",children:"Other"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-zinc-300 text-sm font-semibold block mb-2",children:"Tracking Metric"}),(0,t.jsxs)("select",{value:m,onChange:e=>{let t=e.target.value;h(t),t===r.EXERCISE_PRIMARY_METRICS.time?b("sec"):t===r.EXERCISE_PRIMARY_METRICS.distance&&b("m")},className:"w-full bg-zinc-900 text-white px-4 py-3 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 appearance-none cursor-pointer",style:{backgroundImage:"url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3E%3Cpath stroke='%23ffffff' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='M6 8l4 4 4-4'/%3E%3C/svg%3E\")",backgroundPosition:"right 0.5rem center",backgroundRepeat:"no-repeat",backgroundSize:"1.5em 1.5em",paddingRight:"2.5rem"},children:[(0,t.jsx)("option",{value:r.EXERCISE_PRIMARY_METRICS.weight,children:"Weight"}),(0,t.jsx)("option",{value:r.EXERCISE_PRIMARY_METRICS.height,children:"Height"}),(0,t.jsx)("option",{value:r.EXERCISE_PRIMARY_METRICS.time,children:"Time"}),(0,t.jsx)("option",{value:r.EXERCISE_PRIMARY_METRICS.distance,children:"Distance"}),(0,t.jsx)("option",{value:r.EXERCISE_PRIMARY_METRICS.repsOnly,children:"Reps only"})]}),m===r.EXERCISE_PRIMARY_METRICS.height&&(0,t.jsx)("p",{className:"text-zinc-500 text-xs mt-2",children:"Uses your profile height unit (in or cm)."})]}),(m===r.EXERCISE_PRIMARY_METRICS.time||m===r.EXERCISE_PRIMARY_METRICS.distance)&&(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-zinc-300 text-sm font-semibold block mb-2",children:"Unit"}),(0,t.jsx)("select",{value:p,onChange:e=>b(e.target.value),className:"w-full bg-zinc-900 text-white px-4 py-3 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 appearance-none cursor-pointer",style:{backgroundImage:"url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3E%3Cpath stroke='%23ffffff' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='M6 8l4 4 4-4'/%3E%3C/svg%3E\")",backgroundPosition:"right 0.5rem center",backgroundRepeat:"no-repeat",backgroundSize:"1.5em 1.5em",paddingRight:"2.5rem"},children:m===r.EXERCISE_PRIMARY_METRICS.time?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("option",{value:"sec",children:"sec"}),(0,t.jsx)("option",{value:"min",children:"min"})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("option",{value:"m",children:"m"}),(0,t.jsx)("option",{value:"km",children:"km"}),(0,t.jsx)("option",{value:"yd",children:"yd"}),(0,t.jsx)("option",{value:"mi",children:"mi"})]})})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-zinc-300 text-sm font-semibold block mb-2",children:"Video URL"}),(0,t.jsxs)("p",{className:"text-zinc-500 text-xs mb-2",children:['If left empty, will default to YouTube search for "',n||"exercise name",'"']}),(0,t.jsx)("input",{type:"url",value:a,onChange:e=>o(e.target.value),placeholder:"https://youtube.com/...",className:"w-full bg-zinc-900 text-white px-4 py-3 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-zinc-300 text-sm font-semibold block mb-2",children:"Tips"}),(0,t.jsx)("textarea",{value:c,onChange:e=>d(e.target.value),placeholder:"Form tips, cues, etc.",rows:3,className:"w-full bg-zinc-900 text-white px-4 py-3 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 resize-none"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-3 pt-2",children:[(0,t.jsx)("button",{type:"button",onClick:i,className:"bg-zinc-700 hover:bg-zinc-600 text-white py-3 rounded-lg font-semibold transition-colors",children:"Cancel"}),(0,t.jsx)("button",{type:"submit",disabled:!n.trim()||g,className:"bg-green-600 hover:bg-green-700 disabled:bg-green-800 disabled:cursor-not-allowed text-white py-3 rounded-lg font-bold transition-colors",children:g?"Creating...":"Create & Select"})]})]})]})})}var n=e.i(78806);let l="other";function a(e){return(0,n.parseTagJson)(e.muscle_groups,n.MUSCLE_GROUP_TAGS)}function o({onSelect:e,onCancel:r,title:o}){let[c,d]=(0,s.useState)([]),[x,u]=(0,s.useState)(""),[m,h]=(0,s.useState)(!0),[p,b]=(0,s.useState)(!1);(0,s.useEffect)(()=>{g()},[]);let g=async()=>{try{let e=await fetch("/api/exercises"),t=await e.json();d(t.exercises)}catch(e){console.error("Error fetching exercises:",e)}finally{h(!1)}},f=async t=>{try{let s=await fetch("/api/exercises",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!s.ok)throw Error("Failed to create exercise");let r=await s.json();await g();let i=c.find(e=>e.id===r.id)||{id:r.id,name:t.name,video_url:t.videoUrl||null,tips:t.tips||null,equipment:t.equipment||null,is_bodyweight:"number"==typeof r.is_bodyweight?r.is_bodyweight:null,primary_metric:"string"==typeof r.primary_metric?r.primary_metric:null,metric_unit:"string"==typeof r.metric_unit?r.metric_unit:null};e(i)}catch(e){console.error("Error creating exercise:",e),alert("Failed to create exercise. Please try again.")}},j=function(e){let t=new Map;for(let s of[...e].sort((e,t)=>e.name.localeCompare(t.name))){let e=a(s);for(let r of e.length>0?e:[l]){let e=t.get(r);e?e.push(s):t.set(r,[s])}}let s=[...n.MUSCLE_GROUP_ORDER,l];return Array.from(t.keys()).sort((e,t)=>{let r=s.indexOf(e),i=s.indexOf(t);return -1===r&&-1===i?e.localeCompare(t):-1===r?1:-1===i?-1:r-i}).map(e=>({type:e,exercises:t.get(e)||[]}))}(c.filter(e=>{if(!x)return!0;let t=x.toLowerCase(),s=a(e).join(" ").toLowerCase();return e.name.toLowerCase().includes(t)||s.includes(t)}));return p?(0,t.jsx)(i,{onSubmit:f,onCancel:()=>b(!1)}):(0,t.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center p-4 z-50",children:(0,t.jsxs)("div",{className:"bg-zinc-800 rounded-lg p-6 max-w-3xl w-full max-h-[90vh] flex flex-col border-2 border-blue-600",children:[(0,t.jsx)("h2",{className:"text-2xl font-bold text-white mb-4",children:o||"Select Exercise"}),(0,t.jsxs)("div",{className:"mb-4 space-y-3",children:[(0,t.jsx)("input",{type:"text",value:x,onChange:e=>u(e.target.value),placeholder:"Search exercises or muscle groups...",className:"w-full bg-zinc-900 text-white px-4 py-3 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",autoFocus:!0}),(0,t.jsx)("button",{onClick:()=>b(!0),className:"w-full bg-green-600 hover:bg-green-700 text-white py-3 rounded-lg font-bold transition-colors",children:"+ Create New Exercise"})]}),(0,t.jsx)("div",{className:"flex-1 overflow-y-auto mb-4 space-y-2",children:m?(0,t.jsx)("div",{className:"text-center text-zinc-400 py-8",children:"Loading exercises..."}):0===j.length?(0,t.jsx)("div",{className:"text-center text-zinc-400 py-8",children:x?"No exercises found":"No exercises available"}):(0,t.jsx)("div",{className:"space-y-4",children:j.map(({type:s,exercises:r})=>(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("div",{className:"text-xs uppercase tracking-wide text-zinc-400",children:(0,n.formatTypeLabel)(s)}),r.map(s=>(0,t.jsx)("button",{onClick:()=>e(s),className:"w-full bg-zinc-900 hover:bg-zinc-700 text-left p-4 rounded-lg transition-colors border-2 border-zinc-700 hover:border-blue-500",children:(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-white font-semibold",children:s.name}),s.equipment&&(0,t.jsx)("div",{className:"text-zinc-400 text-sm mt-1",children:s.equipment})]})},s.id))]},s))})}),(0,t.jsx)("button",{onClick:r,className:"w-full bg-zinc-700 hover:bg-zinc-600 text-white py-3 rounded-lg font-semibold transition-colors",children:"Cancel"})]})})}e.s(["default",()=>o],90408);let c="other";function d(e){return(0,n.parseTagJson)(e.muscle_groups,n.MUSCLE_GROUP_TAGS)}function x(e){let t=new Map;for(let s of[...e].sort((e,t)=>e.name.localeCompare(t.name))){let e=d(s);for(let r of e.length>0?e:[c]){let e=t.get(r);e?e.push(s):t.set(r,[s])}}let s=[...n.MUSCLE_GROUP_ORDER,c];return Array.from(t.keys()).sort((e,t)=>{let r=s.indexOf(e),i=s.indexOf(t);return -1===r&&-1===i?e.localeCompare(t):-1===r?1:-1===i?-1:r-i}).map(e=>({type:e,exercises:t.get(e)||[]}))}function u({onSelect:e,onCancel:r}){let[l,a]=(0,s.useState)([]),[o,c]=(0,s.useState)(""),[u,m]=(0,s.useState)(""),[h,p]=(0,s.useState)(!0),[b,g]=(0,s.useState)(null),[f,j]=(0,s.useState)(null),[v,N]=(0,s.useState)(!1),[y,w]=(0,s.useState)(null);(0,s.useEffect)(()=>{S()},[]);let S=async()=>{try{let e=await fetch("/api/exercises"),t=await e.json();a(t.exercises)}catch(e){console.error("Error fetching exercises:",e)}finally{p(!1)}},C=async e=>{try{let t=await fetch("/api/exercises",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw Error("Failed to create exercise");let s=await t.json();await S();let r={id:s.id,name:e.name,video_url:e.videoUrl||null,tips:e.tips||null,equipment:e.equipment||null,primary_metric:"string"==typeof s.primary_metric?s.primary_metric:null,metric_unit:"string"==typeof s.metric_unit?s.metric_unit:null};"exercise1"===y?(g(r),c("")):"exercise2"===y&&(j(r),m("")),N(!1),w(null)}catch(e){console.error("Error creating exercise:",e),alert("Failed to create exercise. Please try again.")}},E=l.filter(e=>{if(!o)return!0;let t=o.toLowerCase(),s=d(e).join(" ").toLowerCase();return e.name.toLowerCase().includes(t)||s.includes(t)}),k=l.filter(e=>{if(!u)return!0;let t=u.toLowerCase(),s=d(e).join(" ").toLowerCase();return e.name.toLowerCase().includes(t)||s.includes(t)}),z=x(E),R=x(k);return v?(0,t.jsx)(i,{onSubmit:C,onCancel:()=>{N(!1),w(null)}}):(0,t.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center p-4 z-50",children:(0,t.jsxs)("div",{className:"bg-zinc-800 rounded-lg p-6 max-w-4xl w-full max-h-[90vh] flex flex-col border-2 border-purple-600",children:[(0,t.jsx)("h2",{className:"text-2xl font-bold text-white mb-4",children:"Create Superset"}),(0,t.jsx)("p",{className:"text-zinc-400 text-sm mb-4",children:"Select two exercises to pair together"}),(0,t.jsxs)("div",{className:"flex-1 overflow-hidden flex gap-4 mb-4",children:[(0,t.jsxs)("div",{className:"flex-1 flex flex-col min-h-0",children:[(0,t.jsxs)("div",{className:"mb-2",children:[(0,t.jsx)("div",{className:"text-purple-400 text-sm font-bold mb-2",children:"Exercise 1"}),b?(0,t.jsxs)("div",{className:"bg-purple-900/30 border-2 border-purple-500 rounded-lg p-3 flex items-center justify-between",children:[(0,t.jsx)("span",{className:"text-white font-semibold",children:b.name}),(0,t.jsx)("button",{onClick:()=>g(null),className:"text-purple-300 hover:text-white text-sm",children:"Change"})]}):(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("input",{type:"text",value:o,onChange:e=>c(e.target.value),placeholder:"Search exercises or muscle groups...",className:"w-full bg-zinc-900 text-white px-3 py-2 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-purple-500",autoFocus:!0}),(0,t.jsx)("button",{onClick:()=>{w("exercise1"),N(!0)},className:"w-full bg-green-600 hover:bg-green-700 text-white py-2 rounded-lg text-sm font-semibold transition-colors",children:"+ Create New Exercise"})]})]}),!b&&(0,t.jsx)("div",{className:"flex-1 overflow-y-auto space-y-2",children:h?(0,t.jsx)("div",{className:"text-center text-zinc-400 py-4",children:"Loading..."}):0===z.length?(0,t.jsx)("div",{className:"text-center text-zinc-400 py-4",children:"No exercises found"}):(0,t.jsx)("div",{className:"space-y-4",children:z.map(({type:e,exercises:s})=>(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("div",{className:"text-[10px] uppercase tracking-wide text-zinc-400",children:(0,n.formatTypeLabel)(e)}),s.map(e=>(0,t.jsxs)("button",{onClick:()=>g(e),className:"w-full bg-zinc-900 hover:bg-zinc-700 text-left p-3 rounded-lg transition-colors border border-zinc-700 hover:border-purple-500",children:[(0,t.jsx)("div",{className:"text-white text-sm font-semibold",children:e.name}),e.equipment&&(0,t.jsx)("div",{className:"text-zinc-400 text-xs mt-1",children:e.equipment})]},e.id))]},e))})})]}),(0,t.jsx)("div",{className:"flex items-center",children:(0,t.jsx)("div",{className:"text-purple-400 text-2xl font-bold",children:"+"})}),(0,t.jsxs)("div",{className:"flex-1 flex flex-col min-h-0",children:[(0,t.jsxs)("div",{className:"mb-2",children:[(0,t.jsx)("div",{className:"text-purple-400 text-sm font-bold mb-2",children:"Exercise 2"}),f?(0,t.jsxs)("div",{className:"bg-purple-900/30 border-2 border-purple-500 rounded-lg p-3 flex items-center justify-between",children:[(0,t.jsx)("span",{className:"text-white font-semibold",children:f.name}),(0,t.jsx)("button",{onClick:()=>j(null),className:"text-purple-300 hover:text-white text-sm",children:"Change"})]}):(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("input",{type:"text",value:u,onChange:e=>m(e.target.value),placeholder:"Search exercises or muscle groups...",className:"w-full bg-zinc-900 text-white px-3 py-2 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-purple-500"}),(0,t.jsx)("button",{onClick:()=>{w("exercise2"),N(!0)},className:"w-full bg-green-600 hover:bg-green-700 text-white py-2 rounded-lg text-sm font-semibold transition-colors",children:"+ Create New Exercise"})]})]}),!f&&(0,t.jsx)("div",{className:"flex-1 overflow-y-auto space-y-2",children:h?(0,t.jsx)("div",{className:"text-center text-zinc-400 py-4",children:"Loading..."}):0===R.length?(0,t.jsx)("div",{className:"text-center text-zinc-400 py-4",children:"No exercises found"}):(0,t.jsx)("div",{className:"space-y-4",children:R.map(({type:e,exercises:s})=>(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("div",{className:"text-[10px] uppercase tracking-wide text-zinc-400",children:(0,n.formatTypeLabel)(e)}),s.map(e=>(0,t.jsxs)("button",{onClick:()=>j(e),className:"w-full bg-zinc-900 hover:bg-zinc-700 text-left p-3 rounded-lg transition-colors border border-zinc-700 hover:border-purple-500",children:[(0,t.jsx)("div",{className:"text-white text-sm font-semibold",children:e.name}),e.equipment&&(0,t.jsx)("div",{className:"text-zinc-400 text-xs mt-1",children:e.equipment})]},e.id))]},e))})})]})]}),(0,t.jsxs)("div",{className:"flex gap-3",children:[(0,t.jsx)("button",{onClick:r,className:"flex-1 bg-zinc-700 hover:bg-zinc-600 text-white py-3 rounded-lg font-semibold transition-colors",children:"Cancel"}),(0,t.jsx)("button",{onClick:()=>{b&&f&&e(b,f)},disabled:!b||!f,className:"flex-1 bg-purple-600 hover:bg-purple-700 disabled:bg-purple-900 disabled:cursor-not-allowed text-white py-3 rounded-lg font-bold transition-colors",children:"Add Superset"})]})]})})}e.s(["default",()=>u],2519)},85763,e=>{"use strict";var t=e.i(43476),s=e.i(71645),r=e.i(85064);function i({onClick:e,label:s,color:r}){return(0,t.jsxs)("button",{onClick:e,className:`w-full py-2 text-sm rounded ${{green:"bg-green-900/50 hover:bg-green-800/50",blue:"bg-blue-900/50 hover:bg-blue-800/50",orange:"bg-orange-900/50 hover:bg-orange-800/50"}[r]} text-white transition-colors mb-2`,children:["+ ",s]})}function n({onAddExercise:e,onAddSuperset:s}){return(0,t.jsxs)("div",{className:"flex gap-2 mb-2",children:[(0,t.jsx)("button",{onClick:e,className:"flex-1 py-2 text-sm rounded bg-orange-900/60 text-white hover:bg-orange-800/60 transition-colors",children:"+ Exercise"}),(0,t.jsx)("button",{onClick:s,className:"flex-1 py-2 text-sm rounded bg-purple-900/60 text-white hover:bg-purple-800/60 transition-colors",children:"+ Superset"})]})}function l({stretch:e,onDelete:s}){return(0,t.jsxs)("div",{className:"bg-zinc-800 rounded-lg p-4 border-2 border-zinc-700 mb-2 flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-white font-semibold",children:e.name}),(0,t.jsx)("div",{className:"text-zinc-400 text-sm",children:(0,r.formatStretchTimer)(e.timerSeconds)})]}),(0,t.jsx)("button",{onClick:s,className:"text-red-500 hover:text-red-400 p-2",title:"Delete",children:(0,t.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})}function a({exercise:e,onDelete:s}){let r=!!e.exercise_id2;return(0,t.jsx)("div",{className:`bg-zinc-800 rounded-lg p-4 border-2 ${r?"border-purple-700":"border-zinc-700"} mb-2`,children:(0,t.jsxs)("div",{className:"flex items-start justify-between",children:[(0,t.jsxs)("div",{className:"flex-1",children:[r&&(0,t.jsx)("div",{className:"text-purple-400 text-xs font-bold mb-2",children:"SUPERSET"}),(0,t.jsx)("div",{className:"text-white font-semibold",children:e.exercise_name}),r&&e.exercise2_name&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"text-purple-400 text-sm my-1",children:"+"}),(0,t.jsx)("div",{className:"text-white font-semibold",children:e.exercise2_name})]})]}),(0,t.jsx)("button",{onClick:s,className:"text-red-500 hover:text-red-400 p-2",title:"Delete",children:(0,t.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})})}function o({cardio:e,onDelete:s}){return(0,t.jsx)("div",{className:"bg-zinc-800 rounded-lg p-4 border-2 border-red-900 mb-2",children:(0,t.jsxs)("div",{className:"flex items-start justify-between",children:[(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("div",{className:"text-white font-semibold text-lg",children:e.type}),e.duration&&(0,t.jsx)("div",{className:"text-zinc-400 text-sm",children:e.duration}),e.intensity&&(0,t.jsx)("div",{className:"text-zinc-500 text-sm",children:e.intensity}),e.tips&&(0,t.jsx)("div",{className:"text-zinc-500 text-xs mt-1",children:e.tips})]}),s&&(0,t.jsx)("button",{onClick:s,className:"text-red-500 hover:text-red-400 p-2",title:"Delete",children:(0,t.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})})}function c({onSave:e,onCancel:r}){let[i,n]=(0,s.useState)(""),[l,a]=(0,s.useState)(""),[o,c]=(0,s.useState)(""),[d,x]=(0,s.useState)("");return(0,t.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center p-4 z-50",children:(0,t.jsxs)("div",{className:"bg-zinc-800 rounded-lg p-6 max-w-md w-full border-2 border-red-600",children:[(0,t.jsx)("h2",{className:"text-2xl font-bold text-white mb-4",children:"Add Cardio"}),(0,t.jsxs)("div",{className:"space-y-4 mb-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-zinc-400 text-sm block mb-1",children:"Type *"}),(0,t.jsx)("input",{type:"text",value:i,onChange:e=>n(e.target.value),placeholder:"e.g., Incline Walk, Bike, Stairmaster",className:"w-full bg-zinc-900 text-white px-3 py-2 rounded focus:outline-none focus:ring-2 focus:ring-red-500",autoFocus:!0})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-zinc-400 text-sm block mb-1",children:"Duration *"}),(0,t.jsx)("input",{type:"text",value:l,onChange:e=>a(e.target.value),placeholder:"e.g., 15 min, 20 min",className:"w-full bg-zinc-900 text-white px-3 py-2 rounded focus:outline-none focus:ring-2 focus:ring-red-500"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-zinc-400 text-sm block mb-1",children:"Intensity"}),(0,t.jsx)("input",{type:"text",value:o,onChange:e=>c(e.target.value),placeholder:"e.g., 12% incline, 3.0 mph",className:"w-full bg-zinc-900 text-white px-3 py-2 rounded focus:outline-none focus:ring-2 focus:ring-red-500"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-zinc-400 text-sm block mb-1",children:"Tips"}),(0,t.jsx)("textarea",{value:d,onChange:e=>x(e.target.value),placeholder:"Optional tips...",rows:2,className:"w-full bg-zinc-900 text-white px-3 py-2 rounded focus:outline-none focus:ring-2 focus:ring-red-500 resize-none"})]})]}),(0,t.jsxs)("div",{className:"flex gap-3",children:[(0,t.jsx)("button",{onClick:r,className:"flex-1 bg-zinc-700 hover:bg-zinc-600 text-white py-3 rounded-lg font-semibold transition-colors",children:"Cancel"}),(0,t.jsx)("button",{onClick:()=>{i.trim()&&l.trim()&&e({type:i.trim(),duration:l.trim(),intensity:o.trim(),tips:d.trim()})},disabled:!i.trim()||!l.trim(),className:"flex-1 bg-red-600 hover:bg-red-700 disabled:bg-red-900 disabled:cursor-not-allowed text-white py-3 rounded-lg font-bold transition-colors",children:"Add Cardio"})]})]})})}e.s(["AddButton",()=>i,"CardioForm",()=>c,"CardioItem",()=>o,"ExerciseAddRow",()=>n,"ExerciseItem",()=>a,"StretchItem",()=>l])},44979,e=>{"use strict";var t=e.i(43476),s=e.i(71645),r=e.i(18566),i=e.i(90408),n=e.i(2519),l=e.i(96388),a=e.i(85763),o=e.i(49448),c=e.i(71829),d=e.i(85064);let x="ai_routine_draft";function u({stretch:e}){return(0,t.jsxs)("div",{className:"bg-zinc-800 rounded-lg p-4 border-2 border-zinc-700 mb-2",children:[(0,t.jsx)("div",{className:"text-white font-semibold",children:e.name}),(0,t.jsx)("div",{className:"text-zinc-400 text-sm",children:(0,d.formatStretchTimer)(e.timerSeconds)}),e.tips&&(0,t.jsx)("div",{className:"text-zinc-500 text-xs mt-1",children:e.tips})]})}function m({exercise:e}){if(e.type===c.EXERCISE_TYPES.b2b){let[s,r]=e.exercises||[];return(0,t.jsxs)("div",{className:"bg-zinc-800 rounded-lg p-4 border-2 border-purple-700 mb-2",children:[(0,t.jsx)("div",{className:"text-purple-400 text-xs font-bold mb-2",children:"SUPERSET"}),(0,t.jsx)("div",{className:"text-white font-semibold",children:s?.name||"Exercise 1"}),s?.tips&&(0,t.jsx)("div",{className:"text-zinc-500 text-xs mt-1",children:s.tips}),(0,t.jsx)("div",{className:"text-purple-400 text-sm my-1",children:"+"}),(0,t.jsx)("div",{className:"text-white font-semibold",children:r?.name||"Exercise 2"}),r?.tips&&(0,t.jsx)("div",{className:"text-zinc-500 text-xs mt-1",children:r.tips})]})}return(0,t.jsxs)("div",{className:"bg-zinc-800 rounded-lg p-4 border-2 border-zinc-700 mb-2",children:[(0,t.jsx)("div",{className:"text-white font-semibold",children:e.name}),e.tips&&(0,t.jsx)("div",{className:"text-zinc-500 text-xs mt-1",children:e.tips})]})}function h(){let e=(0,r.useRouter)(),[d,h]=(0,s.useState)(""),[p,b]=(0,s.useState)(null),[g,f]=(0,s.useState)(!1),[j,v]=(0,s.useState)(null),[N,y]=(0,s.useState)("preview"),[w,S]=(0,s.useState)(!1),[C,E]=(0,s.useState)(!1),[k,z]=(0,s.useState)(!1),[R,_]=(0,s.useState)(!1),[A,I]=(0,s.useState)(!1),[T,M]=(0,s.useState)(null),[P,O]=(0,s.useState)(null),[L,U]=(0,s.useState)(null);(0,s.useEffect)(()=>{let e=localStorage.getItem(x);e&&h(e)},[]);let B=(0,s.useMemo)(()=>{if(!d.trim())return null;try{return JSON.parse(d)}catch{return null}},[d]),W=(0,s.useMemo)(()=>({name:B?.name||"Untitled",description:B?.description||"",exercises:Array.isArray(B?.exercises)?B.exercises.length:0,preStretches:Array.isArray(B?.preWorkoutStretches)?B.preWorkoutStretches.length:0,postStretches:Array.isArray(B?.postWorkoutStretches)?B.postWorkoutStretches.length:0,hasCardio:!!B?.cardio}),[B]),D=e=>{if(d.trim())try{let t=JSON.parse(d),s=e(t);h(JSON.stringify(s,null,2)),localStorage.setItem(x,JSON.stringify(s,null,2))}catch{b("JSON is invalid. Please fix it before editing.")}},F=(e,t)=>{D(s=>{if("pre"===t){let t=Array.isArray(s.preWorkoutStretches)?[...s.preWorkoutStretches]:[];return t.splice(e,1),{...s,preWorkoutStretches:t}}let r=Array.isArray(s.postWorkoutStretches)?[...s.postWorkoutStretches]:[];return r.splice(e,1),{...s,postWorkoutStretches:r}})},Y=async()=>{let t;if(d.trim()){try{t=JSON.parse(d)}catch{b("JSON is invalid. Please fix it before saving.");return}f(!0),b(null),v(null);try{let s=await fetch("/api/routines/import",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({workoutPlan:t})});if(!s.ok){let e=await s.json().catch(()=>({}));throw Error(e.error||"Failed to save routine")}localStorage.removeItem(x),v(`Saved "${t.name}" to your routines.`),setTimeout(()=>e.push("/routines"),1500)}catch(e){b(e.message||"Failed to save routine")}finally{f(!1)}}};if(!d.trim())return(0,t.jsx)("div",{className:"min-h-screen bg-zinc-900 p-4",children:(0,t.jsx)("div",{className:"max-w-3xl mx-auto py-12",children:(0,t.jsxs)("div",{className:"bg-zinc-800 border border-zinc-700 rounded-lg p-6",children:[(0,t.jsx)("h1",{className:"text-2xl font-bold text-white mb-2",children:"No routine to preview"}),(0,t.jsx)("p",{className:"text-zinc-400 mb-4",children:"Generate a routine first, then click â€œView Workoutâ€."}),(0,t.jsx)("button",{onClick:()=>e.push("/routines/ai"),className:"bg-emerald-600 hover:bg-emerald-700 text-white px-4 py-2 rounded-lg font-semibold",children:"Back to AI Builder"})]})})});let $=B?.exercises||[],H=B?.preWorkoutStretches||[],X=B?.postWorkoutStretches||[],G=B?.cardio;return(0,t.jsxs)("div",{className:"min-h-screen bg-zinc-900 p-4 pb-32",children:[(0,t.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-3xl font-bold text-white",children:"Routine Preview"}),(0,t.jsx)("p",{className:"text-zinc-400 text-sm",children:"Review, edit, and save your AI workout."})]}),(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("button",{onClick:()=>y("preview"),className:`text-sm font-semibold ${"preview"===N?"text-white":"text-zinc-400 hover:text-zinc-200"}`,children:"Preview"}),(0,t.jsx)("button",{onClick:()=>y("edit"),className:`text-sm font-semibold ${"edit"===N?"text-white":"text-zinc-400 hover:text-zinc-200"}`,children:"Edit"}),(0,t.jsx)("button",{onClick:()=>e.push("/routines/ai"),className:"text-zinc-400 hover:text-zinc-200 text-sm font-semibold",children:"Back to AI Builder"})]})]}),"preview"===N?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(o.Card,{paddingClassName:"p-6",className:"mb-6",children:[(0,t.jsx)("h2",{className:"text-2xl font-bold text-white",children:W.name}),W.description&&(0,t.jsx)("div",{className:"text-zinc-400 mt-2",children:W.description})]}),(0,t.jsxs)("section",{className:"mb-8",children:[(0,t.jsx)(o.SectionHeader,{icon:"ðŸŸ¢",iconClassName:"text-green-500",label:"Pre-Workout Stretches"}),0===H.length?(0,t.jsx)(o.EmptyState,{message:"No pre-workout stretches",className:"mb-2"}):H.map((e,s)=>(0,t.jsx)(u,{stretch:e},`pre-${s}`))]}),(0,t.jsxs)("section",{className:"mb-8",children:[(0,t.jsx)(o.SectionHeader,{icon:"ðŸ”¥",iconClassName:"text-orange-500",label:"Exercises"}),0===$.length?(0,t.jsx)(o.EmptyState,{message:"No exercises",className:"mb-2"}):$.map((e,s)=>(0,t.jsx)(m,{exercise:e},`ex-${s}`))]}),(0,t.jsxs)("section",{className:"mb-8",children:[(0,t.jsx)(o.SectionHeader,{icon:"â¤ï¸",iconClassName:"text-red-500",label:"Cardio (Optional)"}),G?(0,t.jsx)(a.CardioItem,{cardio:{type:G.type||"Cardio",duration:G.duration,intensity:G.intensity,tips:G.tips}}):(0,t.jsx)(o.EmptyState,{message:"No cardio",className:"mb-2"})]}),(0,t.jsxs)("section",{className:"mb-8",children:[(0,t.jsx)(o.SectionHeader,{icon:"ðŸ”µ",iconClassName:"text-blue-500",label:"Post-Workout Stretches"}),0===X.length?(0,t.jsx)(o.EmptyState,{message:"No post-workout stretches",className:"mb-2"}):X.map((e,s)=>(0,t.jsx)(u,{stretch:e},`post-${s}`))]})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(o.Card,{paddingClassName:"p-6",className:"mb-6",children:[(0,t.jsx)("label",{className:"text-zinc-400 text-sm block mb-2",children:"Routine Name"}),(0,t.jsx)("input",{value:B?.name||"",onChange:e=>{let t=e.target.value;D(e=>({...e,name:t}))},className:"w-full bg-zinc-900 text-white px-4 py-3 rounded-lg mb-4 focus:outline-none focus:ring-2 focus:ring-green-500"}),(0,t.jsx)("label",{className:"text-zinc-400 text-sm block mb-2",children:"Description"}),(0,t.jsx)("textarea",{value:B?.description||"",onChange:e=>{let t=e.target.value;D(e=>({...e,description:t}))},className:"w-full bg-zinc-900 text-white px-4 py-3 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500"})]}),(0,t.jsxs)("section",{className:"mb-8",children:[(0,t.jsx)(o.SectionHeader,{icon:"ðŸŸ¢",iconClassName:"text-green-500",label:"Pre-Workout Stretches"}),(0,t.jsx)(a.AddButton,{onClick:()=>{M(0),S(!0)},label:"Add Pre-Stretch",color:"green"}),0===H.length?(0,t.jsx)(o.EmptyState,{message:"No pre-workout stretches",className:"mb-2"}):H.map((e,s)=>(0,t.jsxs)("div",{children:[(0,t.jsx)(a.StretchItem,{stretch:{name:e.name,timerSeconds:e.timerSeconds},onDelete:()=>F(s,"pre")}),(0,t.jsx)(a.AddButton,{onClick:()=>{M(s+1),S(!0)},label:"Add Pre-Stretch",color:"green"})]},`pre-${s}`))]}),(0,t.jsxs)("section",{className:"mb-8",children:[(0,t.jsx)(o.SectionHeader,{icon:"ðŸ”¥",iconClassName:"text-orange-500",label:"Exercises"}),(0,t.jsx)(a.ExerciseAddRow,{onAddExercise:()=>{U(0),z(!0)},onAddSuperset:()=>{U(0),_(!0)}}),0===$.length?(0,t.jsx)(o.EmptyState,{message:"No exercises",className:"mb-2"}):$.map((e,s)=>(0,t.jsxs)("div",{children:[(0,t.jsx)(a.ExerciseItem,{exercise:e.type===c.EXERCISE_TYPES.b2b?{exercise_name:e.exercises?.[0]?.name||"Exercise 1",exercise_id2:1,exercise2_name:e.exercises?.[1]?.name||"Exercise 2"}:{exercise_name:e.name,exercise_id2:null,exercise2_name:null},onDelete:()=>{D(e=>{let t=Array.isArray(e.exercises)?[...e.exercises]:[];return t.splice(s,1),{...e,exercises:t}})}}),(0,t.jsx)(a.ExerciseAddRow,{onAddExercise:()=>{U(s+1),z(!0)},onAddSuperset:()=>{U(s+1),_(!0)}})]},`ex-${s}`))]}),(0,t.jsxs)("section",{className:"mb-8",children:[(0,t.jsx)(o.SectionHeader,{icon:"â¤ï¸",iconClassName:"text-red-500",label:"Cardio (Optional)"}),G?(0,t.jsx)(a.CardioItem,{cardio:{type:G.type||"Cardio",duration:G.duration,intensity:G.intensity,tips:G.tips},onDelete:()=>{D(e=>{let t={...e};return delete t.cardio,t})}}):(0,t.jsx)("button",{onClick:()=>I(!0),className:"w-full py-3 text-sm rounded bg-red-900/50 text-white hover:bg-red-800/50 transition-colors",children:"+ Add Cardio"})]}),(0,t.jsxs)("section",{className:"mb-8",children:[(0,t.jsx)(o.SectionHeader,{icon:"ðŸ”µ",iconClassName:"text-blue-500",label:"Post-Workout Stretches"}),(0,t.jsx)(a.AddButton,{onClick:()=>{O(0),E(!0)},label:"Add Post-Stretch",color:"blue"}),0===X.length?(0,t.jsx)(o.EmptyState,{message:"No post-workout stretches",className:"mb-2"}):X.map((e,s)=>(0,t.jsxs)("div",{children:[(0,t.jsx)(a.StretchItem,{stretch:{name:e.name,timerSeconds:e.timerSeconds},onDelete:()=>F(s,"post")}),(0,t.jsx)(a.AddButton,{onClick:()=>{O(s+1),E(!0)},label:"Add Post-Stretch",color:"blue"})]},`post-${s}`))]})]}),p&&(0,t.jsx)("div",{className:"mt-6 bg-red-900/50 border border-red-600 text-red-200 px-4 py-3 rounded-lg",children:p}),j&&(0,t.jsx)("div",{className:"mt-6 bg-emerald-900/50 border border-emerald-600 text-emerald-200 px-4 py-3 rounded-lg",children:j})]}),(0,t.jsx)(o.BottomActionBar,{maxWidthClassName:"max-w-4xl",children:(0,t.jsx)("button",{onClick:Y,disabled:!d.trim()||g,className:"w-full bg-green-600 hover:bg-green-700 disabled:bg-green-800 disabled:cursor-not-allowed text-white py-4 rounded-lg text-xl font-bold transition-colors",children:g?"Saving...":"Save & Exit"})}),w&&(0,t.jsx)(l.default,{onSelect:e=>{S(!1),D(t=>{let s=Array.isArray(t.preWorkoutStretches)?[...t.preWorkoutStretches]:[],r=T??s.length;return s.splice(r,0,{name:e.name,timerSeconds:e.timer_seconds??0,tips:e.tips||void 0}),{...t,preWorkoutStretches:s}}),M(null)},onCancel:()=>{S(!1),M(null)},filterType:"pre_workout"}),C&&(0,t.jsx)(l.default,{onSelect:e=>{E(!1),D(t=>{let s=Array.isArray(t.postWorkoutStretches)?[...t.postWorkoutStretches]:[],r=P??s.length;return s.splice(r,0,{name:e.name,timerSeconds:e.timer_seconds??0,tips:e.tips||void 0}),{...t,postWorkoutStretches:s}}),O(null)},onCancel:()=>{E(!1),O(null)},filterType:"post_workout"}),k&&(0,t.jsx)(i.default,{onSelect:e=>{z(!1),D(t=>{let s=Array.isArray(t.exercises)?[...t.exercises]:[],r=L??s.length;return s.splice(r,0,{type:c.EXERCISE_TYPES.single,name:e.name,tips:e.tips||void 0}),{...t,exercises:s}}),U(null)},onCancel:()=>{z(!1),U(null)}}),R&&(0,t.jsx)(n.default,{onSelect:(e,t)=>{_(!1),D(s=>{let r=Array.isArray(s.exercises)?[...s.exercises]:[],i=L??r.length;return r.splice(i,0,{type:c.EXERCISE_TYPES.b2b,exercises:[{name:e.name,tips:e.tips||void 0},{name:t.name,tips:t.tips||void 0}]}),{...s,exercises:r}}),U(null)},onCancel:()=>{_(!1),U(null)}}),A&&(0,t.jsx)(a.CardioForm,{onSave:e=>{D(t=>({...t,cardio:e})),I(!1)},onCancel:()=>I(!1)})]})}e.s(["default",()=>h])}]);