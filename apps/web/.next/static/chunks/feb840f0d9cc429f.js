(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,18566,(e,t,s)=>{t.exports=e.r(76562)},78806,e=>{"use strict";let t=["lower body compound","upper body compound","full body compound","chest","back","shoulders","biceps","triceps","forearms","core","lower back","glutes","quads","hamstrings","calves","hip flexors","adductors","abductors","unknown"],s=[...t],r=[...t],n=[...s];function i(e,t,s=2){if(!e)return[];try{let r=JSON.parse(e);return function(e,t,s=2){let r=Array.isArray(e)?e:"string"==typeof e?[e]:[];if(0===r.length)return[];let n=r.map(e=>"string"==typeof e?e.trim().toLowerCase():"").filter(Boolean),i=t?n.filter(e=>t.includes(e)):n,l=[];for(let e of i)if(l.includes(e)||l.push(e),l.length>=s)break;return l}(r,t,s)}catch{return[]}}function l(e){return e.split(" ").map(e=>e?e[0].toUpperCase()+e.slice(1):e).join(" ")}e.s(["MUSCLE_GROUP_ORDER",0,r,"MUSCLE_GROUP_TAGS",0,t,"STRETCH_MUSCLE_ORDER",0,n,"STRETCH_MUSCLE_TAGS",0,s,"formatTypeLabel",()=>l,"parseTagJson",()=>i])},85064,e=>{"use strict";function t(e){if(!e||e<=0)return"Timer not set";let t=Math.floor(e/60),s=e%60;return t>0&&0===s?`${t} min`:t>0?`${t} min ${s} sec`:`${e} sec`}e.s(["formatStretchTimer",()=>t])},25307,e=>{"use strict";var t=e.i(43476),s=e.i(71645),r=e.i(18566),n=e.i(78806),i=e.i(85064);function l(){let e,l,o=(0,r.useRouter)(),a=(0,r.useParams)().id,[c,d]=(0,s.useState)([]),[u,h]=(0,s.useState)([]),[m,p]=(0,s.useState)([]),[x,f]=(0,s.useState)("pre"),[b,g]=(0,s.useState)(!0),[y,j]=(0,s.useState)(""),[S,w]=(0,s.useState)(!1),[v,N]=(0,s.useState)([]),[C,T]=(0,s.useState)([]),[z,E]=(0,s.useState)(!1),[k,$]=(0,s.useState)(null);(0,s.useEffect)(()=>{P()},[]);let P=async()=>{try{let e=await fetch("/api/stretches"),t=await e.json();d(t.stretches),R(t.stretches)}catch(e){console.error("Error fetching stretches:",e)}finally{g(!1)}},R=async e=>{E(!0),$(null);try{let t=await fetch(`/api/routines/${a}/stretch-recommendations`,{method:"POST"});if(!t.ok){let e=await t.json().catch(()=>({}));throw Error(e.error||"Failed to generate recommendations")}let s=await t.json(),r=s.createdStretches||[];if(r.length>0){let t=new Set(e.map(e=>e.id)),s=r.filter(e=>!t.has(e.id));s.length>0&&d([...e,...s])}N(s.recommendedPreIds||[]),T(s.recommendedPostIds||[])}catch(e){console.error("Error fetching recommendations:",e),$(e.message||"Failed to load recommendations")}finally{E(!1)}},O=c.filter(e=>{if(!y)return!0;let t=y.toLowerCase(),s=e.name.toLowerCase(),r=A(e).join(" ").toLowerCase();return s.includes(t)||r.includes(t)}),_=new Set("pre"===x?v:C),L=[...O.filter(e=>_.has(e.id)),...O.filter(e=>!_.has(e.id))],U=async()=>{w(!0);try{for(let e=0;e<u.length;e++)await fetch(`/api/routines/${a}/stretches`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({stretchId:u[e],type:"pre",orderIndex:e})});for(let e=0;e<m.length;e++)await fetch(`/api/routines/${a}/stretches`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({stretchId:m[e],type:"post",orderIndex:e})});o.push("/routines")}catch(e){console.error("Error saving stretches:",e),alert("Failed to save stretches. Please try again.")}finally{w(!1)}};function A(e){return(0,n.parseTagJson)(e.muscle_groups,n.STRETCH_MUSCLE_TAGS)}let M=(e="pre"===x?u:m,l=new Set,e.forEach(e=>{let t=c.find(t=>t.id===e);t&&A(t).forEach(e=>l.add(e))}),Array.from(l).sort());return b?(0,t.jsx)("div",{className:"min-h-screen bg-zinc-900 flex items-center justify-center",children:(0,t.jsx)("div",{className:"text-white text-xl",children:"Loading stretches..."})}):(0,t.jsx)("div",{className:"min-h-screen bg-zinc-900 p-4",children:(0,t.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,t.jsx)("h1",{className:"text-3xl font-bold text-white mb-2",children:"Select Stretches"}),(0,t.jsx)("p",{className:"text-zinc-400 mb-6",children:"Choose stretches for your routine. You can select multiple."}),(0,t.jsxs)("div",{className:"flex gap-2 mb-6",children:[(0,t.jsxs)("button",{onClick:()=>f("pre"),className:`flex-1 py-3 rounded-lg font-bold transition-colors ${"pre"===x?"bg-blue-600 text-white":"bg-zinc-800 text-zinc-400 hover:bg-zinc-700"}`,children:["Pre-Workout (",u.length,")"]}),(0,t.jsxs)("button",{onClick:()=>f("post"),className:`flex-1 py-3 rounded-lg font-bold transition-colors ${"post"===x?"bg-purple-600 text-white":"bg-zinc-800 text-zinc-400 hover:bg-zinc-700"}`,children:["Post-Workout (",m.length,")"]})]}),(0,t.jsxs)("div",{className:`rounded-lg p-4 mb-6 border-2 ${"pre"===x?"bg-blue-900/20 border-blue-700":"bg-purple-900/20 border-purple-700"}`,children:[(0,t.jsxs)("div",{className:"text-sm font-semibold text-zinc-300 mb-2",children:["Muscle Groups Covered (",M.length,")"]}),0===M.length?(0,t.jsx)("div",{className:"text-zinc-500 text-sm",children:"Select stretches to see muscle coverage"}):(0,t.jsx)("div",{className:"flex flex-wrap gap-2",children:M.map((e,s)=>(0,t.jsx)("span",{className:`text-sm px-3 py-1 rounded-full ${"pre"===x?"bg-blue-600 text-white":"bg-purple-600 text-white"}`,children:e},s))})]}),(0,t.jsx)("input",{type:"text",value:y,onChange:e=>j(e.target.value),placeholder:"Search by name or muscle group...",className:"w-full bg-zinc-800 text-white px-4 py-3 rounded-lg mb-6 focus:outline-none focus:ring-2 focus:ring-blue-500"}),(z||k)&&(0,t.jsxs)("div",{className:"mb-6",children:[z&&(0,t.jsx)("div",{className:"text-sm text-zinc-400",children:"Finding recommended stretches for this workout..."}),k&&(0,t.jsx)("div",{className:"text-sm text-red-300",children:k})]}),(0,t.jsx)("div",{className:"space-y-3 mb-6",children:0===L.length?(0,t.jsx)("div",{className:"text-center text-zinc-400 py-8",children:"No stretches found"}):L.map(e=>{let s,r=A(e),n=(s=e.id,"pre"===x?u.includes(s):m.includes(s)),l=_.has(e.id);return(0,t.jsx)("button",{onClick:()=>{var t;return t=e.id,void("pre"===x?u.includes(t)?h(u.filter(e=>e!==t)):h([...u,t]):m.includes(t)?p(m.filter(e=>e!==t)):p([...m,t]))},className:`w-full text-left p-4 rounded-lg transition-all border-2 ${n?"pre"===x?"bg-blue-900/30 border-blue-500":"bg-purple-900/30 border-purple-500":"bg-zinc-800 border-zinc-700 hover:border-zinc-600"}`,children:(0,t.jsx)("div",{className:"flex items-start justify-between",children:(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,t.jsx)("h3",{className:"text-white font-semibold",children:e.name}),l&&(0,t.jsx)("span",{className:"text-xs text-emerald-200 bg-emerald-900/60 px-2 py-1 rounded",children:"* recommended for this workout"}),n&&(0,t.jsx)("span",{className:`text-xs px-2 py-1 rounded ${"pre"===x?"bg-blue-600":"bg-purple-600"} text-white`,children:"âœ“ Selected"})]}),(0,t.jsx)("div",{className:"text-zinc-400 text-sm mb-2",children:(0,i.formatStretchTimer)(e.timer_seconds)}),r.length>0&&(0,t.jsx)("div",{className:"flex flex-wrap gap-2",children:r.map((e,s)=>(0,t.jsx)("span",{className:"text-xs bg-zinc-700 text-zinc-300 px-2 py-1 rounded",children:e},s))})]})})},e.id)})}),(0,t.jsxs)("div",{className:"sticky bottom-4 bg-zinc-900 pt-4 space-y-3",children:[(0,t.jsx)("button",{onClick:U,disabled:S,className:"w-full bg-green-600 hover:bg-green-700 disabled:bg-green-800 disabled:cursor-not-allowed text-white py-4 rounded-lg text-lg font-bold transition-colors",children:S?"Saving...":"Save & Finish Routine"}),(0,t.jsx)("button",{onClick:()=>o.push(`/routines/builder?id=${a}`),className:"w-full bg-zinc-700 hover:bg-zinc-600 text-white py-3 rounded-lg font-semibold transition-colors",children:"Back to Exercises"})]})]})})}e.s(["default",()=>l])}]);