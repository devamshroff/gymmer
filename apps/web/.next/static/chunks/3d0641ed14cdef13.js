(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,78806,e=>{"use strict";let t=["lower body compound","upper body compound","full body compound","chest","back","shoulders","biceps","triceps","forearms","core","lower back","glutes","quads","hamstrings","calves","hip flexors","adductors","abductors","unknown"],s=[...t],r=[...t],n=[...s];function l(e,t,s=2){if(!e)return[];try{let r=JSON.parse(e);return function(e,t,s=2){let r=Array.isArray(e)?e:"string"==typeof e?[e]:[];if(0===r.length)return[];let n=r.map(e=>"string"==typeof e?e.trim().toLowerCase():"").filter(Boolean),l=t?n.filter(e=>t.includes(e)):n,i=[];for(let e of l)if(i.includes(e)||i.push(e),i.length>=s)break;return i}(r,t,s)}catch{return[]}}function i(e){return e.split(" ").map(e=>e?e[0].toUpperCase()+e.slice(1):e).join(" ")}e.s(["MUSCLE_GROUP_ORDER",0,r,"MUSCLE_GROUP_TAGS",0,t,"STRETCH_MUSCLE_ORDER",0,n,"STRETCH_MUSCLE_TAGS",0,s,"formatTypeLabel",()=>i,"parseTagJson",()=>l])},85064,e=>{"use strict";function t(e){if(!e||e<=0)return"Timer not set";let t=Math.floor(e/60),s=e%60;return t>0&&0===s?`${t} min`:t>0?`${t} min ${s} sec`:`${e} sec`}e.s(["formatStretchTimer",()=>t])},96388,e=>{"use strict";var t=e.i(43476),s=e.i(71645),r=e.i(78806);function n({onSubmit:e,onCancel:n}){let[l,i]=(0,s.useState)(""),[o,a]=(0,s.useState)(""),[c,u]=(0,s.useState)(""),[d,m]=(0,s.useState)(""),[x,h]=(0,s.useState)([]),[b,g]=(0,s.useState)(!1),f=async t=>{if(t.preventDefault(),!l.trim())return;let s=o.trim(),r=s?Number(s):NaN,n=Number.isFinite(r)&&r>0?Math.round(r):void 0,i=x.map(e=>e.trim()).filter(Boolean);g(!0);try{await e({name:l.trim(),timerSeconds:n,videoUrl:c.trim()||void 0,tips:d.trim()||void 0,muscleGroups:i.length?i:void 0})}finally{g(!1)}};return(0,t.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center p-4 z-50",children:(0,t.jsxs)("div",{className:"bg-zinc-800 rounded-lg p-6 max-w-md w-full border-2 border-blue-700",children:[(0,t.jsx)("h2",{className:"text-2xl font-bold text-white mb-4",children:"Create New Stretch"}),(0,t.jsxs)("form",{onSubmit:f,className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{className:"text-zinc-300 text-sm font-semibold block mb-2",children:["Stretch Name ",(0,t.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,t.jsx)("input",{type:"text",value:l,onChange:e=>i(e.target.value),placeholder:"e.g., Hamstring Stretch",className:"w-full bg-zinc-900 text-white px-4 py-3 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-600",required:!0,autoFocus:!0})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-zinc-300 text-sm font-semibold block mb-2",children:"Timer (seconds)"}),(0,t.jsx)("input",{type:"number",min:"1",step:"1",value:o,onChange:e=>a(e.target.value),placeholder:"e.g., 30",className:"w-full bg-zinc-900 text-white px-4 py-3 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-600"})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{className:"text-zinc-300 text-sm font-semibold block mb-2",children:["Muscle Groups ",(0,t.jsx)("span",{className:"text-zinc-500",children:"(up to 2)"})]}),(0,t.jsx)("div",{className:"rounded-lg border border-zinc-700 bg-zinc-900 px-3 py-2",children:0===x.length?(0,t.jsx)("span",{className:"text-zinc-500 text-sm",children:"Select muscle groups below"}):(0,t.jsx)("div",{className:"flex flex-wrap gap-2",children:x.map(e=>(0,t.jsxs)("button",{type:"button",onClick:()=>h(t=>t.filter(t=>t!==e)),className:"inline-flex items-center gap-1 rounded-full border border-blue-600/40 bg-blue-700/30 px-3 py-1 text-xs font-semibold text-blue-100 transition hover:border-blue-400 hover:bg-blue-600/60",children:[(0,r.formatTypeLabel)(e),(0,t.jsx)("span",{"aria-hidden":!0,children:"Ã—"})]},e))})}),(0,t.jsxs)("div",{className:"mt-3",children:[(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsxs)("select",{value:"",onChange:e=>{let t=e.target.value;t&&(h(e=>e.includes(t)||e.length>=2?e:[...e,t]),e.currentTarget.value="")},className:"w-full appearance-none bg-zinc-900 text-white px-4 py-2 pr-10 rounded-lg border border-zinc-700 focus:outline-none focus:ring-2 focus:ring-blue-600",children:[(0,t.jsx)("option",{value:"",disabled:!0,children:"Add a muscle group..."}),r.STRETCH_MUSCLE_TAGS.filter(e=>"unknown"!==e).map(e=>(0,t.jsx)("option",{value:e,children:(0,r.formatTypeLabel)(e)},e))]}),(0,t.jsx)("span",{className:"pointer-events-none absolute right-3 top-1/2 -translate-y-1/2 text-zinc-400",children:"â–¾"})]}),(0,t.jsx)("p",{className:"mt-2 text-xs text-zinc-500",children:"Choose up to two muscle groups."})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-zinc-300 text-sm font-semibold block mb-2",children:"Video URL"}),(0,t.jsx)("input",{type:"url",value:c,onChange:e=>u(e.target.value),placeholder:"https://youtube.com/...",className:"w-full bg-zinc-900 text-white px-4 py-3 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-600"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-zinc-300 text-sm font-semibold block mb-2",children:"Tips"}),(0,t.jsx)("textarea",{value:d,onChange:e=>m(e.target.value),placeholder:"Form tips, cues, etc.",rows:3,className:"w-full bg-zinc-900 text-white px-4 py-3 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-600 resize-none"})]}),(0,t.jsx)("p",{className:"text-xs text-zinc-400",children:"Duration, video URL, tips, and muscle groups will be auto-filled with AI if empty."}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-3 pt-2",children:[(0,t.jsx)("button",{type:"button",onClick:n,className:"bg-zinc-700 hover:bg-zinc-600 text-white py-3 rounded-lg font-semibold transition-colors",children:"Cancel"}),(0,t.jsx)("button",{type:"submit",disabled:!l.trim()||b,className:"bg-blue-700 hover:bg-blue-800 disabled:bg-blue-900 disabled:cursor-not-allowed text-white py-3 rounded-lg font-bold transition-colors",children:b?"Creating...":"Create & Select"})]})]})]})})}var l=e.i(85064);let i="other";function o(e){return(0,r.parseTagJson)(e.muscle_groups,r.STRETCH_MUSCLE_TAGS)}function a({onSelect:e,onCancel:a,filterType:c,title:u}){let[d,m]=(0,s.useState)([]),[x,h]=(0,s.useState)(""),[b,g]=(0,s.useState)(!0),[f,p]=(0,s.useState)(!1);(0,s.useEffect)(()=>{v()},[]);let v=async()=>{try{let e=await fetch("/api/stretches"),t=await e.json();m(t.stretches)}catch(e){console.error("Error fetching stretches:",e)}finally{g(!1)}},S=async t=>{try{let s=await fetch("/api/stretches",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!s.ok)throw Error("Failed to create stretch");let r=await s.json();await v();let n=t.muscleGroups?.length?JSON.stringify(t.muscleGroups):null,l={id:r.id,name:t.name,timer_seconds:"number"==typeof r.timer_seconds?r.timer_seconds:null,muscle_groups:n,video_url:t.videoUrl||null,tips:"string"==typeof r.tips?r.tips:t.tips||null};p(!1),e(l)}catch(e){console.error("Error creating stretch:",e),alert("Failed to create stretch. Please try again.")}},N=function(e){let t=new Map;for(let s of[...e].sort((e,t)=>e.name.localeCompare(t.name))){let e=o(s);for(let r of e.length>0?e:[i]){let e=t.get(r);e?e.push(s):t.set(r,[s])}}let s=[...r.STRETCH_MUSCLE_ORDER,i];return Array.from(t.keys()).sort((e,t)=>{let r=s.indexOf(e),n=s.indexOf(t);return -1===r&&-1===n?e.localeCompare(t):-1===r?1:-1===n?-1:r-n}).map(e=>({type:e,stretches:t.get(e)||[]}))}(d.filter(e=>{if(!x)return!0;let t=x.toLowerCase(),s=e.name.toLowerCase(),r=o(e).join(" ").toLowerCase();return s.includes(t)||r.includes(t)}));return f?(0,t.jsx)(n,{onSubmit:S,onCancel:()=>p(!1)}):(0,t.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center p-4 z-50",children:(0,t.jsxs)("div",{className:"bg-zinc-800 rounded-lg p-6 max-w-3xl w-full max-h-[90vh] flex flex-col border-2 border-blue-800",children:[(0,t.jsx)("h2",{className:"text-2xl font-bold text-white mb-4",children:u||("pre_workout"===c?"Select Pre-Workout Stretch":"post_workout"===c?"Select Post-Workout Stretch":"Select Stretch")}),(0,t.jsxs)("div",{className:"mb-4 space-y-3",children:[(0,t.jsx)("input",{type:"text",value:x,onChange:e=>h(e.target.value),placeholder:"Search by name or muscle group...",className:"w-full bg-zinc-900 text-white px-4 py-3 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-700",autoFocus:!0}),(0,t.jsx)("button",{onClick:()=>p(!0),className:"w-full bg-blue-700 hover:bg-blue-800 text-white py-3 rounded-lg font-bold transition-colors",children:"+ Create New Stretch"})]}),(0,t.jsx)("div",{className:"flex-1 overflow-y-auto mb-4 space-y-2",children:b?(0,t.jsx)("div",{className:"text-center text-zinc-400 py-8",children:"Loading stretches..."}):0===N.length?(0,t.jsx)("div",{className:"text-center text-zinc-400 py-8",children:x?"No stretches found":"No stretches available"}):(0,t.jsx)("div",{className:"space-y-4",children:N.map(({type:s,stretches:n})=>(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("div",{className:"text-xs uppercase tracking-wide text-zinc-400",children:(0,r.formatTypeLabel)(s)}),n.map(s=>{let r=o(s);return(0,t.jsx)("button",{onClick:()=>e(s),className:"w-full bg-zinc-900 hover:bg-zinc-700 text-left p-4 rounded-lg transition-colors border-2 border-zinc-700 hover:border-blue-600",children:(0,t.jsx)("div",{className:"flex items-start justify-between",children:(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("div",{className:"text-white font-semibold",children:s.name}),(0,t.jsx)("div",{className:"text-zinc-400 text-sm mt-1",children:(0,l.formatStretchTimer)(s.timer_seconds)}),r.length>0&&(0,t.jsx)("div",{className:"flex flex-wrap gap-1 mt-2",children:r.map((e,s)=>(0,t.jsx)("span",{className:"text-xs bg-zinc-700 text-zinc-300 px-2 py-1 rounded",children:e},s))})]})})},s.id)})]},s))})}),(0,t.jsx)("button",{onClick:a,className:"w-full bg-zinc-700 hover:bg-zinc-600 text-white py-3 rounded-lg font-semibold transition-colors",children:"Cancel"})]})})}e.s(["default",()=>a],96388)},21140,e=>{"use strict";var t=e.i(62376);function s(e,t){window.dispatchEvent(new CustomEvent("workout-autosave",{detail:{status:e,eventType:t,at:Date.now()}}))}async function r(e){let r=(0,t.getWorkoutSession)();if(r){s("saving",e.type);try{let n=await fetch("/api/workout-autosave",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({sessionId:r.sessionId??null,workoutName:r.workoutName,routineId:r.routineId??null,startTime:r.startTime,event:e})});if(!n.ok)return void s("error",e.type);let l=await n.json();"number"==typeof l?.sessionId&&(0,t.setWorkoutSessionId)(l.sessionId),s("success",e.type)}catch(t){console.error("Autosave failed:",t),s("error",e.type)}}}e.s(["autosaveWorkout",()=>r])},59462,1983,e=>{"use strict";var t=e.i(43476),s=e.i(18566),r=e.i(22016);function n({exitUrl:e,previousUrl:n,onPrevious:l,skipUrl:i,skipLabel:o="Skip",onSkip:a,nextLabel:c="Next",onNext:u}){let d=(0,s.useRouter)(),m=!!n||!!l,x=i||a,h=!!u;return(0,t.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsx)(r.default,{href:e,className:"text-red-400 hover:text-red-300 font-medium",children:"Exit"}),(0,t.jsx)("button",{onClick:()=>{l?l():n&&d.push(n)},disabled:!m,className:`font-medium ${m?"text-blue-400 hover:text-blue-300":"text-zinc-600 cursor-not-allowed"}`,children:"â† Previous"})]}),h?(0,t.jsxs)("button",{onClick:u,className:"text-blue-400 hover:text-blue-300 font-medium",children:[c," â†’"]}):x?(0,t.jsxs)("button",{onClick:()=>{a?a():i&&d.push(i)},className:"text-zinc-400 hover:text-zinc-300",children:[o," â†’"]}):null]})}e.s(["default",()=>n],59462);var l=e.i(71645);function i({className:e=""}){let[s,r]=(0,l.useState)({status:"idle"});(0,l.useEffect)(()=>{let e=e=>{let t=e.detail;t&&r({...t})};return window.addEventListener("workout-autosave",e),()=>window.removeEventListener("workout-autosave",e)},[]);let n=(0,l.useMemo)(()=>s.at?new Date(s.at).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit"}):"",[s.at]),{label:i,badgeClass:o}=(0,l.useMemo)(()=>{switch(s.status){case"saving":return{label:"Autosave: savingâ€¦",badgeClass:"text-amber-300 border-amber-500/40"};case"success":return{label:`Autosave: saved ${n}`,badgeClass:"text-emerald-300 border-emerald-500/40"};case"error":return{label:`Autosave: failed ${n}`,badgeClass:"text-red-300 border-red-500/40"};default:return{label:"Autosave: idle",badgeClass:"text-zinc-400 border-zinc-600/40"}}},[s.status,n]);return(0,t.jsx)("div",{className:`rounded-full border px-3 py-1 text-xs font-semibold ${o} ${e}`,"aria-live":"polite",children:i})}e.s(["default",()=>i],1983)},18566,(e,t,s)=>{t.exports=e.r(76562)},71829,e=>{"use strict";let t={progress:"progress",maintenance:"maintenance",light:"light"},s={[t.progress]:"Progress",[t.maintenance]:"Maintenance",[t.light]:"Light"},r={[t.progress]:"Push for small, steady improvements.",[t.maintenance]:"Hold steady and focus on form.",[t.light]:"Easy effort today."};e.s(["EXERCISE_HISTORY_AGGREGATION_MODES",0,{max:"max",avg:"avg"},"EXERCISE_HISTORY_DISPLAY_MODES",0,{weight:"weight",reps:"reps"},"EXERCISE_PRIMARY_METRICS",0,{weight:"weight",height:"height",time:"time",distance:"distance",repsOnly:"reps_only"},"EXERCISE_TYPES",0,{single:"single",b2b:"b2b",circuit:"circuit"},"SESSION_MODES",0,t,"SESSION_MODE_DESCRIPTIONS",0,r,"SESSION_MODE_LABELS",0,s])},62376,e=>{"use strict";var t=e.i(71829);let s="current_workout_session";function r(e){return e===t.SESSION_MODES.progress||e===t.SESSION_MODES.maintenance||e===t.SESSION_MODES.light}function n(e,s=t.SESSION_MODES.progress){return r(e)?e:s}function l(e,t){let r={workoutName:e,routineId:t??null,sessionId:null,startTime:new Date().toISOString(),exercises:[]};localStorage.setItem(s,JSON.stringify(r))}function i(e,t){let s=o(),r=t??null;s?(s.workoutName!==e||(s.routineId??null)!==r)&&l(e,r):l(e,r)}function o(){let e=localStorage.getItem(s);if(!e)return null;let t=JSON.parse(e),r=t.routineId,n="number"==typeof r?r:Number(r);t.routineId=Number.isFinite(n)?n:null;let l=t.sessionId,i="number"==typeof l?l:Number(l);return t.sessionId=Number.isFinite(i)?i:null,t}function a(e){let t=o();t&&t.sessionId!==e&&(t.sessionId=e,localStorage.setItem(s,JSON.stringify(t)))}function c(e){let t=o();t&&(t.exercises.push(e),localStorage.setItem(s,JSON.stringify(t)))}function u(e){let t=o();t&&(t.cardio=e,localStorage.setItem(s,JSON.stringify(t)))}function d(){localStorage.removeItem(s)}e.s(["addCardioToSession",()=>u,"addExerciseToSession",()=>c,"clearWorkoutSession",()=>d,"ensureWorkoutSession",()=>i,"getWorkoutSession",()=>o,"initWorkoutSession",()=>l,"isSessionMode",()=>r,"resolveSessionMode",()=>n,"setWorkoutSessionId",()=>a])},5907,e=>{"use strict";let t="session_workout_override",s="session_workout_change_ack",r="session_workout_targets_meta";function n(e,t,s){let r=encodeURIComponent(t),n=s?encodeURIComponent(s):"default";return`${e}:${r}:${n}`}function l(e,s){let r=n(t,e,s),l=sessionStorage.getItem(r);if(!l)return null;try{return JSON.parse(l)}catch(e){return console.error("Failed to parse session workout override:",e),null}}function i(e,s){let r=n(t,e.name,s);sessionStorage.setItem(r,JSON.stringify(e))}function o(e,t){let s=n(r,e,t),l=sessionStorage.getItem(s);if(!l)return null;try{return JSON.parse(l)}catch(e){return console.error("Failed to parse session targets meta:",e),null}}function a(e,t,s){let l=n(r,e,t);s?sessionStorage.setItem(l,JSON.stringify(s)):sessionStorage.removeItem(l)}function c(e,t){let r=n(s,e,t);return"1"===sessionStorage.getItem(r)}function u(e,t){let r=n(s,e,t);sessionStorage.setItem(r,"1")}e.s(["acknowledgeChangeWarning",()=>u,"hasChangeWarningAck",()=>c,"loadSessionTargetsMeta",()=>o,"loadSessionWorkout",()=>l,"saveSessionTargetsMeta",()=>a,"saveSessionWorkout",()=>i])},25415,e=>{"use strict";let t="No form tips yet.";function s(e){if("string"!=typeof e)return t;let s=e.trim();return s.length>0?s:t}function r(e,t){if("string"==typeof t&&t.trim().length>0)return t.trim();let s="string"==typeof e&&e.trim().length>0?e.trim():"exercise",r=`${s} form`;return`https://www.youtube.com/results?search_query=${encodeURIComponent(r)}`}e.s(["getFormTips",()=>s,"getVideoUrl",()=>r])},67664,81801,47009,e=>{"use strict";var t=e.i(43476),s=e.i(71645);function r({timerSeconds:e,onComplete:s}){return!e||e<=0?null:(0,t.jsx)(n,{timerSeconds:e,onComplete:s})}function n({timerSeconds:e,onComplete:r}){let n,[l,i]=(0,s.useState)(e),[o,a]=(0,s.useState)(!1),[c,u]=(0,s.useState)(!1),d=(0,s.useRef)(null),m=(0,s.useRef)(!1);(0,s.useEffect)(()=>{i(e),a(!1),u(!1),d.current=null,m.current=!1},[e]);let x=(0,s.useCallback)(()=>{if(!d.current)return;let e=Math.max(0,Math.ceil((d.current-Date.now())/1e3));i(e),0===e&&(a(!1),m.current||(m.current=!0,r?.()))},[r]);(0,s.useEffect)(()=>{if(!o)return;x();let e=setInterval(x,250);return()=>clearInterval(e)},[o,x]),(0,s.useEffect)(()=>{let e=()=>{"visible"===document.visibilityState&&x()},t=()=>{x()};return document.addEventListener("visibilitychange",e),window.addEventListener("focus",t),()=>{document.removeEventListener("visibilitychange",e),window.removeEventListener("focus",t)}},[x]);let h=(0,s.useCallback)(()=>{let t=0===l?e:l;t<=0||(0===l&&i(t),m.current=!1,d.current=Date.now()+1e3*t,a(!0),u(!0))},[l,e]),b=(0,s.useCallback)(()=>{d.current&&i(Math.max(0,Math.ceil((d.current-Date.now())/1e3))),d.current=null,a(!1)},[]),g=(0,s.useCallback)(()=>{a(!1),i(e),u(!1),d.current=null,m.current=!1},[e]);return(0,t.jsxs)("div",{className:"bg-zinc-900 rounded-lg p-4 mb-4",children:[(0,t.jsxs)("div",{className:"text-center mb-4",children:[(0,t.jsx)("div",{className:`text-5xl font-bold font-mono ${l<=5&&o?"text-red-500 animate-pulse":"text-white"}`,children:(n=Math.floor(l/60),`${n}:${(l%60).toString().padStart(2,"0")}`)}),0===l&&c&&(0,t.jsx)("div",{className:"text-blue-300 text-lg font-semibold mt-2",children:"Complete!"})]}),(0,t.jsxs)("div",{className:"flex gap-3 justify-center",children:[o?(0,t.jsxs)("button",{onClick:b,className:"bg-yellow-600 hover:bg-yellow-700 text-white px-6 py-3 rounded-lg font-semibold transition-colors flex items-center gap-2",children:[(0,t.jsx)("span",{className:"text-xl",children:"â¸"}),"Pause"]}):(0,t.jsxs)("button",{onClick:h,className:"bg-blue-800 hover:bg-blue-700 text-white px-6 py-3 rounded-lg font-semibold transition-colors flex items-center gap-2",children:[(0,t.jsx)("span",{className:"text-xl",children:"â–¶"}),c&&l>0?"Resume":0===l?"Restart":"Start Timer"]}),c&&(0,t.jsx)("button",{onClick:g,className:"bg-zinc-700 hover:bg-zinc-600 text-white px-4 py-3 rounded-lg font-semibold transition-colors",children:"Reset"})]})]})}var l=e.i(85064),i=e.i(25415);function o({stretch:e,timerKey:s=0,variant:n="pre"}){let o=(0,i.getFormTips)(e.tips),a=(0,i.getVideoUrl)(e.name,e.videoUrl),c=e.timerSeconds||0,u=(0,l.formatStretchTimer)(c);return(0,t.jsxs)("div",{className:"bg-zinc-800 rounded-lg p-8 border-2 border-blue-800 mb-8",children:[(0,t.jsxs)("div",{className:"text-center mb-6",children:[(0,t.jsx)("div",{className:"text-6xl mb-4",children:"pre"===n?"ðŸƒ":"ðŸ§˜"}),(0,t.jsx)("h2",{className:"text-3xl font-bold text-white mb-4",children:e.name}),(0,t.jsx)("div",{className:"text-xl text-blue-300 font-semibold mb-4",children:u})]}),(0,t.jsx)(r,{timerSeconds:c},s),(0,t.jsxs)("div",{className:"bg-zinc-900 rounded-lg p-4 mb-6",children:[(0,t.jsx)("div",{className:"text-zinc-400 text-sm mb-2",children:"Tips:"}),(0,t.jsx)("p",{className:"text-zinc-200 text-lg leading-relaxed",children:o})]}),(0,t.jsx)("a",{href:a,target:"_blank",rel:"noopener noreferrer",className:"block w-full bg-red-600 hover:bg-red-700 text-white text-center py-3 rounded-lg text-lg font-semibold transition-colors",children:"ðŸ“º Watch Video"})]})}function a(){return(0,t.jsx)("div",{className:"min-h-screen bg-zinc-900 flex items-center justify-center p-4",children:(0,t.jsx)("div",{className:"text-white text-2xl",children:"Loading..."})})}e.s(["default",()=>o],67664),e.s(["default",()=>a],81801);var c=e.i(22016);function u({message:e="Something went wrong",backUrl:s="/routines",backText:r="Back to routines"}){return(0,t.jsx)("div",{className:"min-h-screen bg-zinc-900 flex items-center justify-center p-4",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"text-white text-2xl mb-4",children:e}),(0,t.jsx)(c.default,{href:s,className:"text-blue-400 hover:text-blue-300",children:r})]})})}e.s(["default",()=>u],47009)},2073,e=>{"use strict";var t=e.i(43476),s=e.i(71645),r=e.i(18566),n=e.i(59462),l=e.i(67664),i=e.i(96388),o=e.i(81801),a=e.i(47009),c=e.i(1983),u=e.i(5907),d=e.i(21140);function m(){let e=(0,r.useParams)(),m=(0,r.useRouter)(),x=(0,r.useSearchParams)(),[h,b]=(0,s.useState)(null),[g,f]=(0,s.useState)(0),[p,v]=(0,s.useState)(!0),[S,N]=(0,s.useState)(!1),[w,j]=(0,s.useState)(null),[y,k]=(0,s.useState)(!1),C=(0,s.useRef)(null),E=x.get("routineId"),z=new URLSearchParams;E&&z.set("routineId",E);let I=z.toString()?`?${z.toString()}`:"";if((0,s.useEffect)(()=>{!async function(){try{let t=`/api/workout/${e.name}`;E&&(t+=`?routineId=${E}`);let s=await fetch(t);if(!s.ok)throw Error("Workout not found");let r=(await s.json()).workout,n=(0,u.loadSessionWorkout)(r.name,E)||r;b(n);let l=x.get("index");if(l){let e=parseInt(l,10),t=n.postWorkoutStretches?.length||0;!isNaN(e)&&e>=0&&e<t&&f(e)}}catch(e){console.error("Error fetching workout:",e)}finally{v(!1)}}()},[e.name,x,E]),p)return(0,t.jsx)(o.default,{});if(!h)return(0,t.jsx)(a.default,{message:"Workout not found"});let T=h.postWorkoutStretches||[],_=encodeURIComponent(h.name),O=()=>{(0,u.acknowledgeChangeWarning)(h.name,E),k(!1);let e=C.current;C.current=null,e?.()},R=()=>{C.current=null,k(!1)},M=e=>{var t;t=()=>{j(e),N(!0)},(0,u.hasChangeWarningAck)(h.name,E)?t():(C.current=t,k(!0))},L=e=>{if(!w)return;let t={name:e.name,timerSeconds:e.timer_seconds??0,videoUrl:e.video_url||"",tips:e.tips||""},s=[...T],r=Math.min(g+1,s.length);"add"===w?s.splice(r,0,t):s[g]=t;let n={...h,postWorkoutStretches:s};b(n),(0,u.saveSessionWorkout)(n,E),j(null),N(!1)};if(0===T.length)return(0,t.jsxs)("div",{className:"min-h-screen bg-zinc-900 flex flex-col items-center justify-center p-4",children:[(0,t.jsx)("div",{className:"text-white text-2xl mb-4",children:"No post-workout stretches"}),(0,t.jsxs)("div",{className:"w-full max-w-xs space-y-3",children:[(0,t.jsx)("button",{onClick:()=>M("add"),className:"w-full bg-blue-800 hover:bg-blue-700 text-white px-6 py-3 rounded-lg text-base font-semibold transition-colors",children:"+ Add Stretch"}),(0,t.jsx)("button",{onClick:()=>m.push(`/workout/${_}/summary${I}`),className:"w-full bg-blue-800 hover:bg-blue-700 text-white px-6 py-3 rounded-lg text-base font-semibold transition-colors",children:"View Summary â†’"})]}),y&&(0,t.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 p-4",children:(0,t.jsxs)("div",{className:"w-full max-w-md rounded-lg border border-zinc-700 bg-zinc-900 p-6 text-white",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"Session-only change"}),(0,t.jsx)("p",{className:"text-sm text-zinc-300 mb-6",children:"This edit only applies to today's workout. Edit the routine to make a permanent change."}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,t.jsx)("button",{onClick:R,className:"rounded-lg bg-zinc-700 py-2 text-sm font-semibold text-white hover:bg-zinc-600",children:"Cancel"}),(0,t.jsx)("button",{onClick:O,className:"rounded-lg bg-blue-800 py-2 text-sm font-semibold text-white hover:bg-blue-700",children:"Continue"})]})]})}),S&&(0,t.jsx)(i.default,{title:"Add Stretch",filterType:"post_workout",onCancel:()=>{N(!1),j(null)},onSelect:L})]});let $=T[g],U=(h.preWorkoutStretches||[]).length,A=T.length,W=U+h.exercises.length+1+A,P=U+h.exercises.length+1+g+1,D=P/W*100,J=()=>{g>0?f(g-1):m.push(`/workout/${_}/cardio${I}`)};return(0,t.jsx)("div",{className:"min-h-screen bg-zinc-900 p-4",children:(0,t.jsxs)("div",{className:"max-w-2xl mx-auto",children:[(0,t.jsx)(n.default,{exitUrl:`/workout/${_}${I}`,previousUrl:null,onPrevious:J,skipLabel:"Skip All",onSkip:()=>{m.push(`/workout/${_}/summary${I}`)}}),(0,t.jsx)("div",{className:"flex justify-end mb-4",children:(0,t.jsx)(c.default,{})}),(0,t.jsxs)("div",{className:"text-center mb-4",children:[(0,t.jsx)("h1",{className:"text-2xl font-bold text-white mb-2",children:"POST-WORKOUT STRETCH"}),(0,t.jsxs)("div",{className:"text-zinc-400 text-lg",children:[g+1," of ",T.length]})]}),(0,t.jsxs)("div",{className:"mb-8",children:[(0,t.jsx)("div",{className:"h-2 bg-zinc-800 rounded-full overflow-hidden",children:(0,t.jsx)("div",{className:"h-full bg-blue-700 transition-all duration-300",style:{width:`${D}%`}})}),(0,t.jsxs)("div",{className:"text-zinc-500 text-sm text-center mt-2",children:["Overall Progress: ",P," / ",W]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-3 mb-6",children:[(0,t.jsx)("button",{onClick:()=>M("add"),className:"bg-blue-900/80 hover:bg-blue-800 text-white py-2 rounded-lg text-sm font-semibold transition-colors",children:"+ Add Stretch"}),(0,t.jsx)("button",{onClick:()=>M("replace"),className:"bg-blue-900/80 hover:bg-blue-800 text-white py-2 rounded-lg text-sm font-semibold transition-colors",children:"â†º Replace Stretch"})]}),(0,t.jsx)(l.default,{stretch:$,timerKey:g,variant:"post"}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsx)("button",{onClick:J,className:"bg-zinc-700 hover:bg-zinc-600 text-white py-4 rounded-lg text-lg font-semibold transition-colors",children:"â† Previous"}),(0,t.jsx)("button",{onClick:()=>{(0,d.autosaveWorkout)({type:"stretch",phase:"post",index:g}),g<T.length-1?f(g+1):m.push(`/workout/${_}/summary${I}`)},className:"bg-blue-800 hover:bg-blue-700 text-white py-4 rounded-lg text-lg font-semibold transition-colors",children:g<T.length-1?"Next Stretch â†’":"View Summary â†’"})]}),y&&(0,t.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 p-4",children:(0,t.jsxs)("div",{className:"w-full max-w-md rounded-lg border border-zinc-700 bg-zinc-900 p-6 text-white",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"Session-only change"}),(0,t.jsx)("p",{className:"text-sm text-zinc-300 mb-6",children:"This edit only applies to today's workout. Edit the routine to make a permanent change."}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,t.jsx)("button",{onClick:R,className:"rounded-lg bg-zinc-700 py-2 text-sm font-semibold text-white hover:bg-zinc-600",children:"Cancel"}),(0,t.jsx)("button",{onClick:O,className:"rounded-lg bg-blue-800 py-2 text-sm font-semibold text-white hover:bg-blue-700",children:"Continue"})]})]})}),S&&(0,t.jsx)(i.default,{title:"replace"===w?"Replace Stretch":"Add Stretch",filterType:"post_workout",onCancel:()=>{N(!1),j(null)},onSelect:L})]})})}function x(){return(0,t.jsx)(s.Suspense,{fallback:(0,t.jsx)(o.default,{}),children:(0,t.jsx)(m,{})})}e.s(["default",()=>x])}]);