(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,49448,e=>{"use strict";var t=e.i(43476);function s({children:e,className:s="",paddingClassName:r,borderClassName:i="border-zinc-700",borderWidthClassName:n="border-2"}){return(0,t.jsx)("div",{className:`bg-zinc-800 rounded-lg ${n} ${i} ${r||"p-4"} ${s}`.trim(),children:e})}function r({message:e,description:s,className:r=""}){return(0,t.jsxs)("div",{className:`text-zinc-500 text-center py-4 bg-zinc-800 rounded-lg ${r}`.trim(),children:[(0,t.jsx)("div",{children:e}),s&&(0,t.jsx)("div",{className:"text-zinc-600 text-sm mt-1",children:s})]})}function i({children:e,maxWidthClassName:s="max-w-2xl",className:r=""}){return(0,t.jsx)("div",{className:`fixed bottom-0 left-0 right-0 p-4 bg-zinc-900 border-t border-zinc-800 ${r}`.trim(),children:(0,t.jsx)("div",{className:`${s} mx-auto`,children:e})})}function n({icon:e,label:s,iconClassName:r="text-zinc-400",className:i=""}){return(0,t.jsxs)("h2",{className:`text-xl font-bold text-white mb-4 flex items-center gap-2 ${i}`.trim(),children:[(0,t.jsx)("span",{className:r,children:e}),s]})}e.s(["BottomActionBar",()=>i,"Card",()=>s,"EmptyState",()=>r,"SectionHeader",()=>n])},18566,(e,t,s)=>{t.exports=e.r(76562)},71829,e=>{"use strict";let t={progress:"progress",maintenance:"maintenance",light:"light"},s={[t.progress]:"Progress",[t.maintenance]:"Maintenance",[t.light]:"Light"},r={[t.progress]:"Push for small, steady improvements.",[t.maintenance]:"Hold steady and focus on form.",[t.light]:"Easy effort today."};e.s(["EXERCISE_HISTORY_AGGREGATION_MODES",0,{max:"max",avg:"avg"},"EXERCISE_HISTORY_DISPLAY_MODES",0,{weight:"weight",reps:"reps"},"EXERCISE_PRIMARY_METRICS",0,{weight:"weight",height:"height",time:"time",distance:"distance",repsOnly:"reps_only"},"EXERCISE_TYPES",0,{single:"single",b2b:"b2b",circuit:"circuit"},"SESSION_MODES",0,t,"SESSION_MODE_DESCRIPTIONS",0,r,"SESSION_MODE_LABELS",0,s])},78806,e=>{"use strict";let t=["lower body compound","upper body compound","full body compound","chest","back","shoulders","biceps","triceps","forearms","core","lower back","glutes","quads","hamstrings","calves","hip flexors","adductors","abductors","unknown"],s=[...t],r=[...t],i=[...s];function n(e,t,s=2){if(!e)return[];try{let r=JSON.parse(e);return function(e,t,s=2){let r=Array.isArray(e)?e:"string"==typeof e?[e]:[];if(0===r.length)return[];let i=r.map(e=>"string"==typeof e?e.trim().toLowerCase():"").filter(Boolean),n=t?i.filter(e=>t.includes(e)):i,l=[];for(let e of n)if(l.includes(e)||l.push(e),l.length>=s)break;return l}(r,t,s)}catch{return[]}}function l(e){return e.split(" ").map(e=>e?e[0].toUpperCase()+e.slice(1):e).join(" ")}e.s(["MUSCLE_GROUP_ORDER",0,r,"MUSCLE_GROUP_TAGS",0,t,"STRETCH_MUSCLE_ORDER",0,i,"STRETCH_MUSCLE_TAGS",0,s,"formatTypeLabel",()=>l,"parseTagJson",()=>n])},90408,2519,e=>{"use strict";var t=e.i(43476),s=e.i(71645),r=e.i(71829);function i({onSubmit:e,onCancel:i}){let[n,l]=(0,s.useState)(""),[a,o]=(0,s.useState)(""),[c,d]=(0,s.useState)(""),[u,x]=(0,s.useState)(""),[m,h]=(0,s.useState)(r.EXERCISE_PRIMARY_METRICS.weight),[p,g]=(0,s.useState)("sec"),[b,f]=(0,s.useState)(!1),j=async t=>{if(t.preventDefault(),n.trim()){f(!0);try{await e({name:n.trim(),videoUrl:a.trim()||void 0,tips:c.trim()||void 0,equipment:u||void 0,primaryMetric:m,metricUnit:m===r.EXERCISE_PRIMARY_METRICS.time||m===r.EXERCISE_PRIMARY_METRICS.distance?p.trim():void 0})}finally{f(!1)}}};return(0,t.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center p-4 z-50",children:(0,t.jsxs)("div",{className:"bg-zinc-800 rounded-lg p-6 max-w-md w-full border-2 border-green-600",children:[(0,t.jsx)("h2",{className:"text-2xl font-bold text-white mb-4",children:"Create New Exercise"}),(0,t.jsxs)("form",{onSubmit:j,className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{className:"text-zinc-300 text-sm font-semibold block mb-2",children:["Exercise Name ",(0,t.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,t.jsx)("input",{type:"text",value:n,onChange:e=>l(e.target.value),placeholder:"e.g., Barbell Bench Press",className:"w-full bg-zinc-900 text-white px-4 py-3 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500",required:!0,autoFocus:!0})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-zinc-300 text-sm font-semibold block mb-2",children:"Equipment"}),(0,t.jsxs)("select",{value:u,onChange:e=>x(e.target.value),className:"w-full bg-zinc-900 text-white px-4 py-3 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 appearance-none cursor-pointer",style:{backgroundImage:"url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3E%3Cpath stroke='%23ffffff' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='M6 8l4 4 4-4'/%3E%3C/svg%3E\")",backgroundPosition:"right 0.5rem center",backgroundRepeat:"no-repeat",backgroundSize:"1.5em 1.5em",paddingRight:"2.5rem"},children:[(0,t.jsx)("option",{value:"",children:"Select equipment (optional)"}),(0,t.jsx)("option",{value:"Barbell",children:"Barbell"}),(0,t.jsx)("option",{value:"Dumbbells",children:"Dumbbells"}),(0,t.jsx)("option",{value:"Bodyweight",children:"Bodyweight"}),(0,t.jsx)("option",{value:"Machine",children:"Machine"}),(0,t.jsx)("option",{value:"Cable",children:"Cable"}),(0,t.jsx)("option",{value:"Bands",children:"Bands"}),(0,t.jsx)("option",{value:"Other",children:"Other"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-zinc-300 text-sm font-semibold block mb-2",children:"Tracking Metric"}),(0,t.jsxs)("select",{value:m,onChange:e=>{let t=e.target.value;h(t),t===r.EXERCISE_PRIMARY_METRICS.time?g("sec"):t===r.EXERCISE_PRIMARY_METRICS.distance&&g("m")},className:"w-full bg-zinc-900 text-white px-4 py-3 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 appearance-none cursor-pointer",style:{backgroundImage:"url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3E%3Cpath stroke='%23ffffff' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='M6 8l4 4 4-4'/%3E%3C/svg%3E\")",backgroundPosition:"right 0.5rem center",backgroundRepeat:"no-repeat",backgroundSize:"1.5em 1.5em",paddingRight:"2.5rem"},children:[(0,t.jsx)("option",{value:r.EXERCISE_PRIMARY_METRICS.weight,children:"Weight"}),(0,t.jsx)("option",{value:r.EXERCISE_PRIMARY_METRICS.height,children:"Height"}),(0,t.jsx)("option",{value:r.EXERCISE_PRIMARY_METRICS.time,children:"Time"}),(0,t.jsx)("option",{value:r.EXERCISE_PRIMARY_METRICS.distance,children:"Distance"}),(0,t.jsx)("option",{value:r.EXERCISE_PRIMARY_METRICS.repsOnly,children:"Reps only"})]}),m===r.EXERCISE_PRIMARY_METRICS.height&&(0,t.jsx)("p",{className:"text-zinc-500 text-xs mt-2",children:"Uses your profile height unit (in or cm)."})]}),(m===r.EXERCISE_PRIMARY_METRICS.time||m===r.EXERCISE_PRIMARY_METRICS.distance)&&(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-zinc-300 text-sm font-semibold block mb-2",children:"Unit"}),(0,t.jsx)("select",{value:p,onChange:e=>g(e.target.value),className:"w-full bg-zinc-900 text-white px-4 py-3 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 appearance-none cursor-pointer",style:{backgroundImage:"url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3E%3Cpath stroke='%23ffffff' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='M6 8l4 4 4-4'/%3E%3C/svg%3E\")",backgroundPosition:"right 0.5rem center",backgroundRepeat:"no-repeat",backgroundSize:"1.5em 1.5em",paddingRight:"2.5rem"},children:m===r.EXERCISE_PRIMARY_METRICS.time?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("option",{value:"sec",children:"sec"}),(0,t.jsx)("option",{value:"min",children:"min"})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("option",{value:"m",children:"m"}),(0,t.jsx)("option",{value:"km",children:"km"}),(0,t.jsx)("option",{value:"yd",children:"yd"}),(0,t.jsx)("option",{value:"mi",children:"mi"})]})})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-zinc-300 text-sm font-semibold block mb-2",children:"Video URL"}),(0,t.jsxs)("p",{className:"text-zinc-500 text-xs mb-2",children:['If left empty, will default to YouTube search for "',n||"exercise name",'"']}),(0,t.jsx)("input",{type:"url",value:a,onChange:e=>o(e.target.value),placeholder:"https://youtube.com/...",className:"w-full bg-zinc-900 text-white px-4 py-3 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-zinc-300 text-sm font-semibold block mb-2",children:"Tips"}),(0,t.jsx)("textarea",{value:c,onChange:e=>d(e.target.value),placeholder:"Form tips, cues, etc.",rows:3,className:"w-full bg-zinc-900 text-white px-4 py-3 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 resize-none"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-3 pt-2",children:[(0,t.jsx)("button",{type:"button",onClick:i,className:"bg-zinc-700 hover:bg-zinc-600 text-white py-3 rounded-lg font-semibold transition-colors",children:"Cancel"}),(0,t.jsx)("button",{type:"submit",disabled:!n.trim()||b,className:"bg-green-600 hover:bg-green-700 disabled:bg-green-800 disabled:cursor-not-allowed text-white py-3 rounded-lg font-bold transition-colors",children:b?"Creating...":"Create & Select"})]})]})]})})}var n=e.i(78806);let l="other";function a(e){return(0,n.parseTagJson)(e.muscle_groups,n.MUSCLE_GROUP_TAGS)}function o({onSelect:e,onCancel:r,title:o}){let[c,d]=(0,s.useState)([]),[u,x]=(0,s.useState)(""),[m,h]=(0,s.useState)(!0),[p,g]=(0,s.useState)(!1);(0,s.useEffect)(()=>{b()},[]);let b=async()=>{try{let e=await fetch("/api/exercises"),t=await e.json();d(t.exercises)}catch(e){console.error("Error fetching exercises:",e)}finally{h(!1)}},f=async t=>{try{let s=await fetch("/api/exercises",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!s.ok)throw Error("Failed to create exercise");let r=await s.json();await b();let i=c.find(e=>e.id===r.id)||{id:r.id,name:t.name,video_url:t.videoUrl||null,tips:t.tips||null,equipment:t.equipment||null,is_bodyweight:"number"==typeof r.is_bodyweight?r.is_bodyweight:null,primary_metric:"string"==typeof r.primary_metric?r.primary_metric:null,metric_unit:"string"==typeof r.metric_unit?r.metric_unit:null};e(i)}catch(e){console.error("Error creating exercise:",e),alert("Failed to create exercise. Please try again.")}},j=function(e){let t=new Map;for(let s of[...e].sort((e,t)=>e.name.localeCompare(t.name))){let e=a(s);for(let r of e.length>0?e:[l]){let e=t.get(r);e?e.push(s):t.set(r,[s])}}let s=[...n.MUSCLE_GROUP_ORDER,l];return Array.from(t.keys()).sort((e,t)=>{let r=s.indexOf(e),i=s.indexOf(t);return -1===r&&-1===i?e.localeCompare(t):-1===r?1:-1===i?-1:r-i}).map(e=>({type:e,exercises:t.get(e)||[]}))}(c.filter(e=>{if(!u)return!0;let t=u.toLowerCase(),s=a(e).join(" ").toLowerCase();return e.name.toLowerCase().includes(t)||s.includes(t)}));return p?(0,t.jsx)(i,{onSubmit:f,onCancel:()=>g(!1)}):(0,t.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center p-4 z-50",children:(0,t.jsxs)("div",{className:"bg-zinc-800 rounded-lg p-6 max-w-3xl w-full max-h-[90vh] flex flex-col border-2 border-blue-600",children:[(0,t.jsx)("h2",{className:"text-2xl font-bold text-white mb-4",children:o||"Select Exercise"}),(0,t.jsxs)("div",{className:"mb-4 space-y-3",children:[(0,t.jsx)("input",{type:"text",value:u,onChange:e=>x(e.target.value),placeholder:"Search exercises or muscle groups...",className:"w-full bg-zinc-900 text-white px-4 py-3 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",autoFocus:!0}),(0,t.jsx)("button",{onClick:()=>g(!0),className:"w-full bg-green-600 hover:bg-green-700 text-white py-3 rounded-lg font-bold transition-colors",children:"+ Create New Exercise"})]}),(0,t.jsx)("div",{className:"flex-1 overflow-y-auto mb-4 space-y-2",children:m?(0,t.jsx)("div",{className:"text-center text-zinc-400 py-8",children:"Loading exercises..."}):0===j.length?(0,t.jsx)("div",{className:"text-center text-zinc-400 py-8",children:u?"No exercises found":"No exercises available"}):(0,t.jsx)("div",{className:"space-y-4",children:j.map(({type:s,exercises:r})=>(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("div",{className:"text-xs uppercase tracking-wide text-zinc-400",children:(0,n.formatTypeLabel)(s)}),r.map(s=>(0,t.jsx)("button",{onClick:()=>e(s),className:"w-full bg-zinc-900 hover:bg-zinc-700 text-left p-4 rounded-lg transition-colors border-2 border-zinc-700 hover:border-blue-500",children:(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-white font-semibold",children:s.name}),s.equipment&&(0,t.jsx)("div",{className:"text-zinc-400 text-sm mt-1",children:s.equipment})]})},s.id))]},s))})}),(0,t.jsx)("button",{onClick:r,className:"w-full bg-zinc-700 hover:bg-zinc-600 text-white py-3 rounded-lg font-semibold transition-colors",children:"Cancel"})]})})}e.s(["default",()=>o],90408);let c="other";function d(e){return(0,n.parseTagJson)(e.muscle_groups,n.MUSCLE_GROUP_TAGS)}function u(e){let t=new Map;for(let s of[...e].sort((e,t)=>e.name.localeCompare(t.name))){let e=d(s);for(let r of e.length>0?e:[c]){let e=t.get(r);e?e.push(s):t.set(r,[s])}}let s=[...n.MUSCLE_GROUP_ORDER,c];return Array.from(t.keys()).sort((e,t)=>{let r=s.indexOf(e),i=s.indexOf(t);return -1===r&&-1===i?e.localeCompare(t):-1===r?1:-1===i?-1:r-i}).map(e=>({type:e,exercises:t.get(e)||[]}))}function x({onSelect:e,onCancel:r}){let[l,a]=(0,s.useState)([]),[o,c]=(0,s.useState)(""),[x,m]=(0,s.useState)(""),[h,p]=(0,s.useState)(!0),[g,b]=(0,s.useState)(null),[f,j]=(0,s.useState)(null),[v,y]=(0,s.useState)(!1),[w,E]=(0,s.useState)(null);(0,s.useEffect)(()=>{N()},[]);let N=async()=>{try{let e=await fetch("/api/exercises"),t=await e.json();a(t.exercises)}catch(e){console.error("Error fetching exercises:",e)}finally{p(!1)}},S=async e=>{try{let t=await fetch("/api/exercises",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw Error("Failed to create exercise");let s=await t.json();await N();let r={id:s.id,name:e.name,video_url:e.videoUrl||null,tips:e.tips||null,equipment:e.equipment||null,primary_metric:"string"==typeof s.primary_metric?s.primary_metric:null,metric_unit:"string"==typeof s.metric_unit?s.metric_unit:null};"exercise1"===w?(b(r),c("")):"exercise2"===w&&(j(r),m("")),y(!1),E(null)}catch(e){console.error("Error creating exercise:",e),alert("Failed to create exercise. Please try again.")}},C=l.filter(e=>{if(!o)return!0;let t=o.toLowerCase(),s=d(e).join(" ").toLowerCase();return e.name.toLowerCase().includes(t)||s.includes(t)}),R=l.filter(e=>{if(!x)return!0;let t=x.toLowerCase(),s=d(e).join(" ").toLowerCase();return e.name.toLowerCase().includes(t)||s.includes(t)}),_=u(C),z=u(R);return v?(0,t.jsx)(i,{onSubmit:S,onCancel:()=>{y(!1),E(null)}}):(0,t.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center p-4 z-50",children:(0,t.jsxs)("div",{className:"bg-zinc-800 rounded-lg p-6 max-w-4xl w-full max-h-[90vh] flex flex-col border-2 border-purple-600",children:[(0,t.jsx)("h2",{className:"text-2xl font-bold text-white mb-4",children:"Create Superset"}),(0,t.jsx)("p",{className:"text-zinc-400 text-sm mb-4",children:"Select two exercises to pair together"}),(0,t.jsxs)("div",{className:"flex-1 overflow-hidden flex gap-4 mb-4",children:[(0,t.jsxs)("div",{className:"flex-1 flex flex-col min-h-0",children:[(0,t.jsxs)("div",{className:"mb-2",children:[(0,t.jsx)("div",{className:"text-purple-400 text-sm font-bold mb-2",children:"Exercise 1"}),g?(0,t.jsxs)("div",{className:"bg-purple-900/30 border-2 border-purple-500 rounded-lg p-3 flex items-center justify-between",children:[(0,t.jsx)("span",{className:"text-white font-semibold",children:g.name}),(0,t.jsx)("button",{onClick:()=>b(null),className:"text-purple-300 hover:text-white text-sm",children:"Change"})]}):(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("input",{type:"text",value:o,onChange:e=>c(e.target.value),placeholder:"Search exercises or muscle groups...",className:"w-full bg-zinc-900 text-white px-3 py-2 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-purple-500",autoFocus:!0}),(0,t.jsx)("button",{onClick:()=>{E("exercise1"),y(!0)},className:"w-full bg-green-600 hover:bg-green-700 text-white py-2 rounded-lg text-sm font-semibold transition-colors",children:"+ Create New Exercise"})]})]}),!g&&(0,t.jsx)("div",{className:"flex-1 overflow-y-auto space-y-2",children:h?(0,t.jsx)("div",{className:"text-center text-zinc-400 py-4",children:"Loading..."}):0===_.length?(0,t.jsx)("div",{className:"text-center text-zinc-400 py-4",children:"No exercises found"}):(0,t.jsx)("div",{className:"space-y-4",children:_.map(({type:e,exercises:s})=>(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("div",{className:"text-[10px] uppercase tracking-wide text-zinc-400",children:(0,n.formatTypeLabel)(e)}),s.map(e=>(0,t.jsxs)("button",{onClick:()=>b(e),className:"w-full bg-zinc-900 hover:bg-zinc-700 text-left p-3 rounded-lg transition-colors border border-zinc-700 hover:border-purple-500",children:[(0,t.jsx)("div",{className:"text-white text-sm font-semibold",children:e.name}),e.equipment&&(0,t.jsx)("div",{className:"text-zinc-400 text-xs mt-1",children:e.equipment})]},e.id))]},e))})})]}),(0,t.jsx)("div",{className:"flex items-center",children:(0,t.jsx)("div",{className:"text-purple-400 text-2xl font-bold",children:"+"})}),(0,t.jsxs)("div",{className:"flex-1 flex flex-col min-h-0",children:[(0,t.jsxs)("div",{className:"mb-2",children:[(0,t.jsx)("div",{className:"text-purple-400 text-sm font-bold mb-2",children:"Exercise 2"}),f?(0,t.jsxs)("div",{className:"bg-purple-900/30 border-2 border-purple-500 rounded-lg p-3 flex items-center justify-between",children:[(0,t.jsx)("span",{className:"text-white font-semibold",children:f.name}),(0,t.jsx)("button",{onClick:()=>j(null),className:"text-purple-300 hover:text-white text-sm",children:"Change"})]}):(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("input",{type:"text",value:x,onChange:e=>m(e.target.value),placeholder:"Search exercises or muscle groups...",className:"w-full bg-zinc-900 text-white px-3 py-2 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-purple-500"}),(0,t.jsx)("button",{onClick:()=>{E("exercise2"),y(!0)},className:"w-full bg-green-600 hover:bg-green-700 text-white py-2 rounded-lg text-sm font-semibold transition-colors",children:"+ Create New Exercise"})]})]}),!f&&(0,t.jsx)("div",{className:"flex-1 overflow-y-auto space-y-2",children:h?(0,t.jsx)("div",{className:"text-center text-zinc-400 py-4",children:"Loading..."}):0===z.length?(0,t.jsx)("div",{className:"text-center text-zinc-400 py-4",children:"No exercises found"}):(0,t.jsx)("div",{className:"space-y-4",children:z.map(({type:e,exercises:s})=>(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("div",{className:"text-[10px] uppercase tracking-wide text-zinc-400",children:(0,n.formatTypeLabel)(e)}),s.map(e=>(0,t.jsxs)("button",{onClick:()=>j(e),className:"w-full bg-zinc-900 hover:bg-zinc-700 text-left p-3 rounded-lg transition-colors border border-zinc-700 hover:border-purple-500",children:[(0,t.jsx)("div",{className:"text-white text-sm font-semibold",children:e.name}),e.equipment&&(0,t.jsx)("div",{className:"text-zinc-400 text-xs mt-1",children:e.equipment})]},e.id))]},e))})})]})]}),(0,t.jsxs)("div",{className:"flex gap-3",children:[(0,t.jsx)("button",{onClick:r,className:"flex-1 bg-zinc-700 hover:bg-zinc-600 text-white py-3 rounded-lg font-semibold transition-colors",children:"Cancel"}),(0,t.jsx)("button",{onClick:()=>{g&&f&&e(g,f)},disabled:!g||!f,className:"flex-1 bg-purple-600 hover:bg-purple-700 disabled:bg-purple-900 disabled:cursor-not-allowed text-white py-3 rounded-lg font-bold transition-colors",children:"Add Superset"})]})]})})}e.s(["default",()=>x],2519)},11108,e=>{"use strict";var t=e.i(43476),s=e.i(71645),r=e.i(18566),i=e.i(90408),n=e.i(2519),l=e.i(49448),a=e.i(71829);function o(){let e=(0,r.useRouter)(),o=(0,r.useSearchParams)().get("id"),[c,d]=(0,s.useState)(""),[u,x]=(0,s.useState)(null),[m,h]=(0,s.useState)([]),[p,g]=(0,s.useState)(!1),[b,f]=(0,s.useState)(!1),[j,v]=(0,s.useState)(!1),[y,w]=(0,s.useState)(null),[E,N]=(0,s.useState)(!1),[S,C]=(0,s.useState)(!1);(0,s.useEffect)(()=>{o&&R(o)},[o]),(0,s.useEffect)(()=>{if(!u||0===m.length)return;let e=new AbortController,t=setTimeout(()=>{fetch(`/api/routines/${u}/stretch-recommendations`,{method:"POST",signal:e.signal}).catch(e=>{e?.name!=="AbortError"&&console.warn("Failed to prefetch stretch recommendations:",e)})},1e3);return()=>{clearTimeout(t),e.abort()}},[u,m]);let R=async e=>{N(!0);try{let t=await fetch(`/api/routines/${e}`);if(!t.ok)throw Error("Failed to load routine");let s=await t.json();x(parseInt(e)),d(s.routine.name);let r=s.exercises.map(e=>e.exercise_id2?{type:a.EXERCISE_TYPES.b2b,exercise1:{id:e.exercise_id1,name:e.exercise_name},exercise2:{id:e.exercise_id2,name:e.exercise2_name}}:{id:e.exercise_id1,name:e.exercise_name});h(r)}catch(e){console.error("Error loading routine:",e),w("Failed to load routine")}finally{N(!1)}},_=async()=>{if(c.trim()){g(!0),w(null);try{let e=await fetch("/api/routines",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:c.trim(),isPublic:!S})});if(!e.ok){let t=await e.json();throw Error(t.error||"Failed to create routine")}let t=await e.json();x(t.id)}catch(e){console.error("Error creating routine:",e),w(e.message||"Failed to create routine. Please try again.")}finally{g(!1)}}},z=async e=>{if(console.log("Exercise selected:",e),f(!1),u)try{if(!(await fetch(`/api/routines/${u}/exercises`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({exerciseId1:e.id})})).ok)throw Error("Failed to add exercise to routine");h([...m,e])}catch(e){console.error("Error adding exercise:",e),alert("Failed to add exercise to routine. Please try again.")}},k=async(e,t)=>{if(v(!1),u)try{if(!(await fetch(`/api/routines/${u}/exercises`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({exerciseId1:e.id,exerciseId2:t.id})})).ok)throw Error("Failed to add superset to routine");h([...m,{type:a.EXERCISE_TYPES.b2b,exercise1:e,exercise2:t}])}catch(e){console.error("Error adding superset:",e),alert("Failed to add superset to routine. Please try again.")}};return E?(0,t.jsx)("div",{className:"min-h-screen bg-zinc-900 flex items-center justify-center",children:(0,t.jsx)("div",{className:"text-white text-xl",children:"Loading routine..."})}):(0,t.jsx)("div",{className:"min-h-screen bg-zinc-900 p-4",children:(0,t.jsxs)("div",{className:"max-w-2xl mx-auto",children:[(0,t.jsx)("h1",{className:"text-3xl font-bold text-white mb-6",children:u?"Edit Routine":"Create New Routine"}),u?(0,t.jsxs)("div",{children:[(0,t.jsx)(l.Card,{paddingClassName:"p-6",className:"mb-6",children:(0,t.jsx)("h2",{className:"text-xl font-bold text-white",children:c})}),(0,t.jsxs)("div",{className:"mb-6",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-white mb-3",children:"Exercises"}),0===m.length?(0,t.jsx)("div",{className:"bg-zinc-800 rounded-lg p-8 text-center border-2 border-dashed border-zinc-700",children:(0,t.jsx)("p",{className:"text-zinc-400",children:"No exercises added yet"})}):(0,t.jsx)("div",{className:"space-y-3",children:m.map((e,s)=>e.type===a.EXERCISE_TYPES.b2b?(0,t.jsxs)("div",{className:"bg-zinc-800 rounded-lg p-4 border-2 border-purple-700",children:[(0,t.jsx)("div",{className:"text-purple-400 text-xs font-bold mb-2",children:"SUPERSET"}),(0,t.jsx)("div",{className:"text-white font-semibold",children:e.exercise1.name}),(0,t.jsx)("div",{className:"text-zinc-500 text-sm my-1",children:"+"}),(0,t.jsx)("div",{className:"text-white font-semibold",children:e.exercise2.name})]},s):(0,t.jsx)("div",{className:"bg-zinc-800 rounded-lg p-4 border-2 border-zinc-700",children:(0,t.jsx)("div",{className:"text-white font-semibold",children:e.name})},s))})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,t.jsx)("button",{onClick:()=>f(!0),className:"bg-green-600 hover:bg-green-700 text-white py-4 rounded-lg text-lg font-bold transition-colors",children:"+ Exercise"}),(0,t.jsx)("button",{onClick:()=>v(!0),className:"bg-purple-600 hover:bg-purple-700 text-white py-4 rounded-lg text-lg font-bold transition-colors",children:"+ Superset"})]}),m.length>0&&(0,t.jsx)("button",{onClick:()=>e.push(`/routines/${u}/stretches`),className:"w-full mt-4 bg-blue-600 hover:bg-blue-700 text-white py-4 rounded-lg text-lg font-bold transition-colors",children:"Continue to Stretches"}),(0,t.jsx)("button",{onClick:()=>e.push("/routines"),className:"w-full mt-4 bg-zinc-700 hover:bg-zinc-600 text-white py-3 rounded-lg font-semibold transition-colors",children:"Back to Routines"})]}):(0,t.jsxs)(l.Card,{paddingClassName:"p-6",borderClassName:"border-green-600",children:[(0,t.jsx)("label",{className:"text-zinc-300 text-sm font-semibold block mb-2",children:"Routine Name"}),(0,t.jsx)("input",{type:"text",value:c,onChange:e=>{d(e.target.value),w(null)},placeholder:"e.g., Upper Body Day A",className:"w-full bg-zinc-900 text-white px-4 py-3 rounded-lg mb-4 focus:outline-none focus:ring-2 focus:ring-green-500",autoFocus:!0}),(0,t.jsxs)("label",{className:"flex items-center gap-3 mb-4 cursor-pointer",children:[(0,t.jsx)("input",{type:"checkbox",checked:S,onChange:e=>C(e.target.checked),className:"w-5 h-5 rounded border-zinc-600 bg-zinc-900 text-green-600 focus:ring-green-500 focus:ring-offset-zinc-800 cursor-pointer"}),(0,t.jsxs)("span",{className:"text-zinc-300 text-sm",children:["Make this routine private",(0,t.jsx)("span",{className:"block text-zinc-500 text-xs",children:"Private routines won't appear in the public browse page"})]})]}),y&&(0,t.jsx)("div",{className:"bg-red-900/50 border-2 border-red-500 text-red-200 px-4 py-3 rounded-lg mb-4",children:y}),(0,t.jsx)("button",{onClick:_,disabled:!c.trim()||p,className:"w-full bg-green-600 hover:bg-green-700 disabled:bg-green-800 disabled:cursor-not-allowed text-white py-3 rounded-lg font-bold transition-colors",children:p?"Creating...":"Create Routine"})]}),b&&(0,t.jsx)(i.default,{onSelect:z,onCancel:()=>f(!1)}),j&&(0,t.jsx)(n.default,{onSelect:k,onCancel:()=>v(!1)})]})})}function c(){return(0,t.jsx)(s.Suspense,{fallback:(0,t.jsx)("div",{className:"min-h-screen bg-zinc-900 flex items-center justify-center",children:(0,t.jsx)("div",{className:"text-white text-xl",children:"Loading..."})}),children:(0,t.jsx)(o,{})})}e.s(["default",()=>c])}]);