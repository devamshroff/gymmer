(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,49448,e=>{"use strict";var t=e.i(43476);function r({children:e,className:r="",paddingClassName:s,borderClassName:i="border-zinc-700",borderWidthClassName:n="border-2"}){return(0,t.jsx)("div",{className:`bg-zinc-800 rounded-lg ${n} ${i} ${s||"p-4"} ${r}`.trim(),children:e})}function s({message:e,description:r,className:s=""}){return(0,t.jsxs)("div",{className:`text-zinc-500 text-center py-4 bg-zinc-800 rounded-lg ${s}`.trim(),children:[(0,t.jsx)("div",{children:e}),r&&(0,t.jsx)("div",{className:"text-zinc-600 text-sm mt-1",children:r})]})}function i({children:e,maxWidthClassName:r="max-w-2xl",className:s=""}){return(0,t.jsx)("div",{className:`fixed bottom-0 left-0 right-0 p-4 bg-zinc-900 border-t border-zinc-800 ${s}`.trim(),children:(0,t.jsx)("div",{className:`${r} mx-auto`,children:e})})}function n({icon:e,label:r,iconClassName:s="text-zinc-400",className:i=""}){return(0,t.jsxs)("h2",{className:`text-xl font-bold text-white mb-4 flex items-center gap-2 ${i}`.trim(),children:[(0,t.jsx)("span",{className:s,children:e}),r]})}e.s(["BottomActionBar",()=>i,"Card",()=>r,"EmptyState",()=>s,"SectionHeader",()=>n])},85064,e=>{"use strict";function t(e){if(!e||e<=0)return"Timer not set";let t=Math.floor(e/60),r=e%60;return t>0&&0===r?`${t} min`:t>0?`${t} min ${r} sec`:`${e} sec`}e.s(["formatStretchTimer",()=>t])},25699,e=>{"use strict";function t(e){return"lbs"===e||"kg"===e?e:"lbs"}function r(e){return"in"===e||"cm"===e?e:"in"}function s(e,t){return Number.isFinite(e)?"kg"===t?.45359237*e:e:0}function i(e,t){return Number.isFinite(e)?"kg"===t?e/.45359237:e:0}function n(e,t){return Number.isFinite(e)?"cm"===t?2.54*e:e:0}function a(e,t){return Number.isFinite(e)?"cm"===t?e/2.54:e:0}function l(e){if(!Number.isFinite(e))return"0";let t=Math.round(10*e)/10;return Number.isInteger(t)?t.toString():t.toFixed(1)}function o(e,t,r){if(r)return e<=0?"Machine":`+${l(s(e,t))} ${t}`;return`${l(s(e,t))} ${t}`}e.s(["DEFAULT_HEIGHT_UNIT",0,"in","DEFAULT_WEIGHT_UNIT",0,"lbs","convertHeightFromStorage",()=>n,"convertHeightToStorage",()=>a,"convertWeightFromStorage",()=>s,"convertWeightToStorage",()=>i,"formatDisplayNumber",()=>l,"formatWeightDisplay",()=>o,"normalizeHeightUnit",()=>r,"normalizeWeightUnit",()=>t])},44736,e=>{"use strict";var t=e.i(71829),r=e.i(25699);function s(e,r){return Object.values(t.EXERCISE_PRIMARY_METRICS).includes(e)?e:r?t.EXERCISE_PRIMARY_METRICS.repsOnly:t.EXERCISE_PRIMARY_METRICS.weight}function i(e,r,s,i){switch(e){case t.EXERCISE_PRIMARY_METRICS.weight:return s;case t.EXERCISE_PRIMARY_METRICS.height:return i;case t.EXERCISE_PRIMARY_METRICS.time:return r||"sec";case t.EXERCISE_PRIMARY_METRICS.distance:return r||"m";default:return null}}function n(e,r,s,n,a){let l=i(e,r,s,n);switch(e){case t.EXERCISE_PRIMARY_METRICS.weight:return a?`Added Weight (${l})`:`Weight (${l})`;case t.EXERCISE_PRIMARY_METRICS.height:return`Height (${l})`;case t.EXERCISE_PRIMARY_METRICS.time:return`Time (${l})`;case t.EXERCISE_PRIMARY_METRICS.distance:return`Distance (${l})`;case t.EXERCISE_PRIMARY_METRICS.repsOnly:return"Reps";default:return"Value"}}function a(e,s,i,n){return Number.isFinite(e)?s===t.EXERCISE_PRIMARY_METRICS.weight?(0,r.convertWeightFromStorage)(e,i):s===t.EXERCISE_PRIMARY_METRICS.height?(0,r.convertHeightFromStorage)(e,n):e:0}function l(e,s,n,l,o,c){if(s===t.EXERCISE_PRIMARY_METRICS.weight)return(0,r.formatWeightDisplay)(e,l,c);let d=i(s,n,l,o),m=a(e,s,l,o);return d?`${(0,r.formatDisplayNumber)(m)} ${d}`:(0,r.formatDisplayNumber)(m)}function o(e,t,s,i,n=!1){if(n&&0===e)return"";let l=a(e,t,s,i);return(0,r.formatDisplayNumber)(l)}function c(e,s,i,n){if(""===e)return 0;let a=parseFloat(e);return Number.isFinite(a)?Number.isFinite(a)?s===t.EXERCISE_PRIMARY_METRICS.weight?(0,r.convertWeightToStorage)(a,i):s===t.EXERCISE_PRIMARY_METRICS.height?(0,r.convertHeightToStorage)(a,n):a:0:null}function d(e){return e===t.EXERCISE_PRIMARY_METRICS.repsOnly}function m(e){return e===t.EXERCISE_PRIMARY_METRICS.weight}e.s(["convertMetricFromStorage",()=>a,"formatMetricDisplay",()=>l,"formatMetricInputValue",()=>o,"getMetricLabel",()=>n,"isRepsOnlyMetric",()=>d,"isWeightMetric",()=>m,"parseMetricInput",()=>c,"resolveMetricUnit",()=>i,"resolvePrimaryMetric",()=>s])},20970,e=>{"use strict";function t(e,t){let r=encodeURIComponent(e),s=t?encodeURIComponent(t):"default";return`workout_bootstrap:${r}:${s}`}function r(e){return`routine_edit_version:${e}`}function s(e){if(null==e)return null;let t=r(`id:${e}`);return localStorage.getItem(t)??"0"}function i(e){if(!e)return null;let t=r(`name:${encodeURIComponent(e)}`);return localStorage.getItem(t)??"0"}function n(e){let{workoutName:r,routineId:n}=e,a=[t(r,n)];for(let e of(n&&a.push(t(r,null)),a)){let t=sessionStorage.getItem(e);if(t)try{let a=JSON.parse(t);if(!function(e,t,r){let n=s(r);if(e.editVersionId&&n&&e.editVersionId!==n)return!1;let a=i(t);return!e.editVersionName||!a||e.editVersionName===a}(a,r,n)){sessionStorage.removeItem(e);continue}return a}catch(t){console.error("Failed to parse workout bootstrap cache:",t),sessionStorage.removeItem(e)}}return null}function a(e){let{workoutName:r,routineId:n,payload:a}=e,l=JSON.stringify({...a,cachedAt:new Date().toISOString(),editVersionId:s(n),editVersionName:i(r)});sessionStorage.setItem(t(r,n),l),n&&sessionStorage.setItem(t(r,null),l)}function l(e){let s;s=String(Date.now()),null!==e.routineId&&void 0!==e.routineId&&localStorage.setItem(r(`id:${e.routineId}`),s),e.routineName&&localStorage.setItem(r(`name:${encodeURIComponent(e.routineName)}`),s),e.routineName&&function(e){let{workoutName:r,routineId:s}=e;sessionStorage.removeItem(t(r,s)),s&&sessionStorage.removeItem(t(r,null))}({workoutName:e.routineName,routineId:e.routineId?String(e.routineId):null})}e.s(["invalidateWorkoutBootstrapCache",()=>l,"loadWorkoutBootstrapCache",()=>n,"saveWorkoutBootstrapCache",()=>a])},18566,(e,t,r)=>{t.exports=e.r(76562)},71829,e=>{"use strict";let t={progress:"progress",maintenance:"maintenance",light:"light"},r={[t.progress]:"Progress",[t.maintenance]:"Maintenance",[t.light]:"Light"},s={[t.progress]:"Push for small, steady improvements.",[t.maintenance]:"Hold steady and focus on form.",[t.light]:"Easy effort today."};e.s(["EXERCISE_HISTORY_AGGREGATION_MODES",0,{max:"max",avg:"avg"},"EXERCISE_HISTORY_DISPLAY_MODES",0,{weight:"weight",reps:"reps"},"EXERCISE_PRIMARY_METRICS",0,{weight:"weight",height:"height",time:"time",distance:"distance",repsOnly:"reps_only"},"EXERCISE_TYPES",0,{single:"single",b2b:"b2b",circuit:"circuit"},"SESSION_MODES",0,t,"SESSION_MODE_DESCRIPTIONS",0,s,"SESSION_MODE_LABELS",0,r])},62376,e=>{"use strict";var t=e.i(71829);let r="current_workout_session";function s(e){return e===t.SESSION_MODES.progress||e===t.SESSION_MODES.maintenance||e===t.SESSION_MODES.light}function i(e,r=t.SESSION_MODES.progress){return s(e)?e:r}function n(e,t){let s={workoutName:e,routineId:t??null,sessionId:null,startTime:new Date().toISOString(),exercises:[]};localStorage.setItem(r,JSON.stringify(s))}function a(e,t){let r=l(),s=t??null;r?(r.workoutName!==e||(r.routineId??null)!==s)&&n(e,s):n(e,s)}function l(){let e=localStorage.getItem(r);if(!e)return null;let t=JSON.parse(e),s=t.routineId,i="number"==typeof s?s:Number(s);t.routineId=Number.isFinite(i)?i:null;let n=t.sessionId,a="number"==typeof n?n:Number(n);return t.sessionId=Number.isFinite(a)?a:null,t}function o(e){let t=l();t&&t.sessionId!==e&&(t.sessionId=e,localStorage.setItem(r,JSON.stringify(t)))}function c(e){let t=l();t&&(t.exercises.push(e),localStorage.setItem(r,JSON.stringify(t)))}function d(e){let t=l();t&&(t.cardio=e,localStorage.setItem(r,JSON.stringify(t)))}function m(){localStorage.removeItem(r)}e.s(["addCardioToSession",()=>d,"addExerciseToSession",()=>c,"clearWorkoutSession",()=>m,"ensureWorkoutSession",()=>a,"getWorkoutSession",()=>l,"initWorkoutSession",()=>n,"isSessionMode",()=>s,"resolveSessionMode",()=>i,"setWorkoutSessionId",()=>o])},5907,e=>{"use strict";let t="session_workout_override",r="session_workout_change_ack",s="session_workout_targets_meta";function i(e,t,r){let s=encodeURIComponent(t),i=r?encodeURIComponent(r):"default";return`${e}:${s}:${i}`}function n(e,r){let s=i(t,e,r),n=sessionStorage.getItem(s);if(!n)return null;try{return JSON.parse(n)}catch(e){return console.error("Failed to parse session workout override:",e),null}}function a(e,r){let s=i(t,e.name,r);sessionStorage.setItem(s,JSON.stringify(e))}function l(e,t){let r=i(s,e,t),n=sessionStorage.getItem(r);if(!n)return null;try{return JSON.parse(n)}catch(e){return console.error("Failed to parse session targets meta:",e),null}}function o(e,t,r){let n=i(s,e,t);r?sessionStorage.setItem(n,JSON.stringify(r)):sessionStorage.removeItem(n)}function c(e,t){let s=i(r,e,t);return"1"===sessionStorage.getItem(s)}function d(e,t){let s=i(r,e,t);sessionStorage.setItem(s,"1")}e.s(["acknowledgeChangeWarning",()=>d,"hasChangeWarningAck",()=>c,"loadSessionTargetsMeta",()=>l,"loadSessionWorkout",()=>n,"saveSessionTargetsMeta",()=>o,"saveSessionWorkout",()=>a])},25415,e=>{"use strict";let t="No form tips yet.";function r(e){if("string"!=typeof e)return t;let r=e.trim();return r.length>0?r:t}function s(e,t){if("string"==typeof t&&t.trim().length>0)return t.trim();let r="string"==typeof e&&e.trim().length>0?e.trim():"exercise",s=`${r} form`;return`https://www.youtube.com/results?search_query=${encodeURIComponent(s)}`}e.s(["getFormTips",()=>r,"getVideoUrl",()=>s])},4348,e=>{"use strict";var t=e.i(43476),r=e.i(71645),s=e.i(71829),i=e.i(25699),n=e.i(44736);let a={week:"1W",month:"1M",all:"All"};function l(e){let t=Math.round(10*e)/10;return t>=1e6?`${(t/1e6).toFixed(1)}M`:t>=1e3?`${(t/1e3).toFixed(1)}k`:Number.isInteger(t)?t.toString():t.toFixed(1)}function o(e){return 0===e.length?"":e.map((e,t)=>`${0===t?"M":"L"} ${e.x} ${e.y}`).join(" ")}function c({points:e,weightMode:i,mode:a,primaryMetric:c,metricUnit:d,targetValue:m,isMachine:u,weightUnit:x,heightUnit:h}){let[g,p]=(0,r.useState)(null),f=224,b=a===s.EXERCISE_HISTORY_DISPLAY_MODES.reps||(0,n.isRepsOnlyMetric)(c),S=(0,n.isWeightMetric)(c),y=!!u&&S,N=(0,n.resolveMetricUnit)(c,d,x,h),j=N??x,E=N?` ${N}`:"",v=e=>null===e?null:(0,n.convertMetricFromStorage)(e,c,x,h),w=!b&&S,M=e.map(e=>b?i===s.EXERCISE_HISTORY_AGGREGATION_MODES.max?e.reps_max:e.reps_avg:v(i===s.EXERCISE_HISTORY_AGGREGATION_MODES.max?e.weight_max:e.weight_avg)).filter(e=>null!==e),I=null==m?null:(0,n.convertMetricFromStorage)(m,c,x,h),R=null!==I&&Number.isFinite(I)&&I>0;R&&M.push(I);let _=e.map(e=>b||!w?e.reps_total:v(e.volume)).filter(e=>null!==e),T=M.length?Math.min(...M):0,C=M.length?Math.max(...M):1,z=_.length?Math.min(..._):0,O=_.length?Math.max(..._):1;if(C===T){let e=Math.max(1,.2*Math.abs(C));T-=e,C+=e}if(O===z){let e=Math.max(1,.2*Math.abs(O));z-=e,O+=e}y&&C<=(T=0)&&(C=T+1);let k=C-T||1,$=O-z||1,W=e.length>1?592/(e.length-1):0,U=e.map((e,t)=>{let r=b?i===s.EXERCISE_HISTORY_AGGREGATION_MODES.max?e.reps_max:e.reps_avg:v(i===s.EXERCISE_HISTORY_AGGREGATION_MODES.max?e.weight_max:e.weight_avg),n=b||!w?e.reps_total:v(e.volume),a=64+t*W,l=6*(null!==r&&null!==n);return{baseX:a,primaryValue:r,secondaryValue:n,primaryX:a-l,secondaryX:a+l}}),D=U.map(e=>{if(null===e.primaryValue)return null;let t=16+f-(e.primaryValue-T)/k*f;return{x:e.primaryX,y:t,value:e.primaryValue}}).filter(e=>null!==e),A=U.map(e=>{if(null===e.secondaryValue)return null;let t=16+f-(e.secondaryValue-z)/$*f;return{x:e.secondaryX,y:t,value:e.secondaryValue}}).filter(e=>null!==e),P=o(D.map(({x:e,y:t})=>({x:e,y:t}))),F=o(A.map(({x:e,y:t})=>({x:e,y:t}))),Y=(0,n.getMetricLabel)(c,d,x,h,y),X=b?"Total Reps":w?`Volume (${j})`:"Total Reps",H=e=>b?l(e):y?0===e?"Machine":`+${l(e)}${E}`:`${l(e)}${E}`,L=e=>b||!w?l(e):`${l(e)}${E}`,B=Array.from(new Set(e.length<=1?[0]:[0,Math.floor((e.length-1)/2),e.length-1])).filter(t=>e[t]),G=g?.label||"",V=Math.min(704,Math.max(56,7*G.length+18)),J=g?Math.min(Math.max(g.x+10,8),720-V-8):0,K=g?Math.max(8,g.y-24-10):0,q=R?16+f-(I-T)/k*f:null,Z=R?y?`Target +${l(I)}${E}`:`Target ${l(I)}${E}`:"";return(0,t.jsx)("div",{className:"w-full overflow-x-auto",children:(0,t.jsxs)("svg",{viewBox:"0 0 720 280",className:"w-full min-w-[520px]",children:[(0,t.jsx)("rect",{x:0,y:0,width:720,height:280,rx:16,fill:"#0f172a"}),(0,t.jsx)("g",{stroke:"#1f2937",strokeWidth:1,children:[0,.5,1].map(e=>{let r=16+f-e*f;return(0,t.jsx)("line",{x1:64,y1:r,x2:656,y2:r},e)})}),R&&null!==q&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("line",{x1:64,y1:q,x2:656,y2:q,stroke:"#f59e0b",strokeWidth:2,strokeDasharray:"6 6"}),(0,t.jsx)("text",{x:650,y:Math.max(28,q-6),fill:"#f59e0b",fontSize:"12",textAnchor:"end",children:Z})]}),(0,t.jsxs)("g",{fill:"#94a3b8",fontSize:"12",children:[(0,t.jsx)("text",{x:52,y:26,textAnchor:"end",children:H(C)}),(0,t.jsx)("text",{x:52,y:16+f,textAnchor:"end",children:H(T)}),(0,t.jsx)("text",{x:668,y:26,textAnchor:"start",children:l(O)}),(0,t.jsx)("text",{x:668,y:16+f,textAnchor:"start",children:l(z)})]}),P&&(0,t.jsx)("path",{d:P,fill:"none",stroke:"#38bdf8",strokeWidth:3}),F&&(0,t.jsx)("path",{d:F,fill:"none",stroke:"#22c55e",strokeWidth:3}),g&&(0,t.jsxs)("g",{children:[(0,t.jsx)("rect",{x:J,y:K,width:V,height:24,rx:6,fill:"#111827",stroke:"#374151",strokeWidth:1}),(0,t.jsx)("text",{x:J+9,y:K+16,fill:"#e2e8f0",fontSize:"12",children:G})]}),(0,t.jsxs)("g",{fill:"#e2e8f0",children:[D.map((e,r)=>(0,t.jsx)("circle",{cx:e.x,cy:e.y,r:4,fill:"#38bdf8",onMouseEnter:()=>p({x:e.x,y:e.y,label:`${Y}: ${H(e.value)}`}),onMouseMove:()=>p({x:e.x,y:e.y,label:`${Y}: ${H(e.value)}`}),onMouseLeave:()=>p(null)},`w-${r}`)),A.map((e,r)=>(0,t.jsx)("circle",{cx:e.x,cy:e.y,r:4,fill:"#22c55e",onMouseEnter:()=>p({x:e.x,y:e.y,label:`${X}: ${L(e.value)}`}),onMouseMove:()=>p({x:e.x,y:e.y,label:`${X}: ${L(e.value)}`}),onMouseLeave:()=>p(null)},`v-${r}`))]}),(0,t.jsx)("g",{fill:"#94a3b8",fontSize:"12",children:B.map(r=>{var s;let i,n=(s=e[r].day,Number.isNaN((i=new Date(`${s}T00:00:00Z`)).getTime())?s:i.toLocaleDateString("en-US",{month:"short",day:"numeric"}));return(0,t.jsx)("text",{x:64+r*W,y:268,textAnchor:"middle",children:n},r)})}),(0,t.jsxs)("g",{fill:"#94a3b8",fontSize:"12",children:[(0,t.jsx)("text",{x:64,y:276,textAnchor:"start",children:Y}),(0,t.jsx)("text",{x:656,y:276,textAnchor:"end",children:X})]})]})})}function d({name:e}){return(0,t.jsxs)("div",{className:"bg-zinc-800 rounded-xl p-4 border border-zinc-700 animate-pulse",children:[(0,t.jsx)("div",{className:"h-5 w-40 bg-zinc-700 rounded mb-4"}),(0,t.jsx)("div",{className:"h-40 bg-zinc-900 rounded-lg border border-zinc-700"}),(0,t.jsxs)("div",{className:"mt-4 flex justify-between",children:[(0,t.jsx)("div",{className:"h-3 w-16 bg-zinc-700 rounded"}),(0,t.jsx)("div",{className:"h-3 w-16 bg-zinc-700 rounded"})]}),(0,t.jsxs)("div",{className:"mt-2 text-xs text-zinc-500",children:["Loading ",e,"..."]})]})}function m({open:e,onClose:l,exerciseNames:o,title:m="Exercise History",targets:u,weightUnit:x,heightUnit:h}){let g=x??i.DEFAULT_WEIGHT_UNIT,p=h??i.DEFAULT_HEIGHT_UNIT,[f,b]=(0,r.useState)("month"),[S,y]=(0,r.useState)(s.EXERCISE_HISTORY_AGGREGATION_MODES.max),[N,j]=(0,r.useState)(!1),[E,v]=(0,r.useState)(null),[w,M]=(0,r.useState)({}),I=(0,r.useMemo)(()=>o.join("|"),[o]);return((0,r.useEffect)(()=>{if(!e)return;let t=new AbortController;return(async()=>{j(!0),v(null);try{let e=new URLSearchParams({range:f});o.forEach(t=>e.append("name",t));let r=await fetch(`/api/exercise-history?${e.toString()}`,{signal:t.signal});if(!r.ok)throw Error("Failed to load exercise history");let s=await r.json();M(s.history||{})}catch(e){if(e?.name==="AbortError")return;v(e?.message||"Failed to load history")}finally{j(!1)}})(),()=>t.abort()},[e,f,I,o]),(0,r.useEffect)(()=>{if(!e)return;let t=e=>{"Escape"===e.key&&l()};return window.addEventListener("keydown",t),()=>window.removeEventListener("keydown",t)},[e,l]),e)?(0,t.jsx)("div",{className:"fixed inset-0 z-50 bg-black/70 flex items-center justify-center p-4",onClick:l,children:(0,t.jsxs)("div",{className:"bg-zinc-900 border border-zinc-700 rounded-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",onClick:e=>e.stopPropagation(),children:[(0,t.jsxs)("div",{className:"p-6 border-b border-zinc-800 flex items-start justify-between gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-2xl font-bold text-white",children:m}),(0,t.jsx)("div",{className:"text-zinc-400 text-sm",children:"Primary metric trends"})]}),(0,t.jsx)("button",{onClick:l,className:"text-zinc-300 hover:text-white bg-zinc-800 hover:bg-zinc-700 px-3 py-2 rounded-lg",children:"Close"})]}),(0,t.jsxs)("div",{className:"p-6 space-y-6",children:[(0,t.jsxs)("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[(0,t.jsx)("div",{className:"flex gap-2",children:["week","month","all"].map(e=>(0,t.jsx)("button",{onClick:()=>b(e),className:`px-3 py-2 rounded-lg text-sm font-semibold border ${f===e?"bg-blue-600 border-blue-500 text-white":"bg-zinc-800 border-zinc-700 text-zinc-300 hover:text-white"}`,children:a[e]},e))}),(0,t.jsx)("div",{className:"flex gap-2",children:Object.values(s.EXERCISE_HISTORY_AGGREGATION_MODES).map(e=>(0,t.jsx)("button",{onClick:()=>y(e),className:`px-3 py-2 rounded-lg text-sm font-semibold border ${S===e?"bg-emerald-600 border-emerald-500 text-white":"bg-zinc-800 border-zinc-700 text-zinc-300 hover:text-white"}`,children:e===s.EXERCISE_HISTORY_AGGREGATION_MODES.max?"Max":"Avg"},e))})]}),N&&(0,t.jsx)("div",{className:"text-zinc-400 text-sm",children:"Loading history..."}),E&&(0,t.jsx)("div",{className:"text-red-400 text-sm",children:E}),!N&&!E&&0===o.length&&(0,t.jsx)("div",{className:"text-zinc-500 text-sm",children:"No exercise selected."}),N&&o.map(e=>(0,t.jsx)(d,{name:e},`loading-${e}`)),!N&&!E&&o.map(e=>{let r=w[e],i=r?.points||[],a=r?.display_mode===s.EXERCISE_HISTORY_DISPLAY_MODES.reps?s.EXERCISE_HISTORY_DISPLAY_MODES.reps:s.EXERCISE_HISTORY_DISPLAY_MODES.weight,l=(0,n.resolvePrimaryMetric)(r?.primary_metric,a===s.EXERCISE_HISTORY_DISPLAY_MODES.reps),o="string"==typeof r?.metric_unit?r.metric_unit:null,d=!!r?.is_machine&&(0,n.isWeightMetric)(l),m=(0,n.getMetricLabel)(l,o,g,p,d),x=u?.[e],h=(0,n.isRepsOnlyMetric)(l)||a===s.EXERCISE_HISTORY_DISPLAY_MODES.reps?x?.reps:x?.weight,f=Number.isFinite(h)&&h>0?h:null,b=(0,n.resolveMetricUnit)(l,o,g,p),y=(0,n.isRepsOnlyMetric)(l)||a===s.EXERCISE_HISTORY_DISPLAY_MODES.reps?"Total Reps":(0,n.isWeightMetric)(l)?`Volume (${b??g})`:"Total Reps";return(0,t.jsxs)("div",{className:"bg-zinc-800 rounded-xl p-4 border border-zinc-700",children:[(0,t.jsxs)("div",{className:"flex flex-wrap items-center justify-between mb-4 gap-2",children:[(0,t.jsx)("div",{className:"text-white text-lg font-semibold",children:e}),(0,t.jsxs)("div",{className:"flex items-center gap-3 text-xs text-zinc-400",children:[(0,t.jsxs)("span",{className:"flex items-center gap-2",children:[(0,t.jsx)("span",{className:"h-2 w-2 rounded-full bg-sky-400"}),m]}),(0,t.jsxs)("span",{className:"flex items-center gap-2",children:[(0,t.jsx)("span",{className:"h-2 w-2 rounded-full bg-green-400"}),y]}),null!==f&&(0,t.jsxs)("span",{className:"flex items-center gap-2",children:[(0,t.jsx)("span",{className:"h-[2px] w-4 border-t border-dashed border-amber-400"}),"Target"]})]})]}),0===i.length?(0,t.jsx)("div",{className:"bg-zinc-900 border border-zinc-700 rounded-lg p-4 text-sm text-zinc-400",children:"No history yet. Finish a workout with this exercise to populate the graph."}):(0,t.jsx)(c,{points:i,weightMode:S,mode:a,primaryMetric:l,metricUnit:o,targetValue:f,isMachine:d,weightUnit:g,heightUnit:p})]},e)})]})]})}):null}e.s(["default",()=>m])},53462,e=>{"use strict";var t=e.i(43476),r=e.i(71645),s=e.i(18566),i=e.i(22016),n=e.i(25415),a=e.i(85064),l=e.i(62376),o=e.i(49448),c=e.i(4348),d=e.i(5907),m=e.i(71829),u=e.i(25699),x=e.i(44736),h=e.i(20970);function g(e,t,r){return e[`set${t}_${r}`]}function p(e){return Number.isFinite(e)?Math.ceil(e):0}function f(e){if(!e)return{maxWeight:null,repsAtMax:null,maxReps:null};let t=null,r=null,s=null;for(let i of[1,2,3,4]){let n=g(e,i,"weight"),a=g(e,i,"reps");"number"==typeof a&&Number.isFinite(a)&&(s=null===s?a:Math.max(s,a)),"number"==typeof n&&Number.isFinite(n)&&(null===t||n>t?(t=n,r="number"==typeof a&&Number.isFinite(a)?a:null):n===t&&"number"==typeof a&&Number.isFinite(a)&&(r=null===r?a:Math.max(r,a)))}return{maxWeight:t,repsAtMax:r,maxReps:s}}function b(e){if("string"!=typeof e)return null;let t=e.trim();return t.length>0?t:null}function S(e){let t={};for(let[r,s]of Object.entries(e)){let{maxWeight:e,maxReps:i}=f(s);t[r]={weight:e,reps:i}}return t}function y(e,t,r,s){let i=e===m.SESSION_MODES.progress?"Targets are set. Push for a clean win today.":e===m.SESSION_MODES.maintenance?"Targets are set. Keep it steady and controlled today.":"Targets are set. Keep it light and focus on smooth reps today.",n=r.slice(0,3),a=n.length>0?` Focus lifts: ${n.join(", ")}.`:"",l=m.SESSION_MODE_LABELS[e]??"Training",o=`Goal today: ${l} session for ${t||"today"}.${a}`.trim(),c=[];return s.up&&c.push(`${s.up} trending up`),s.flat&&c.push(`${s.flat} steady`),s.down&&c.push(`${s.down} trending down`),s.newData&&c.push(`${s.newData} without recent data`),{encouragement:i,goalSummary:o,trendSummary:c.length>0?`Recent sessions: ${c.join(", ")}.`:"Recent sessions: not enough history yet."}}function N(e,t){return"number"==typeof e&&Number.isFinite(e)?e:t}function j(){let e=(0,s.useParams)(),n=(0,s.useRouter)(),a=(0,s.useSearchParams)(),x="1"===a.get("preview"),g=a.get("mode"),j=a.get("routineId"),v=(0,l.isSessionMode)(g)?g:null,M=(0,l.resolveSessionMode)(g),[I,R]=(0,r.useState)(null),[_,T]=(0,r.useState)(!0),[C,z]=(0,r.useState)(null),[O,k]=(0,r.useState)(!1),[$,W]=(0,r.useState)(!1),[U,D]=(0,r.useState)(!1),[A,P]=(0,r.useState)(!1),[F,Y]=(0,r.useState)([]),[X,H]=(0,r.useState)({}),[L,B]=(0,r.useState)(!1),[G,V]=(0,r.useState)(null),[J,K]=(0,r.useState)({encouragement:null,goalSummary:null,trendSummary:null}),[q,Z]=(0,r.useState)(null),[Q,ee]=(0,r.useState)({}),[et,er]=(0,r.useState)({}),[es,ei]=(0,r.useState)(null),[en,ea]=(0,r.useState)(!1),[el,eo]=(0,r.useState)("..."),[ec,ed]=(0,r.useState)(u.DEFAULT_WEIGHT_UNIT),[em,eu]=(0,r.useState)(u.DEFAULT_HEIGHT_UNIT);(0,r.useEffect)(()=>{er(S(Q))},[Q]);let ex=(0,r.useCallback)(e=>{if(!I)return;let t={...I,exercises:I.exercises.map(t=>{let r,s;if(t.type===m.EXERCISE_TYPES.single){let r=e[t.name];return r?{...t,targetWeight:N(r.suggestedWeight,t.targetWeight),targetReps:N(r.suggestedReps,t.targetReps)}:t}let[i,n]=t.exercises,a=(r=e[i.name])?{...i,targetWeight:N(r.suggestedWeight,i.targetWeight),targetReps:N(r.suggestedReps,i.targetReps)}:i,l=(s=e[n.name])?{...n,targetWeight:N(s.suggestedWeight,n.targetWeight),targetReps:N(s.suggestedReps,n.targetReps)}:n;return{...t,exercises:[a,l]}})},r=j??(null!==C?String(C):null);(0,d.saveSessionWorkout)(t,r)},[C,j,I]),eh=(0,r.useMemo)(()=>{if(!I)return{};let e={};for(let t of I.exercises)if(t.type===m.EXERCISE_TYPES.single)e[t.name]={weight:t.targetWeight,reps:t.targetReps};else{let[r,s]=t.exercises;e[r.name]={weight:r.targetWeight,reps:r.targetReps},e[s.name]={weight:s.targetWeight,reps:s.targetReps}}return e},[I]),eg=(0,r.useMemo)(()=>{let e={...eh};if(x)for(let[t,r]of Object.entries(X)){let s=e[t]||{};e[t]={weight:r.suggestedWeight??s.weight??null,reps:r.suggestedReps??s.reps??null}}return e},[eh,x,X]),ep=(0,r.useMemo)(()=>{if(!I)return[];let e=[];for(let t of I.exercises)if(t.type===m.EXERCISE_TYPES.single)e.push(t.name);else{let[r,s]=t.exercises;e.push(r.name,s.name)}return e},[I]);(0,r.useEffect)(()=>{!async function(){try{let t=a.get("routineId"),r=decodeURIComponent(e.name),s=(0,h.loadWorkoutBootstrapCache)({workoutName:r,routineId:t});if(s){R(s.workout),ee(s.lastSetSummaries||{}),er(S(s.lastSetSummaries||{})),ei(s.lastWorkoutReport??null),ed((0,u.normalizeWeightUnit)(s.settings?.weightUnit)),eu((0,u.normalizeHeightUnit)(s.settings?.heightUnit)),t?(z(parseInt(t)),k(!0)):s.routineMeta?.id&&z(s.routineMeta.id??null),T(!1);return}let i=`/api/workout/${e.name}?bootstrap=1`;t&&(i+=`&routineId=${t}`,z(parseInt(t)),k(!0));let n=await fetch(i);if(!n.ok)throw Error("Workout not found");let l=await n.json(),o={workout:l.workout,settings:l.settings,lastSetSummaries:l.lastSetSummaries||{},lastWorkoutReport:l.lastWorkoutReport||null,routineMeta:l.routineMeta};if(R(o.workout),ee(o.lastSetSummaries),er(S(o.lastSetSummaries)),ei(o.lastWorkoutReport),ed((0,u.normalizeWeightUnit)(o.settings?.weightUnit)),eu((0,u.normalizeHeightUnit)(o.settings?.heightUnit)),!t&&o.routineMeta?.id&&z(o.routineMeta.id??null),(0,h.saveWorkoutBootstrapCache)({workoutName:r,routineId:t??(o.routineMeta?.id?String(o.routineMeta.id):null),payload:o}),!t&&!o.routineMeta?.id){let e=await fetch("/api/routines"),t=(await e.json()).routines.find(e=>e.name===r);t&&z(t.id)}}catch(e){console.error("Error fetching workout:",e)}finally{T(!1)}}()},[e.name,a]);let ef=async()=>{if(!I)return{targets:{},narrative:{encouragement:null,goalSummary:null,trendSummary:null}};let e={},{weight:t,reps:r}=v===m.SESSION_MODES.maintenance?{weight:.85,reps:.85}:v===m.SESSION_MODES.light?{weight:.6,reps:.6}:{weight:1.05,reps:1.05},s={up:0,down:0,flat:0,newData:0},i=e=>{if(!Q[e.name]){s.newData+=1;return}s.flat+=1},n=s=>{let i=Q[s.name],{maxWeight:n,repsAtMax:a,maxReps:l}=f(i),o=s.targetWeight,c=s.targetReps,d=!!s.isBodyweight,u=!!s.isMachine,x=!!i&&(null!==n||null!==l),h=null,g=null,b=null;if(d)g=Math.max(1,p((l??c)*r)),b=x?`Default target uses ${Math.round(100*r)}% of your latest session max reps.`:"Default target uses your routine baseline until more history is logged.";else{var S;let e=Number.isFinite(S=(n??o)*t)?2.5*Math.ceil(S/2.5):0,s=p((a??l??c)*(v===m.SESSION_MODES.progress?1:r)),i=!u||null!==n&&n>0;h=i?Math.max(0,e):null,g=Math.max(1,s);let d=v===m.SESSION_MODES.progress?"max reps at your max weight":`${Math.round(100*r)}% of your max reps`;b=x?i?`Default target uses ${Math.round(100*t)}% of your latest session max weight and ${d}.`:`Default target uses ${d}; add weight when you feel ready.`:"Default target uses your routine baseline until more history is logged."}e[s.name]={suggestedWeight:h,suggestedReps:g,rationale:b}};for(let e of I.exercises)if(e.type===m.EXERCISE_TYPES.single)n(e),i(e);else{let[t,r]=e.exercises;n(t),n(r),i(t),i(r)}return{targets:e,narrative:y(v,I.name,ep,s)}};(0,r.useEffect)(()=>{if(!L)return void eo("...");let e=[".","..","..."],t=0;eo(e[0]);let r=window.setInterval(()=>{t=(t+1)%e.length,eo(e[t])},500);return()=>window.clearInterval(r)},[L]),(0,r.useEffect)(()=>{ea(!1)},[I?.name]),(0,r.useEffect)(()=>{x&&I&&0!==Object.keys(X).length&&ex(X)},[ex,x,X,I]),(0,r.useEffect)(()=>{if(!I||!x||!v)return;let e=!0,t=new AbortController;return(async()=>{B(!0),V(null),H({}),K({encouragement:null,goalSummary:null,trendSummary:null}),Z(null);let r=j??(null!==C?String(C):null);(0,d.saveSessionTargetsMeta)(I.name,r,null);let s=[];for(let e of I.exercises)if(e.type===m.EXERCISE_TYPES.single)s.push({name:e.name,type:m.EXERCISE_TYPES.single,sets:e.sets,targetWeight:e.targetWeight,targetReps:e.targetReps,warmupWeight:e.warmupWeight,isBodyweight:e.isBodyweight,isMachine:e.isMachine});else{let[t,r]=e.exercises;s.push({name:t.name,type:m.EXERCISE_TYPES.b2b,sets:t.sets,targetWeight:t.targetWeight,targetReps:t.targetReps,warmupWeight:t.warmupWeight,isBodyweight:t.isBodyweight,isMachine:t.isMachine}),s.push({name:r.name,type:m.EXERCISE_TYPES.b2b,sets:r.sets,targetWeight:r.targetWeight,targetReps:r.targetReps,warmupWeight:r.warmupWeight,isBodyweight:r.isBodyweight,isMachine:r.isMachine})}try{let i=await fetch("/api/workout-targets",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({workoutName:I.name,sessionMode:v,exercises:s}),signal:t.signal});if(!e)return;if(!i.ok){let e=await i.text();throw Error(e||"Failed to load targets")}let n=await i.json(),a={};for(let e of n?.targets||[])e?.name&&(a[e.name]={suggestedWeight:e.suggestedWeight??null,suggestedReps:e.suggestedReps??null,rationale:e.rationale??null});if(0===Object.keys(a).length)throw Error("No targets returned");H(a);let l={encouragement:b(n?.encouragement),goalSummary:b(n?.goalSummary),trendSummary:b(n?.trendSummary)},o=l.encouragement||l.goalSummary||l.trendSummary?l:y(v,I.name,ep,{up:0,down:0,flat:0,newData:ep.length});K(o),Z("ai"),(0,d.saveSessionTargetsMeta)(I.name,r,{encouragement:o.encouragement,goalSummary:o.goalSummary,trendSummary:o.trendSummary,source:"ai",sessionMode:v}),B(!1)}catch(s){if(!e)return;console.error("AI-trainer targets failed:",s);let t=s instanceof Error?s.message:"AI-trainer request failed.";try{let s=await ef();if(!e)return;H(s.targets),K(s.narrative),Z("fallback"),(0,d.saveSessionTargetsMeta)(I.name,r,{encouragement:s.narrative.encouragement,goalSummary:s.narrative.goalSummary,trendSummary:s.narrative.trendSummary,source:"fallback",sessionMode:v}),V(`AI-trainer error: ${t}. Using default targets for now; we should root-cause this.`)}catch(r){if(!e)return;Z("fallback"),V(`AI-trainer error: ${t}. Fallback targets also failed; we should root-cause this.`)}finally{B(!1)}}})(),()=>{e=!1,t.abort()}},[I,x,v]);let eb=async()=>{if(C){D(!0);try{if(!(await fetch(`/api/routines/${C}`,{method:"DELETE"})).ok)throw Error("Failed to delete routine");n.push("/routines")}catch(e){console.error("Error deleting routine:",e),alert("Failed to delete routine. Please try again."),D(!1)}}},eS=e=>{Y(e),P(!0)},ey=t=>{let r=new URLSearchParams(a.toString());r.set("preview","1"),r.set("mode",t),n.replace(`/workout/${encodeURIComponent(e.name)}?${r.toString()}`)};return _?(0,t.jsx)("div",{className:"min-h-screen bg-zinc-900 flex items-center justify-center p-4",children:(0,t.jsx)("div",{className:"text-white text-2xl",children:"Loading workout..."})}):I?x&&!v?(0,t.jsx)("div",{className:"min-h-screen bg-zinc-900 p-4",children:(0,t.jsx)("div",{className:"max-w-xl mx-auto",children:(0,t.jsxs)("div",{className:"mt-8 bg-zinc-800 border border-zinc-700 rounded-lg p-6",children:[(0,t.jsx)("div",{className:"text-zinc-400 text-sm mb-2",children:"Before you preview"}),(0,t.jsx)("h1",{className:"text-3xl font-bold text-white mb-3",children:"How are you feeling today?"}),(0,t.jsx)("p",{className:"text-zinc-400 mb-6",children:"Pick the vibe for this session so we can set targets for today."}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("button",{onClick:()=>ey(m.SESSION_MODES.progress),className:"w-full text-left bg-emerald-700/80 hover:bg-emerald-600 text-white px-4 py-4 rounded-lg font-semibold transition-colors",children:["Progress",(0,t.jsx)("div",{className:"text-emerald-200 text-sm font-normal",children:"Push for some wins today."})]}),(0,t.jsxs)("button",{onClick:()=>ey(m.SESSION_MODES.maintenance),className:"w-full text-left bg-blue-700/70 hover:bg-blue-600 text-white px-4 py-4 rounded-lg font-semibold transition-colors",children:["Maintenance",(0,t.jsx)("div",{className:"text-blue-200 text-sm font-normal",children:"Hold steady and keep the groove."})]}),(0,t.jsxs)("button",{onClick:()=>ey(m.SESSION_MODES.light),className:"w-full text-left bg-zinc-700 hover:bg-zinc-600 text-white px-4 py-4 rounded-lg font-semibold transition-colors",children:["Light",(0,t.jsx)("div",{className:"text-zinc-300 text-sm font-normal",children:"Deload or just move a bit."})]})]})]})})}):(0,t.jsxs)("div",{className:"min-h-screen bg-zinc-900 p-4 pb-32",children:[(0,t.jsxs)("div",{className:"max-w-2xl mx-auto",children:[(0,t.jsxs)("div",{className:"mb-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,t.jsx)(i.default,{href:"/routines",className:"text-blue-400 hover:text-blue-300",children:"â† Back to routines"}),C&&!O&&!x&&(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)(i.default,{href:`/routines/${C}/edit`,className:"bg-blue-900/50 hover:bg-blue-900 text-blue-300 hover:text-blue-100 px-4 py-2 rounded text-sm font-semibold transition-colors",children:"Edit Routine"}),(0,t.jsx)("button",{onClick:()=>{W(!0)},className:"bg-red-900/50 hover:bg-red-900 text-red-300 hover:text-red-100 px-4 py-2 rounded text-sm font-semibold transition-colors",children:"Delete Routine"})]})]}),(0,t.jsx)("h1",{className:"text-4xl font-bold text-white",children:I.name})]}),x&&(0,t.jsx)("section",{className:"mb-8",children:(0,t.jsx)(o.Card,{paddingClassName:"p-5",borderClassName:"border-emerald-600",children:(0,t.jsxs)("div",{className:"flex items-start justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-emerald-400 text-xs mb-1",children:"Session Type"}),(0,t.jsx)("div",{className:"text-white text-lg font-semibold",children:m.SESSION_MODE_LABELS[M]}),(0,t.jsx)("div",{className:"text-zinc-400 text-sm mt-1",children:m.SESSION_MODE_DESCRIPTIONS[M]})]}),(0,t.jsx)("button",{onClick:()=>{let t=new URLSearchParams(a.toString());t.delete("mode"),t.set("preview","1"),n.replace(`/workout/${encodeURIComponent(e.name)}?${t.toString()}`)},className:"text-xs text-emerald-300 hover:text-emerald-200 bg-zinc-900 px-3 py-2 rounded",children:"Change"})]})})}),x&&(0,t.jsxs)("section",{className:"mb-8",children:[(0,t.jsx)(o.SectionHeader,{icon:"ðŸŽ¯",iconClassName:"text-amber-400",label:"AI-Trainer Targets",className:"text-2xl"}),(0,t.jsxs)(o.Card,{paddingClassName:"p-5",borderClassName:"border-amber-600",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between gap-4",children:[(0,t.jsx)("p",{className:"text-zinc-200 font-semibold",children:L?`Loading AI-trainer targets${el}`:"fallback"===q?"AI-trainer unavailable. Using formula-based targets for this session.":"AI-trainer targets ready."}),L&&(0,t.jsx)("div",{className:"text-xs text-amber-300 bg-zinc-900 px-3 py-2 rounded",children:"Building your session plan"})]}),!L&&(J.encouragement||J.goalSummary||J.trendSummary)&&(0,t.jsxs)("div",{className:"mt-3 space-y-2 text-sm text-zinc-300 leading-relaxed",children:[J.encouragement&&(0,t.jsx)("p",{children:J.encouragement}),J.goalSummary&&(0,t.jsx)("p",{children:J.goalSummary}),J.trendSummary&&(0,t.jsx)("p",{children:J.trendSummary})]})]}),!L&&es&&(0,t.jsxs)("div",{className:"mt-4",children:[(0,t.jsx)("button",{type:"button",onClick:()=>ea(e=>!e),className:"text-xs text-amber-300 hover:text-amber-200 bg-zinc-900 px-3 py-2 rounded",children:en?"Hide last session report":"View last session report"}),en&&(0,t.jsx)("div",{className:"mt-3 bg-zinc-900 rounded p-3 text-zinc-300 text-sm whitespace-pre-line border border-amber-700/40",children:es})]}),(0,t.jsxs)("p",{className:"text-zinc-400 text-sm mt-3",children:["Targets are generated with your"," ",(0,t.jsx)(i.default,{href:"/profile",className:"text-amber-300 hover:text-amber-200 underline",children:"background and fitness goals"})," ","and your"," ",(0,t.jsx)("button",{type:"button",onClick:()=>eS(ep),className:"text-amber-300 hover:text-amber-200 underline",children:"exercise history"}),"."]}),G&&(0,t.jsx)("div",{className:"text-red-400 text-sm mt-3",children:G})]}),(0,t.jsxs)("section",{className:"mb-8",children:[(0,t.jsx)(o.SectionHeader,{icon:"ðŸŸ¢",iconClassName:"text-green-500",label:"Pre-Workout Stretches",className:"text-2xl"}),(0,t.jsx)("div",{className:"text-zinc-400 text-sm mb-4",children:"Dynamic stretches Â· 5-8 minutes"}),(0,t.jsx)("div",{className:"grid grid-cols-2 gap-3",children:I.preWorkoutStretches.map((e,r)=>(0,t.jsx)(E,{stretch:e,index:r},r))})]}),(0,t.jsxs)("section",{className:"mb-8",children:[(0,t.jsx)(o.SectionHeader,{icon:"ðŸ”¥",iconClassName:"text-orange-500",label:"Exercises",className:"text-2xl"}),(0,t.jsxs)("div",{className:"text-zinc-400 text-sm mb-4",children:[I.exercises.length," exercises"]}),(0,t.jsx)("div",{className:"space-y-4",children:I.exercises.map((e,r)=>(0,t.jsx)(w,{exercise:e,index:r,onShowHistory:eS,targets:X,showTargets:x,lastSessionMaxes:et,weightUnit:ec,heightUnit:em},r))})]}),I.cardio&&(0,t.jsxs)("section",{className:"mb-8",children:[(0,t.jsx)(o.SectionHeader,{icon:"â¤ï¸",iconClassName:"text-red-500",label:"Cardio (Optional)",className:"text-2xl"}),(0,t.jsxs)(o.Card,{paddingClassName:"p-5",borderClassName:"border-red-600",children:[(0,t.jsx)("div",{className:"flex items-start justify-between mb-3",children:(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("h3",{className:"text-xl font-bold text-white mb-2",children:I.cardio.type}),(0,t.jsx)("div",{className:"text-blue-400 text-lg mb-1",children:I.cardio.duration}),(0,t.jsx)("div",{className:"text-zinc-400 text-sm",children:I.cardio.intensity})]})}),(0,t.jsxs)("div",{className:"bg-zinc-900 rounded p-3",children:[(0,t.jsx)("div",{className:"text-zinc-500 text-xs mb-1",children:"Tips"}),(0,t.jsx)("p",{className:"text-zinc-300 text-sm",children:I.cardio.tips})]})]})]}),(0,t.jsxs)("section",{className:"mb-8",children:[(0,t.jsx)(o.SectionHeader,{icon:"ðŸ”µ",iconClassName:"text-blue-500",label:"Post-Workout Stretches",className:"text-2xl"}),(0,t.jsx)("div",{className:"text-zinc-400 text-sm mb-4",children:"Static stretches Â· 8-10 minutes"}),(0,t.jsx)("div",{className:"grid grid-cols-2 gap-3",children:I.postWorkoutStretches.map((e,r)=>(0,t.jsx)(E,{stretch:e,index:r},r))})]}),(0,t.jsx)(o.BottomActionBar,{maxWidthClassName:"max-w-2xl",children:(0,t.jsx)("button",{onClick:()=>{let e=new URLSearchParams;C&&e.set("routineId",String(C));let t=e.toString();(0,l.initWorkoutSession)(I.name,C);let r=`/stretches/${encodeURIComponent(I.name)}${t?`?${t}`:""}`;n.push(r)},className:"w-full bg-green-600 hover:bg-green-700 text-white py-4 rounded-lg text-xl font-bold transition-colors",children:"Start Workout"})})]}),$&&(0,t.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center p-4 z-50",children:(0,t.jsxs)("div",{className:"bg-zinc-800 rounded-lg p-6 max-w-md w-full border-2 border-red-600",children:[(0,t.jsx)("h2",{className:"text-2xl font-bold text-white mb-4",children:"Delete Routine"}),(0,t.jsx)("p",{className:"text-zinc-300 mb-6",children:"This will permanently delete this routine. Are you sure you want to proceed?"}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,t.jsx)("button",{onClick:()=>{W(!1)},disabled:U,className:"bg-zinc-700 hover:bg-zinc-600 disabled:bg-zinc-800 disabled:cursor-not-allowed text-white py-3 rounded-lg font-semibold transition-colors",children:"Cancel"}),(0,t.jsx)("button",{onClick:eb,disabled:U,className:"bg-red-600 hover:bg-red-700 disabled:bg-red-800 disabled:cursor-not-allowed text-white py-3 rounded-lg font-bold transition-colors",children:U?"Deleting...":"Delete"})]})]})}),(0,t.jsx)(c.default,{open:A,onClose:()=>{P(!1),Y([])},exerciseNames:F,title:"Exercise History",targets:eg,weightUnit:ec,heightUnit:em})]}):(0,t.jsx)("div",{className:"min-h-screen bg-zinc-900 flex items-center justify-center p-4",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"text-white text-2xl mb-4",children:"Workout not found"}),(0,t.jsx)(i.default,{href:"/routines",className:"text-blue-400 hover:text-blue-300",children:"Back to routines"})]})})}function E({stretch:e,index:r}){let s=(0,n.getFormTips)(e.tips),i=(0,n.getVideoUrl)(e.name,e.videoUrl);return(0,t.jsxs)("div",{className:"bg-zinc-800 rounded-lg p-3 border border-zinc-700",children:[(0,t.jsxs)("div",{className:"text-zinc-500 text-xs mb-1",children:["#",r+1]}),(0,t.jsx)("h3",{className:"text-sm font-semibold text-white mb-1",children:e.name}),(0,t.jsx)("div",{className:"text-blue-400 text-xs mb-2",children:(0,a.formatStretchTimer)(e.timerSeconds)}),(0,t.jsx)("p",{className:"text-zinc-400 text-xs mb-2 leading-relaxed",children:s}),(0,t.jsx)("a",{href:i,target:"_blank",rel:"noopener noreferrer",className:"text-red-500 hover:text-red-400 text-xs font-medium px-2 py-1 bg-zinc-900 rounded inline-block",children:"ðŸ“º Video"})]})}function v({baseWeight:e,baseReps:r,suggestion:s,isBodyweight:i,isMachine:n,primaryMetric:a,metricUnit:l,weightUnit:o,heightUnit:c,lastSession:d}){let m={primaryMetric:(0,x.resolvePrimaryMetric)(a,i),metricUnit:l??null},u=s?.suggestedWeight??e,h=s?.suggestedReps??r,g=d?.weight??null,p=d?.reps??null,f=null!==g?u-g:null,b=null!==p?h-p:null,S=!(0,x.isRepsOnlyMetric)(m.primaryMetric),y=(0,x.getMetricLabel)(m.primaryMetric,m.metricUnit,o,c,n),N=[];S?(null!==g&&N.push((0,x.formatMetricDisplay)(g,m.primaryMetric,m.metricUnit,o,c,n)),null!==p&&N.push(`${p} reps`)):null!==p?N.push(`${p} reps`):null!==g&&N.push((0,x.formatMetricDisplay)(g,m.primaryMetric,m.metricUnit,o,c,n));let j=N.join(" Â· "),E=e=>`${e>0?"+":""}${e}`,v=e=>e>0?"text-emerald-300":"text-amber-300";return(0,t.jsxs)("div",{className:"bg-zinc-900 rounded p-3 border border-emerald-800",children:[(0,t.jsx)("div",{className:"text-emerald-400 text-xs mb-2",children:"Today's target"}),(0,t.jsxs)("div",{className:`grid ${S?"grid-cols-2":"grid-cols-1"} gap-3`,children:[S&&(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-zinc-500 text-xs mb-1",children:y}),(0,t.jsxs)("div",{className:"text-white font-semibold text-lg",children:[(0,x.formatMetricDisplay)(u,m.primaryMetric,m.metricUnit,o,c,n),null!==f&&0!==f&&(0,t.jsxs)("span",{className:`ml-2 text-sm ${v(f)}`,children:["(",E(f),")"]})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-zinc-500 text-xs mb-1",children:"Reps"}),(0,t.jsxs)("div",{className:"text-white font-semibold text-lg",children:[h,null!==b&&0!==b&&(0,t.jsxs)("span",{className:`ml-2 text-sm ${v(b)}`,children:["(",E(b),")"]})]})]})]}),j&&(0,t.jsxs)("div",{className:"text-zinc-500 text-xs mt-2",children:["Last time max: ",j]}),s?.rationale&&(0,t.jsx)("div",{className:"text-zinc-400 text-xs mt-2",children:s.rationale})]})}function w({exercise:e,index:r,onShowHistory:s,targets:i,showTargets:a,lastSessionMaxes:l,weightUnit:o,heightUnit:c}){if(e.type===m.EXERCISE_TYPES.single){let d=(0,n.getFormTips)(e.tips),m=(0,n.getVideoUrl)(e.name,e.videoUrl),u={primaryMetric:(0,x.resolvePrimaryMetric)(e.primaryMetric,e.isBodyweight),metricUnit:e.metricUnit??null},h=!(0,x.isRepsOnlyMetric)(u.primaryMetric),g=!!e.isMachine,p=(0,x.getMetricLabel)(u.primaryMetric,u.metricUnit,o,c,g),f=h&&"weight"===u.primaryMetric&&(e.hasWarmup??!e.isBodyweight);return(0,t.jsxs)("div",{className:"bg-zinc-800 rounded-lg p-5 border-2 border-zinc-700",children:[(0,t.jsxs)("div",{className:"flex items-start justify-between mb-3",children:[(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsxs)("div",{className:"text-zinc-500 text-sm mb-1",children:["Exercise #",r+1]}),(0,t.jsx)("h3",{className:"text-xl font-bold text-white mb-2",children:e.name})]}),(0,t.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,t.jsx)("a",{href:m,target:"_blank",rel:"noopener noreferrer",className:"text-red-500 hover:text-red-400 text-sm font-medium px-3 py-2 bg-zinc-900 rounded text-center",children:"ðŸ“º Video"}),(0,t.jsx)("button",{onClick:()=>s([e.name]),className:"text-blue-300 hover:text-blue-200 text-sm font-medium px-3 py-2 bg-zinc-900 rounded",children:"ðŸ“ˆ History"})]})]}),(0,t.jsxs)("div",{className:"space-y-2 mb-3",children:[h&&(0,t.jsxs)("div",{className:`grid ${f?"grid-cols-2":"grid-cols-1"} gap-3`,children:[f&&(0,t.jsxs)("div",{className:"bg-green-950 border border-green-800 rounded p-3",children:[(0,t.jsxs)("div",{className:"text-green-400 text-xs mb-1",children:["Warmup ",p]}),(0,t.jsx)("div",{className:"text-green-300 font-bold text-2xl",children:(0,x.formatMetricDisplay)(e.warmupWeight,u.primaryMetric,u.metricUnit,o,c,g)})]}),(0,t.jsxs)("div",{className:"bg-orange-950 border border-orange-800 rounded p-3",children:[(0,t.jsxs)("div",{className:"text-orange-400 text-xs mb-1",children:["Target ",p]}),(0,t.jsx)("div",{className:"text-orange-300 font-bold text-2xl",children:(0,x.formatMetricDisplay)(e.targetWeight,u.primaryMetric,u.metricUnit,o,c,g)})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,t.jsxs)("div",{className:"bg-zinc-900 rounded p-3",children:[(0,t.jsx)("div",{className:"text-zinc-500 text-xs mb-1",children:"Rest Time"}),(0,t.jsxs)("div",{className:"text-white font-semibold text-2xl",children:[e.restTime,"s"]})]}),(0,t.jsxs)("div",{className:"bg-zinc-900 rounded p-3",children:[(0,t.jsx)("div",{className:"text-zinc-500 text-xs mb-1",children:"Sets Ã— Reps"}),(0,t.jsxs)("div",{className:"text-white font-semibold text-2xl",children:[e.sets," Ã— ",e.targetReps]})]})]})]}),a&&(0,t.jsx)(v,{baseWeight:e.targetWeight,baseReps:e.targetReps,suggestion:i[e.name],isBodyweight:e.isBodyweight,isMachine:e.isMachine,primaryMetric:e.primaryMetric,metricUnit:e.metricUnit,weightUnit:o,heightUnit:c,lastSession:l[e.name]}),(0,t.jsxs)("div",{className:"bg-zinc-900 rounded p-3",children:[(0,t.jsx)("div",{className:"text-zinc-500 text-xs mb-1",children:"Form Tips"}),(0,t.jsx)("p",{className:"text-zinc-300 text-sm",children:d})]})]})}let[d,u]=e.exercises,h=(0,n.getFormTips)(d.tips),g=(0,n.getFormTips)(u.tips),p=(0,n.getVideoUrl)(d.name,d.videoUrl),f=(0,n.getVideoUrl)(u.name,u.videoUrl),b={primaryMetric:(0,x.resolvePrimaryMetric)(d.primaryMetric,d.isBodyweight),metricUnit:d.metricUnit??null},S={primaryMetric:(0,x.resolvePrimaryMetric)(u.primaryMetric,u.isBodyweight),metricUnit:u.metricUnit??null},y=!(0,x.isRepsOnlyMetric)(b.primaryMetric),N=!(0,x.isRepsOnlyMetric)(S.primaryMetric),j=!!d.isMachine,E=!!u.isMachine,w=(0,x.getMetricLabel)(b.primaryMetric,b.metricUnit,o,c,j),M=(0,x.getMetricLabel)(S.primaryMetric,S.metricUnit,o,c,E),I=y&&"weight"===b.primaryMetric&&(d.hasWarmup??!d.isBodyweight),R=N&&"weight"===S.primaryMetric&&(u.hasWarmup??!u.isBodyweight);return(0,t.jsxs)("div",{className:"bg-zinc-800 rounded-lg p-5 border-2 border-purple-700",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,t.jsxs)("div",{className:"text-purple-400 text-sm font-bold",children:["ðŸ”„ B2B SUPERSET Â· Exercise #",r+1]}),(0,t.jsx)("button",{onClick:()=>s([d.name,u.name]),className:"text-blue-300 hover:text-blue-200 text-xs font-semibold px-3 py-2 bg-zinc-900 rounded",children:"ðŸ“ˆ History"})]}),(0,t.jsxs)("div",{className:"mb-3",children:[(0,t.jsxs)("div",{className:"flex items-start justify-between mb-3",children:[(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("div",{className:"text-zinc-500 text-xs mb-1",children:"Exercise 1 of 2"}),(0,t.jsx)("h3",{className:"text-lg font-bold text-white mb-2",children:d.name})]}),(0,t.jsx)("a",{href:p,target:"_blank",rel:"noopener noreferrer",className:"text-red-500 hover:text-red-400 text-sm font-medium px-3 py-2 bg-zinc-900 rounded",children:"ðŸ“º Video"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[y&&(0,t.jsxs)("div",{className:`grid ${I?"grid-cols-2":"grid-cols-1"} gap-2`,children:[I&&(0,t.jsxs)("div",{className:"bg-green-950 border border-green-800 rounded p-2",children:[(0,t.jsxs)("div",{className:"text-green-400 text-xs mb-1",children:["Warmup ",w]}),(0,t.jsx)("div",{className:"text-green-300 font-bold text-xl",children:(0,x.formatMetricDisplay)(d.warmupWeight,b.primaryMetric,b.metricUnit,o,c,j)})]}),(0,t.jsxs)("div",{className:"bg-orange-950 border border-orange-800 rounded p-2",children:[(0,t.jsxs)("div",{className:"text-orange-400 text-xs mb-1",children:["Target ",w]}),(0,t.jsx)("div",{className:"text-orange-300 font-bold text-xl",children:(0,x.formatMetricDisplay)(d.targetWeight,b.primaryMetric,b.metricUnit,o,c,j)})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,t.jsxs)("div",{className:"bg-zinc-900 rounded p-2",children:[(0,t.jsx)("div",{className:"text-zinc-500 text-xs mb-1",children:"Sets Ã— Reps"}),(0,t.jsxs)("div",{className:"text-white font-semibold text-xl",children:[d.sets," Ã— ",d.targetReps]})]}),(0,t.jsxs)("div",{className:"bg-zinc-900 rounded p-2",children:[(0,t.jsx)("div",{className:"text-zinc-500 text-xs mb-1",children:"Form Tips"}),(0,t.jsx)("p",{className:"text-zinc-400 text-xs",children:h})]})]})]}),a&&(0,t.jsx)("div",{className:"mt-2",children:(0,t.jsx)(v,{baseWeight:d.targetWeight,baseReps:d.targetReps,suggestion:i[d.name],isBodyweight:d.isBodyweight,isMachine:d.isMachine,primaryMetric:d.primaryMetric,metricUnit:d.metricUnit,weightUnit:o,heightUnit:c,lastSession:l[d.name]})})]}),(0,t.jsx)("div",{className:"my-4",children:(0,t.jsx)("div",{className:"bg-purple-950 border-2 border-purple-700 rounded-lg p-4",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"text-purple-400 text-sm mb-1",children:"Rest Between Exercises"}),(0,t.jsxs)("div",{className:"text-purple-300 font-bold text-3xl",children:[e.restTime,"s"]})]})})}),(0,t.jsxs)("div",{className:"mt-3",children:[(0,t.jsxs)("div",{className:"flex items-start justify-between mb-3",children:[(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("div",{className:"text-zinc-500 text-xs mb-1",children:"Exercise 2 of 2"}),(0,t.jsx)("h3",{className:"text-lg font-bold text-white mb-2",children:u.name})]}),(0,t.jsx)("a",{href:f,target:"_blank",rel:"noopener noreferrer",className:"text-red-500 hover:text-red-400 text-sm font-medium px-3 py-2 bg-zinc-900 rounded",children:"ðŸ“º Video"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[N&&(0,t.jsxs)("div",{className:`grid ${R?"grid-cols-2":"grid-cols-1"} gap-2`,children:[R&&(0,t.jsxs)("div",{className:"bg-green-950 border border-green-800 rounded p-2",children:[(0,t.jsxs)("div",{className:"text-green-400 text-xs mb-1",children:["Warmup ",M]}),(0,t.jsx)("div",{className:"text-green-300 font-bold text-xl",children:(0,x.formatMetricDisplay)(u.warmupWeight,S.primaryMetric,S.metricUnit,o,c,E)})]}),(0,t.jsxs)("div",{className:"bg-orange-950 border border-orange-800 rounded p-2",children:[(0,t.jsxs)("div",{className:"text-orange-400 text-xs mb-1",children:["Target ",M]}),(0,t.jsx)("div",{className:"text-orange-300 font-bold text-xl",children:(0,x.formatMetricDisplay)(u.targetWeight,S.primaryMetric,S.metricUnit,o,c,E)})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,t.jsxs)("div",{className:"bg-zinc-900 rounded p-2",children:[(0,t.jsx)("div",{className:"text-zinc-500 text-xs mb-1",children:"Sets Ã— Reps"}),(0,t.jsxs)("div",{className:"text-white font-semibold text-xl",children:[u.sets," Ã— ",u.targetReps]})]}),(0,t.jsxs)("div",{className:"bg-zinc-900 rounded p-2",children:[(0,t.jsx)("div",{className:"text-zinc-500 text-xs mb-1",children:"Form Tips"}),(0,t.jsx)("p",{className:"text-zinc-400 text-xs",children:g})]})]})]}),a&&(0,t.jsx)("div",{className:"mt-2",children:(0,t.jsx)(v,{baseWeight:u.targetWeight,baseReps:u.targetReps,suggestion:i[u.name],isBodyweight:u.isBodyweight,isMachine:u.isMachine,primaryMetric:u.primaryMetric,metricUnit:u.metricUnit,weightUnit:o,heightUnit:c,lastSession:l[u.name]})})]})]})}e.s(["default",()=>j])}]);