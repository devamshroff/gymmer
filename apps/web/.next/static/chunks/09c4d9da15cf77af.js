(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,20970,e=>{"use strict";function t(e,t){let s=encodeURIComponent(e),r=t?encodeURIComponent(t):"default";return`workout_bootstrap:${s}:${r}`}function s(e){return`routine_edit_version:${e}`}function r(e){if(null==e)return null;let t=s(`id:${e}`);return localStorage.getItem(t)??"0"}function n(e){if(!e)return null;let t=s(`name:${encodeURIComponent(e)}`);return localStorage.getItem(t)??"0"}function o(e){let{workoutName:s,routineId:o}=e,i=[t(s,o)];for(let e of(o&&i.push(t(s,null)),i)){let t=sessionStorage.getItem(e);if(t)try{let i=JSON.parse(t);if(!function(e,t,s){let o=r(s);if(e.editVersionId&&o&&e.editVersionId!==o)return!1;let i=n(t);return!e.editVersionName||!i||e.editVersionName===i}(i,s,o)){sessionStorage.removeItem(e);continue}return i}catch(t){console.error("Failed to parse workout bootstrap cache:",t),sessionStorage.removeItem(e)}}return null}function i(e){let{workoutName:s,routineId:o,payload:i}=e,l=JSON.stringify({...i,cachedAt:new Date().toISOString(),editVersionId:r(o),editVersionName:n(s)});sessionStorage.setItem(t(s,o),l),o&&sessionStorage.setItem(t(s,null),l)}function l(e){let r;r=String(Date.now()),null!==e.routineId&&void 0!==e.routineId&&localStorage.setItem(s(`id:${e.routineId}`),r),e.routineName&&localStorage.setItem(s(`name:${encodeURIComponent(e.routineName)}`),r),e.routineName&&function(e){let{workoutName:s,routineId:r}=e;sessionStorage.removeItem(t(s,r)),r&&sessionStorage.removeItem(t(s,null))}({workoutName:e.routineName,routineId:e.routineId?String(e.routineId):null})}e.s(["invalidateWorkoutBootstrapCache",()=>l,"loadWorkoutBootstrapCache",()=>o,"saveWorkoutBootstrapCache",()=>i])},78806,e=>{"use strict";let t=["lower body compound","upper body compound","full body compound","chest","back","shoulders","biceps","triceps","forearms","core","lower back","glutes","quads","hamstrings","calves","hip flexors","adductors","abductors","unknown"],s=[...t],r=[...t],n=[...s];function o(e,t,s=2){if(!e)return[];try{let r=JSON.parse(e);return function(e,t,s=2){let r=Array.isArray(e)?e:"string"==typeof e?[e]:[];if(0===r.length)return[];let n=r.map(e=>"string"==typeof e?e.trim().toLowerCase():"").filter(Boolean),o=t?n.filter(e=>t.includes(e)):n,i=[];for(let e of o)if(i.includes(e)||i.push(e),i.length>=s)break;return i}(r,t,s)}catch{return[]}}function i(e){return e.split(" ").map(e=>e?e[0].toUpperCase()+e.slice(1):e).join(" ")}e.s(["MUSCLE_GROUP_ORDER",0,r,"MUSCLE_GROUP_TAGS",0,t,"STRETCH_MUSCLE_ORDER",0,n,"STRETCH_MUSCLE_TAGS",0,s,"formatTypeLabel",()=>i,"parseTagJson",()=>o])},85064,e=>{"use strict";function t(e){if(!e||e<=0)return"Timer not set";let t=Math.floor(e/60),s=e%60;return t>0&&0===s?`${t} min`:t>0?`${t} min ${s} sec`:`${e} sec`}e.s(["formatStretchTimer",()=>t])},96388,e=>{"use strict";var t=e.i(43476),s=e.i(71645),r=e.i(78806);function n({onSubmit:e,onCancel:n}){let[o,i]=(0,s.useState)(""),[l,a]=(0,s.useState)(""),[c,u]=(0,s.useState)(""),[d,m]=(0,s.useState)(""),[h,x]=(0,s.useState)([]),[g,b]=(0,s.useState)(!1),f=async t=>{if(t.preventDefault(),!o.trim())return;let s=l.trim(),r=s?Number(s):NaN,n=Number.isFinite(r)&&r>0?Math.round(r):void 0,i=h.map(e=>e.trim()).filter(Boolean);b(!0);try{await e({name:o.trim(),timerSeconds:n,videoUrl:c.trim()||void 0,tips:d.trim()||void 0,muscleGroups:i.length?i:void 0})}finally{b(!1)}};return(0,t.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center p-4 z-50",children:(0,t.jsxs)("div",{className:"bg-zinc-800 rounded-lg p-6 max-w-md w-full border-2 border-blue-700",children:[(0,t.jsx)("h2",{className:"text-2xl font-bold text-white mb-4",children:"Create New Stretch"}),(0,t.jsxs)("form",{onSubmit:f,className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{className:"text-zinc-300 text-sm font-semibold block mb-2",children:["Stretch Name ",(0,t.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,t.jsx)("input",{type:"text",value:o,onChange:e=>i(e.target.value),placeholder:"e.g., Hamstring Stretch",className:"w-full bg-zinc-900 text-white px-4 py-3 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-600",required:!0,autoFocus:!0})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-zinc-300 text-sm font-semibold block mb-2",children:"Timer (seconds)"}),(0,t.jsx)("input",{type:"number",min:"1",step:"1",value:l,onChange:e=>a(e.target.value),placeholder:"e.g., 30",className:"w-full bg-zinc-900 text-white px-4 py-3 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-600"})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{className:"text-zinc-300 text-sm font-semibold block mb-2",children:["Muscle Groups ",(0,t.jsx)("span",{className:"text-zinc-500",children:"(up to 2)"})]}),(0,t.jsx)("div",{className:"rounded-lg border border-zinc-700 bg-zinc-900 px-3 py-2",children:0===h.length?(0,t.jsx)("span",{className:"text-zinc-500 text-sm",children:"Select muscle groups below"}):(0,t.jsx)("div",{className:"flex flex-wrap gap-2",children:h.map(e=>(0,t.jsxs)("button",{type:"button",onClick:()=>x(t=>t.filter(t=>t!==e)),className:"inline-flex items-center gap-1 rounded-full border border-blue-600/40 bg-blue-700/30 px-3 py-1 text-xs font-semibold text-blue-100 transition hover:border-blue-400 hover:bg-blue-600/60",children:[(0,r.formatTypeLabel)(e),(0,t.jsx)("span",{"aria-hidden":!0,children:"Ã—"})]},e))})}),(0,t.jsxs)("div",{className:"mt-3",children:[(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsxs)("select",{value:"",onChange:e=>{let t=e.target.value;t&&(x(e=>e.includes(t)||e.length>=2?e:[...e,t]),e.currentTarget.value="")},className:"w-full appearance-none bg-zinc-900 text-white px-4 py-2 pr-10 rounded-lg border border-zinc-700 focus:outline-none focus:ring-2 focus:ring-blue-600",children:[(0,t.jsx)("option",{value:"",disabled:!0,children:"Add a muscle group..."}),r.STRETCH_MUSCLE_TAGS.filter(e=>"unknown"!==e).map(e=>(0,t.jsx)("option",{value:e,children:(0,r.formatTypeLabel)(e)},e))]}),(0,t.jsx)("span",{className:"pointer-events-none absolute right-3 top-1/2 -translate-y-1/2 text-zinc-400",children:"â–¾"})]}),(0,t.jsx)("p",{className:"mt-2 text-xs text-zinc-500",children:"Choose up to two muscle groups."})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-zinc-300 text-sm font-semibold block mb-2",children:"Video URL"}),(0,t.jsx)("input",{type:"url",value:c,onChange:e=>u(e.target.value),placeholder:"https://youtube.com/...",className:"w-full bg-zinc-900 text-white px-4 py-3 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-600"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-zinc-300 text-sm font-semibold block mb-2",children:"Tips"}),(0,t.jsx)("textarea",{value:d,onChange:e=>m(e.target.value),placeholder:"Form tips, cues, etc.",rows:3,className:"w-full bg-zinc-900 text-white px-4 py-3 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-600 resize-none"})]}),(0,t.jsx)("p",{className:"text-xs text-zinc-400",children:"Duration, video URL, tips, and muscle groups will be auto-filled with AI if empty."}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-3 pt-2",children:[(0,t.jsx)("button",{type:"button",onClick:n,className:"bg-zinc-700 hover:bg-zinc-600 text-white py-3 rounded-lg font-semibold transition-colors",children:"Cancel"}),(0,t.jsx)("button",{type:"submit",disabled:!o.trim()||g,className:"bg-blue-700 hover:bg-blue-800 disabled:bg-blue-900 disabled:cursor-not-allowed text-white py-3 rounded-lg font-bold transition-colors",children:g?"Creating...":"Create & Select"})]})]})]})})}var o=e.i(85064);let i="other";function l(e){return(0,r.parseTagJson)(e.muscle_groups,r.STRETCH_MUSCLE_TAGS)}function a({onSelect:e,onCancel:a,filterType:c,title:u}){let[d,m]=(0,s.useState)([]),[h,x]=(0,s.useState)(""),[g,b]=(0,s.useState)(!0),[f,p]=(0,s.useState)(!1);(0,s.useEffect)(()=>{S()},[]);let S=async()=>{try{let e=await fetch("/api/stretches"),t=await e.json();m(t.stretches)}catch(e){console.error("Error fetching stretches:",e)}finally{b(!1)}},v=async t=>{try{let s=await fetch("/api/stretches",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!s.ok)throw Error("Failed to create stretch");let r=await s.json();await S();let n=t.muscleGroups?.length?JSON.stringify(t.muscleGroups):null,o={id:r.id,name:t.name,timer_seconds:"number"==typeof r.timer_seconds?r.timer_seconds:null,muscle_groups:n,video_url:t.videoUrl||null,tips:"string"==typeof r.tips?r.tips:t.tips||null};p(!1),e(o)}catch(e){console.error("Error creating stretch:",e),alert("Failed to create stretch. Please try again.")}},N=function(e){let t=new Map;for(let s of[...e].sort((e,t)=>e.name.localeCompare(t.name))){let e=l(s);for(let r of e.length>0?e:[i]){let e=t.get(r);e?e.push(s):t.set(r,[s])}}let s=[...r.STRETCH_MUSCLE_ORDER,i];return Array.from(t.keys()).sort((e,t)=>{let r=s.indexOf(e),n=s.indexOf(t);return -1===r&&-1===n?e.localeCompare(t):-1===r?1:-1===n?-1:r-n}).map(e=>({type:e,stretches:t.get(e)||[]}))}(d.filter(e=>{if(!h)return!0;let t=h.toLowerCase(),s=e.name.toLowerCase(),r=l(e).join(" ").toLowerCase();return s.includes(t)||r.includes(t)}));return f?(0,t.jsx)(n,{onSubmit:v,onCancel:()=>p(!1)}):(0,t.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center p-4 z-50",children:(0,t.jsxs)("div",{className:"bg-zinc-800 rounded-lg p-6 max-w-3xl w-full max-h-[90vh] flex flex-col border-2 border-blue-800",children:[(0,t.jsx)("h2",{className:"text-2xl font-bold text-white mb-4",children:u||("pre_workout"===c?"Select Pre-Workout Stretch":"post_workout"===c?"Select Post-Workout Stretch":"Select Stretch")}),(0,t.jsxs)("div",{className:"mb-4 space-y-3",children:[(0,t.jsx)("input",{type:"text",value:h,onChange:e=>x(e.target.value),placeholder:"Search by name or muscle group...",className:"w-full bg-zinc-900 text-white px-4 py-3 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-700",autoFocus:!0}),(0,t.jsx)("button",{onClick:()=>p(!0),className:"w-full bg-blue-700 hover:bg-blue-800 text-white py-3 rounded-lg font-bold transition-colors",children:"+ Create New Stretch"})]}),(0,t.jsx)("div",{className:"flex-1 overflow-y-auto mb-4 space-y-2",children:g?(0,t.jsx)("div",{className:"text-center text-zinc-400 py-8",children:"Loading stretches..."}):0===N.length?(0,t.jsx)("div",{className:"text-center text-zinc-400 py-8",children:h?"No stretches found":"No stretches available"}):(0,t.jsx)("div",{className:"space-y-4",children:N.map(({type:s,stretches:n})=>(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("div",{className:"text-xs uppercase tracking-wide text-zinc-400",children:(0,r.formatTypeLabel)(s)}),n.map(s=>{let r=l(s);return(0,t.jsx)("button",{onClick:()=>e(s),className:"w-full bg-zinc-900 hover:bg-zinc-700 text-left p-4 rounded-lg transition-colors border-2 border-zinc-700 hover:border-blue-600",children:(0,t.jsx)("div",{className:"flex items-start justify-between",children:(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("div",{className:"text-white font-semibold",children:s.name}),(0,t.jsx)("div",{className:"text-zinc-400 text-sm mt-1",children:(0,o.formatStretchTimer)(s.timer_seconds)}),r.length>0&&(0,t.jsx)("div",{className:"flex flex-wrap gap-1 mt-2",children:r.map((e,s)=>(0,t.jsx)("span",{className:"text-xs bg-zinc-700 text-zinc-300 px-2 py-1 rounded",children:e},s))})]})})},s.id)})]},s))})}),(0,t.jsx)("button",{onClick:a,className:"w-full bg-zinc-700 hover:bg-zinc-600 text-white py-3 rounded-lg font-semibold transition-colors",children:"Cancel"})]})})}e.s(["default",()=>a],96388)},21140,e=>{"use strict";var t=e.i(62376);function s(e,t){window.dispatchEvent(new CustomEvent("workout-autosave",{detail:{status:e,eventType:t,at:Date.now()}}))}async function r(e){let r=(0,t.getWorkoutSession)();if(r){s("saving",e.type);try{let n=await fetch("/api/workout-autosave",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({sessionId:r.sessionId??null,workoutName:r.workoutName,routineId:r.routineId??null,startTime:r.startTime,event:e})});if(!n.ok)return void s("error",e.type);let o=await n.json();"number"==typeof o?.sessionId&&(0,t.setWorkoutSessionId)(o.sessionId),s("success",e.type)}catch(t){console.error("Autosave failed:",t),s("error",e.type)}}}e.s(["autosaveWorkout",()=>r])},59462,1983,e=>{"use strict";var t=e.i(43476),s=e.i(18566),r=e.i(22016);function n({exitUrl:e,previousUrl:n,onPrevious:o,skipUrl:i,skipLabel:l="Skip",onSkip:a,nextLabel:c="Next",onNext:u}){let d=(0,s.useRouter)(),m=!!n||!!o,h=i||a,x=!!u;return(0,t.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsx)(r.default,{href:e,className:"text-red-400 hover:text-red-300 font-medium",children:"Exit"}),(0,t.jsx)("button",{onClick:()=>{o?o():n&&d.push(n)},disabled:!m,className:`font-medium ${m?"text-blue-400 hover:text-blue-300":"text-zinc-600 cursor-not-allowed"}`,children:"â† Previous"})]}),x?(0,t.jsxs)("button",{onClick:u,className:"text-blue-400 hover:text-blue-300 font-medium",children:[c," â†’"]}):h?(0,t.jsxs)("button",{onClick:()=>{a?a():i&&d.push(i)},className:"text-zinc-400 hover:text-zinc-300",children:[l," â†’"]}):null]})}e.s(["default",()=>n],59462);var o=e.i(71645);function i({className:e=""}){let[s,r]=(0,o.useState)({status:"idle"});(0,o.useEffect)(()=>{let e=e=>{let t=e.detail;t&&r({...t})};return window.addEventListener("workout-autosave",e),()=>window.removeEventListener("workout-autosave",e)},[]);let n=(0,o.useMemo)(()=>s.at?new Date(s.at).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit"}):"",[s.at]),{label:i,badgeClass:l}=(0,o.useMemo)(()=>{switch(s.status){case"saving":return{label:"Autosave: savingâ€¦",badgeClass:"text-amber-300 border-amber-500/40"};case"success":return{label:`Autosave: saved ${n}`,badgeClass:"text-emerald-300 border-emerald-500/40"};case"error":return{label:`Autosave: failed ${n}`,badgeClass:"text-red-300 border-red-500/40"};default:return{label:"Autosave: idle",badgeClass:"text-zinc-400 border-zinc-600/40"}}},[s.status,n]);return(0,t.jsx)("div",{className:`rounded-full border px-3 py-1 text-xs font-semibold ${l} ${e}`,"aria-live":"polite",children:i})}e.s(["default",()=>i],1983)},18566,(e,t,s)=>{t.exports=e.r(76562)},71829,e=>{"use strict";let t={progress:"progress",maintenance:"maintenance",light:"light"},s={[t.progress]:"Progress",[t.maintenance]:"Maintenance",[t.light]:"Light"},r={[t.progress]:"Push for small, steady improvements.",[t.maintenance]:"Hold steady and focus on form.",[t.light]:"Easy effort today."};e.s(["EXERCISE_HISTORY_AGGREGATION_MODES",0,{max:"max",avg:"avg"},"EXERCISE_HISTORY_DISPLAY_MODES",0,{weight:"weight",reps:"reps"},"EXERCISE_PRIMARY_METRICS",0,{weight:"weight",height:"height",time:"time",distance:"distance",repsOnly:"reps_only"},"EXERCISE_TYPES",0,{single:"single",b2b:"b2b",circuit:"circuit"},"SESSION_MODES",0,t,"SESSION_MODE_DESCRIPTIONS",0,r,"SESSION_MODE_LABELS",0,s])},62376,e=>{"use strict";var t=e.i(71829);let s="current_workout_session";function r(e){return e===t.SESSION_MODES.progress||e===t.SESSION_MODES.maintenance||e===t.SESSION_MODES.light}function n(e,s=t.SESSION_MODES.progress){return r(e)?e:s}function o(e,t){let r={workoutName:e,routineId:t??null,sessionId:null,startTime:new Date().toISOString(),exercises:[]};localStorage.setItem(s,JSON.stringify(r))}function i(e,t){let s=l(),r=t??null;s?(s.workoutName!==e||(s.routineId??null)!==r)&&o(e,r):o(e,r)}function l(){let e=localStorage.getItem(s);if(!e)return null;let t=JSON.parse(e),r=t.routineId,n="number"==typeof r?r:Number(r);t.routineId=Number.isFinite(n)?n:null;let o=t.sessionId,i="number"==typeof o?o:Number(o);return t.sessionId=Number.isFinite(i)?i:null,t}function a(e){let t=l();t&&t.sessionId!==e&&(t.sessionId=e,localStorage.setItem(s,JSON.stringify(t)))}function c(e){let t=l();t&&(t.exercises.push(e),localStorage.setItem(s,JSON.stringify(t)))}function u(e){let t=l();t&&(t.cardio=e,localStorage.setItem(s,JSON.stringify(t)))}function d(){localStorage.removeItem(s)}e.s(["addCardioToSession",()=>u,"addExerciseToSession",()=>c,"clearWorkoutSession",()=>d,"ensureWorkoutSession",()=>i,"getWorkoutSession",()=>l,"initWorkoutSession",()=>o,"isSessionMode",()=>r,"resolveSessionMode",()=>n,"setWorkoutSessionId",()=>a])},5907,e=>{"use strict";let t="session_workout_override",s="session_workout_change_ack",r="session_workout_targets_meta";function n(e,t,s){let r=encodeURIComponent(t),n=s?encodeURIComponent(s):"default";return`${e}:${r}:${n}`}function o(e,s){let r=n(t,e,s),o=sessionStorage.getItem(r);if(!o)return null;try{return JSON.parse(o)}catch(e){return console.error("Failed to parse session workout override:",e),null}}function i(e,s){let r=n(t,e.name,s);sessionStorage.setItem(r,JSON.stringify(e))}function l(e,t){let s=n(r,e,t),o=sessionStorage.getItem(s);if(!o)return null;try{return JSON.parse(o)}catch(e){return console.error("Failed to parse session targets meta:",e),null}}function a(e,t,s){let o=n(r,e,t);s?sessionStorage.setItem(o,JSON.stringify(s)):sessionStorage.removeItem(o)}function c(e,t){let r=n(s,e,t);return"1"===sessionStorage.getItem(r)}function u(e,t){let r=n(s,e,t);sessionStorage.setItem(r,"1")}e.s(["acknowledgeChangeWarning",()=>u,"hasChangeWarningAck",()=>c,"loadSessionTargetsMeta",()=>l,"loadSessionWorkout",()=>o,"saveSessionTargetsMeta",()=>a,"saveSessionWorkout",()=>i])},25415,e=>{"use strict";let t="No form tips yet.";function s(e){if("string"!=typeof e)return t;let s=e.trim();return s.length>0?s:t}function r(e,t){if("string"==typeof t&&t.trim().length>0)return t.trim();let s="string"==typeof e&&e.trim().length>0?e.trim():"exercise",r=`${s} form`;return`https://www.youtube.com/results?search_query=${encodeURIComponent(r)}`}e.s(["getFormTips",()=>s,"getVideoUrl",()=>r])},67664,81801,47009,e=>{"use strict";var t=e.i(43476),s=e.i(71645);function r({timerSeconds:e,onComplete:s}){return!e||e<=0?null:(0,t.jsx)(n,{timerSeconds:e,onComplete:s})}function n({timerSeconds:e,onComplete:r}){let n,[o,i]=(0,s.useState)(e),[l,a]=(0,s.useState)(!1),[c,u]=(0,s.useState)(!1),d=(0,s.useRef)(null),m=(0,s.useRef)(!1);(0,s.useEffect)(()=>{i(e),a(!1),u(!1),d.current=null,m.current=!1},[e]);let h=(0,s.useCallback)(()=>{if(!d.current)return;let e=Math.max(0,Math.ceil((d.current-Date.now())/1e3));i(e),0===e&&(a(!1),m.current||(m.current=!0,r?.()))},[r]);(0,s.useEffect)(()=>{if(!l)return;h();let e=setInterval(h,250);return()=>clearInterval(e)},[l,h]),(0,s.useEffect)(()=>{let e=()=>{"visible"===document.visibilityState&&h()},t=()=>{h()};return document.addEventListener("visibilitychange",e),window.addEventListener("focus",t),()=>{document.removeEventListener("visibilitychange",e),window.removeEventListener("focus",t)}},[h]);let x=(0,s.useCallback)(()=>{let t=0===o?e:o;t<=0||(0===o&&i(t),m.current=!1,d.current=Date.now()+1e3*t,a(!0),u(!0))},[o,e]),g=(0,s.useCallback)(()=>{d.current&&i(Math.max(0,Math.ceil((d.current-Date.now())/1e3))),d.current=null,a(!1)},[]),b=(0,s.useCallback)(()=>{a(!1),i(e),u(!1),d.current=null,m.current=!1},[e]);return(0,t.jsxs)("div",{className:"bg-zinc-900 rounded-lg p-4 mb-4",children:[(0,t.jsxs)("div",{className:"text-center mb-4",children:[(0,t.jsx)("div",{className:`text-5xl font-bold font-mono ${o<=5&&l?"text-red-500 animate-pulse":"text-white"}`,children:(n=Math.floor(o/60),`${n}:${(o%60).toString().padStart(2,"0")}`)}),0===o&&c&&(0,t.jsx)("div",{className:"text-blue-300 text-lg font-semibold mt-2",children:"Complete!"})]}),(0,t.jsxs)("div",{className:"flex gap-3 justify-center",children:[l?(0,t.jsxs)("button",{onClick:g,className:"bg-yellow-600 hover:bg-yellow-700 text-white px-6 py-3 rounded-lg font-semibold transition-colors flex items-center gap-2",children:[(0,t.jsx)("span",{className:"text-xl",children:"â¸"}),"Pause"]}):(0,t.jsxs)("button",{onClick:x,className:"bg-blue-800 hover:bg-blue-700 text-white px-6 py-3 rounded-lg font-semibold transition-colors flex items-center gap-2",children:[(0,t.jsx)("span",{className:"text-xl",children:"â–¶"}),c&&o>0?"Resume":0===o?"Restart":"Start Timer"]}),c&&(0,t.jsx)("button",{onClick:b,className:"bg-zinc-700 hover:bg-zinc-600 text-white px-4 py-3 rounded-lg font-semibold transition-colors",children:"Reset"})]})]})}var o=e.i(85064),i=e.i(25415);function l({stretch:e,timerKey:s=0,variant:n="pre"}){let l=(0,i.getFormTips)(e.tips),a=(0,i.getVideoUrl)(e.name,e.videoUrl),c=e.timerSeconds||0,u=(0,o.formatStretchTimer)(c);return(0,t.jsxs)("div",{className:"bg-zinc-800 rounded-lg p-8 border-2 border-blue-800 mb-8",children:[(0,t.jsxs)("div",{className:"text-center mb-6",children:[(0,t.jsx)("div",{className:"text-6xl mb-4",children:"pre"===n?"ðŸƒ":"ðŸ§˜"}),(0,t.jsx)("h2",{className:"text-3xl font-bold text-white mb-4",children:e.name}),(0,t.jsx)("div",{className:"text-xl text-blue-300 font-semibold mb-4",children:u})]}),(0,t.jsx)(r,{timerSeconds:c},s),(0,t.jsxs)("div",{className:"bg-zinc-900 rounded-lg p-4 mb-6",children:[(0,t.jsx)("div",{className:"text-zinc-400 text-sm mb-2",children:"Tips:"}),(0,t.jsx)("p",{className:"text-zinc-200 text-lg leading-relaxed",children:l})]}),(0,t.jsx)("a",{href:a,target:"_blank",rel:"noopener noreferrer",className:"block w-full bg-red-600 hover:bg-red-700 text-white text-center py-3 rounded-lg text-lg font-semibold transition-colors",children:"ðŸ“º Watch Video"})]})}function a(){return(0,t.jsx)("div",{className:"min-h-screen bg-zinc-900 flex items-center justify-center p-4",children:(0,t.jsx)("div",{className:"text-white text-2xl",children:"Loading..."})})}e.s(["default",()=>l],67664),e.s(["default",()=>a],81801);var c=e.i(22016);function u({message:e="Something went wrong",backUrl:s="/routines",backText:r="Back to routines"}){return(0,t.jsx)("div",{className:"min-h-screen bg-zinc-900 flex items-center justify-center p-4",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"text-white text-2xl mb-4",children:e}),(0,t.jsx)(c.default,{href:s,className:"text-blue-400 hover:text-blue-300",children:r})]})})}e.s(["default",()=>u],47009)},49234,e=>{"use strict";var t=e.i(43476),s=e.i(71645),r=e.i(18566),n=e.i(62376),o=e.i(21140),i=e.i(59462),l=e.i(67664),a=e.i(96388),c=e.i(81801),u=e.i(47009),d=e.i(1983),m=e.i(5907),h=e.i(20970);function x(){let e=(0,r.useParams)(),x=(0,r.useRouter)(),g=(0,r.useSearchParams)(),[b,f]=(0,s.useState)(null),[p,S]=(0,s.useState)(0),[v,N]=(0,s.useState)(!0),[w,j]=(0,s.useState)(!1),[y,k]=(0,s.useState)(null),[C,I]=(0,s.useState)(!1),E=(0,s.useRef)(null),z=g.get("routineId");if((0,s.useEffect)(()=>{!async function(){try{let t=z?Number(z):null,s=Number.isNaN(t)?null:t,r=decodeURIComponent(e.workoutName),o=(0,h.loadWorkoutBootstrapCache)({workoutName:r,routineId:z}),i=null;if(o)i=o.workout;else{let t=`/api/workout/${e.workoutName}?bootstrap=1`;z&&(t+=`&routineId=${z}`);let s=await fetch(t);if(!s.ok)throw Error("Workout not found");let n=await s.json(),o={workout:i=n.workout,settings:n.settings,lastSetSummaries:n.lastSetSummaries||{},lastWorkoutReport:n.lastWorkoutReport||null,routineMeta:n.routineMeta};(0,h.saveWorkoutBootstrapCache)({workoutName:r,routineId:z??(o.routineMeta?.id?String(o.routineMeta.id):null),payload:o})}if(!i)throw Error("Workout not found");let l=(0,m.loadSessionWorkout)(i.name,z)||i;f(l),(0,n.ensureWorkoutSession)(l.name,s);let a=g.get("index");if(a){let e=parseInt(a,10),t=l.preWorkoutStretches?.length||0;!isNaN(e)&&e>=0&&e<t&&S(e)}}catch(e){console.error("Error fetching workout:",e)}finally{N(!1)}}()},[e.workoutName,g,z]),v)return(0,t.jsx)(c.default,{});if(!b)return(0,t.jsx)(u.default,{message:"Workout not found"});let _=b.preWorkoutStretches||[],T=encodeURIComponent(b.name),R=new URLSearchParams;z&&R.set("routineId",z);let O=R.toString()?`?${R.toString()}`:"",M=()=>{(0,m.acknowledgeChangeWarning)(b.name,z),I(!1);let e=E.current;E.current=null,e?.()},$=()=>{E.current=null,I(!1)},W=e=>{var t;t=()=>{k(e),j(!0)},(0,m.hasChangeWarningAck)(b.name,z)?t():(E.current=t,I(!0))},U=e=>{if(!y)return;let t={name:e.name,timerSeconds:e.timer_seconds??0,videoUrl:e.video_url||"",tips:e.tips||""},s=[..._],r=Math.min(p+1,s.length);"add"===y?s.splice(r,0,t):s[p]=t;let n={...b,preWorkoutStretches:s};f(n),(0,m.saveSessionWorkout)(n,z),k(null),j(!1)};if(0===_.length)return(0,t.jsxs)("div",{className:"min-h-screen bg-zinc-900 flex flex-col items-center justify-center p-4",children:[(0,t.jsx)("div",{className:"text-white text-2xl mb-4",children:"No pre-workout stretches"}),(0,t.jsxs)("div",{className:"w-full max-w-xs space-y-3",children:[(0,t.jsx)("button",{onClick:()=>W("add"),className:"w-full bg-blue-800 hover:bg-blue-700 text-white px-6 py-3 rounded-lg text-base font-semibold transition-colors",children:"+ Add Stretch"}),(0,t.jsx)("button",{onClick:()=>x.push(`/workout/${T}/active${O}`),className:"w-full bg-blue-800 hover:bg-blue-700 text-white px-6 py-3 rounded-lg text-base font-semibold transition-colors",children:"Start Exercises â†’"})]}),C&&(0,t.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 p-4",children:(0,t.jsxs)("div",{className:"w-full max-w-md rounded-lg border border-zinc-700 bg-zinc-900 p-6 text-white",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"Session-only change"}),(0,t.jsx)("p",{className:"text-sm text-zinc-300 mb-6",children:"This edit only applies to today's workout. Edit the routine to make a permanent change."}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,t.jsx)("button",{onClick:$,className:"rounded-lg bg-zinc-700 py-2 text-sm font-semibold text-white hover:bg-zinc-600",children:"Cancel"}),(0,t.jsx)("button",{onClick:M,className:"rounded-lg bg-blue-800 py-2 text-sm font-semibold text-white hover:bg-blue-700",children:"Continue"})]})]})}),w&&(0,t.jsx)(a.default,{title:"Add Stretch",filterType:"pre_workout",onCancel:()=>{j(!1),k(null)},onSelect:U})]});let L=_[p],A=(b.postWorkoutStretches||[]).length,D=_.length+b.exercises.length+1+A,P=p+1,J=P/D*100,F=()=>{p>0&&S(p-1)};return(0,t.jsx)("div",{className:"min-h-screen bg-zinc-900 p-4",children:(0,t.jsxs)("div",{className:"max-w-2xl mx-auto",children:[(0,t.jsx)(i.default,{exitUrl:`/workout/${T}${O}`,previousUrl:null,onPrevious:p>0?F:void 0,skipLabel:"Skip All",onSkip:()=>{x.push(`/workout/${T}/active${O}`)}}),(0,t.jsx)("div",{className:"flex justify-end mb-4",children:(0,t.jsx)(d.default,{})}),(0,t.jsxs)("div",{className:"text-center mb-4",children:[(0,t.jsx)("h1",{className:"text-2xl font-bold text-white mb-2",children:"PRE-WORKOUT STRETCH"}),(0,t.jsxs)("div",{className:"text-zinc-400 text-lg",children:[p+1," of ",_.length]})]}),(0,t.jsxs)("div",{className:"mb-8",children:[(0,t.jsx)("div",{className:"h-2 bg-zinc-800 rounded-full overflow-hidden",children:(0,t.jsx)("div",{className:"h-full bg-blue-700 transition-all duration-300",style:{width:`${J}%`}})}),(0,t.jsxs)("div",{className:"text-zinc-500 text-sm text-center mt-2",children:["Overall Progress: ",P," / ",D]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-3 mb-6",children:[(0,t.jsx)("button",{onClick:()=>W("add"),className:"bg-blue-900/80 hover:bg-blue-800 text-white py-2 rounded-lg text-sm font-semibold transition-colors",children:"+ Add Stretch"}),(0,t.jsx)("button",{onClick:()=>W("replace"),className:"bg-blue-900/80 hover:bg-blue-800 text-white py-2 rounded-lg text-sm font-semibold transition-colors",children:"â†º Replace Stretch"})]}),(0,t.jsx)(l.default,{stretch:L,timerKey:p,variant:"pre"}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsx)("button",{onClick:F,disabled:0===p,className:`py-4 rounded-lg text-lg font-semibold transition-colors ${0===p?"bg-zinc-800 text-zinc-600 cursor-not-allowed":"bg-zinc-700 hover:bg-zinc-600 text-white"}`,children:"â† Previous"}),(0,t.jsx)("button",{onClick:()=>{(0,o.autosaveWorkout)({type:"stretch",phase:"pre",index:p}),p<_.length-1?S(p+1):x.push(`/workout/${T}/active${O}`)},className:"bg-blue-800 hover:bg-blue-700 text-white py-4 rounded-lg text-lg font-semibold transition-colors",children:p<_.length-1?"Next Stretch â†’":"Start Exercises â†’"})]}),C&&(0,t.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 p-4",children:(0,t.jsxs)("div",{className:"w-full max-w-md rounded-lg border border-zinc-700 bg-zinc-900 p-6 text-white",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"Session-only change"}),(0,t.jsx)("p",{className:"text-sm text-zinc-300 mb-6",children:"This edit only applies to today's workout. Edit the routine to make a permanent change."}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,t.jsx)("button",{onClick:$,className:"rounded-lg bg-zinc-700 py-2 text-sm font-semibold text-white hover:bg-zinc-600",children:"Cancel"}),(0,t.jsx)("button",{onClick:M,className:"rounded-lg bg-blue-800 py-2 text-sm font-semibold text-white hover:bg-blue-700",children:"Continue"})]})]})}),w&&(0,t.jsx)(a.default,{title:"replace"===y?"Replace Stretch":"Add Stretch",filterType:"pre_workout",onCancel:()=>{j(!1),k(null)},onSelect:U})]})})}function g(){return(0,t.jsx)(s.Suspense,{fallback:(0,t.jsx)(c.default,{}),children:(0,t.jsx)(x,{})})}e.s(["default",()=>g])}]);